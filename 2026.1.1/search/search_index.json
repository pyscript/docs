{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"PyScript is an open source platform for Python in the browser. <p>Step 1: Add these two lines to the <code>&lt;head&gt;</code> of your HTML document:</p> <pre><code>&lt;link rel=\"stylesheet\" href=\"https://pyscript.net/releases/2026.1.1/core.css\" /&gt;\n&lt;script type=\"module\" src=\"https://pyscript.net/releases/2026.1.1/core.js\"&gt;&lt;/script&gt;\n</code></pre> <p>Step 2: Start PyScript with a <code>&lt;script&gt;</code> tag in the <code>&lt;body&gt;</code> of your HTML document:</p> <pre><code>&lt;script type=\"py\" config=\"./conf.json\" src=\"./main.py\"&gt;&lt;/script&gt;\n</code></pre> <p>Step 3: Write Python and explore the <code>pyscript</code> namespace:</p> <pre><code>from pyscript import when, display\n@when(\"click\", \"#my-button\")\ndef handler():\ndisplay(\"Button clicked!\")\n</code></pre> <p>That's just the start of it!</p> <p>What's next?</p> I'm a beginner... Welcome! PyScript is designed to be friendly for beginner coders. Start   with our beginning PyScript guide   to create your first apps. Graduate to the   user guide to grow your understanding. I'm already technical... The beginner docs describe a   simple coding environment.   Consult the   user guide for comprehensive learning   resources. The   example applications demonstrate many of   the features of PyScript. The API docs and FAQ   contain the technical details. I want support... <p>Join the conversation on our     discord server,     for realtime chat with core maintainers and fellow users of PyScript.     Check out our YouTube     channel, full of community calls and show-and-tells.</p> I want to contribute... <p>Welcome, friend!     PyScript is an open source project, we expect     participants to act in the spirit of our     code of conduct and we have many      ways in which you can contribute.     Our developer guide explains how to set     up a working development environment for PyScript.</p>"},{"location":"beginning-pyscript/","title":"Beginning PyScript","text":"<p>PyScript is an open source platform for Python in the browser.</p> <p>Write code, curate the project's assets, and test your application just like you normally would.</p> <p>However, to distribute a PyScript application, host it on the web, then click on the link to your application. PyScript and the browser do the rest.</p> <p>Simple!</p> <p>Now read on for a beginner-friendly tour of the core aspects of PyScript. We only assume you know how to use a browser and edit text.</p>"},{"location":"beginning-pyscript/#an-application","title":"An application","text":"<p>Usually, PyScript applications need just three things:</p> <ol> <li>An <code>index.html</code> file that is served to your browser.</li> <li>A description of the Python environment in which your application will run.    This is usually specified by a <code>settings.json</code> or <code>settings.toml</code>    configuration file (the filename name doesn't matter, but you just need to    know you can configure your Python environment).</li> <li>Python code (usually in a file called something like <code>main.py</code>) that defines    how your application works.</li> </ol> <p>Create these files with your favourite code editor on your local file system. Alternatively, services like pyscript.com will take away all the pain of organising, previewing and deploying your application.</p> <p>If you're using your local file system, you'll need a way to view your application in your browser. If you already have Python installed on your local machine, serve your files with the following command run from your terminal and in the same directory as your files:</p> <pre><code>python3 -m http.server\n</code></pre> <p>Point your browser at http://localhost:8000. Remember to refresh the page (<code>CTRL-R</code>) to see any updates you may have made.</p> <p>Note</p> <p>If you're using VSCode as your editor, the Live Server extension can be used to reload the page as you edit your files.</p> <p>Alternatively, if you have an account on GitHub you could use VSCode in your browser as a PyScript aware \"CodeSpace\" (just follow the instructions in the README file).</p> <p>If you decide to use pyscript.com, once signed in, create a new project by pressing the \"+\" button on the left-hand side below the site's logo. You'll be presented with a page containing three columns (listing your files, showing your code and previewing the app). The \"save\" and \"run\" buttons do exactly what you'd expect.</p> <p></p> <p>Let's build a simple PyScript application that translates English \ud83c\uddec\ud83c\udde7 into Pirate \ud83c\udff4\u200d\u2620\ufe0f speak. In order to do this we'll make use of the arrr library. By building this app you'll be introduced to all the core concepts of PyScript at an introductory level.</p> <p>You can see this application embedded into the page below (try it out!):</p> <p>Let's explore each of the three files that make this app work.</p>"},{"location":"beginning-pyscript/#pyscriptjson","title":"<code>pyscript.json</code>","text":"<p>This file tells PyScript and your browser about various configurable aspects of your application. Put simply, it tells PyScript what it needs in order to run your application. The only thing we need to show is that we require the third party <code>arrr</code> module to do the actual translation.</p> <p>We do this by putting <code>arrr</code> as the single entry in a list of required <code>packages</code>, so the content of <code>pyscript.json</code> looks like this:</p> pyscript.json<pre><code>{\n\"packages\": [\"arrr\"]\n}\n</code></pre> <p>It doesn't need to be called <code>pyscript.json</code>, but it must be either a <code>json</code> or <code>toml</code> file containing valid PyScript configuration.</p> <p>Info</p> <p>Want to learn more about configuration options? The configuration guide covers everything from specifying Python packages to customising how PyScript loads and runs.</p>"},{"location":"beginning-pyscript/#indexhtml","title":"<code>index.html</code>","text":"<p>Next we come to the <code>index.html</code> file that is first served to your browser.</p> <p>To start out, we need to tell the browser that this HTML document uses PyScript, and so we create a <code>&lt;script&gt;</code> tag that references the PyScript module, and a <code>&lt;link&gt;</code> to some PyScript specific CSS, in the document's <code>&lt;head&gt;</code> tag:</p> The head of index.html<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=\"utf-8\" /&gt;\n&lt;meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" /&gt;\n&lt;title&gt;\ud83e\udd9c Polyglot - Piratical PyScript&lt;/title&gt;\n&lt;link rel=\"stylesheet\" href=\"https://pyscript.net/releases/2026.1.1/core.css\"&gt;\n&lt;script type=\"module\" src=\"https://pyscript.net/releases/2026.1.1/core.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;!-- TODO: Fill in our custom application code here... --&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>Notice that the <code>&lt;body&gt;</code> of the document is empty except for the TODO comment. It's in here that we put standard HTML content to define our user interface, so the <code>&lt;body&gt;</code> now looks like:</p> The body of index.html<pre><code>&lt;body&gt;\n&lt;h1&gt;Polyglot \ud83e\udd9c \ud83d\udcac \ud83c\uddec\ud83c\udde7 \u27a1\ufe0f \ud83c\udff4\u200d\u2620\ufe0f&lt;/h1&gt;\n&lt;p&gt;Translate English into Pirate speak...&lt;/p&gt;\n&lt;input type=\"text\" id=\"english\" placeholder=\"Type English here...\" /&gt;\n&lt;button id=\"translate-button\"&gt;Translate&lt;/button&gt;\n&lt;div id=\"output\"&gt;&lt;/div&gt;\n&lt;script type=\"py\" src=\"./main.py\" config=\"./pyscript.json\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n</code></pre> <p>This fragment of HTML contains the application's header (<code>&lt;h1&gt;</code>), some instructions between the <code>&lt;p&gt;</code> tags, an <code>&lt;input&gt;</code> box for the English text, and a <code>&lt;button&gt;</code> to click to generate the translation. Notice the button has an <code>id</code> attribute (<code>id=\"translate-button\"</code>) which we'll use to attach a Python function to its <code>click</code> event. Towards the end there's a <code>&lt;div id=\"output\"&gt;</code> which will contain the resulting pirate speak as the application's output.</p> <p>We put all this together in the <code>script</code> tag at the end of the <code>&lt;body&gt;</code>. This tells the browser the script is using PyScript (<code>type=\"py\"</code>), and where PyScript should find the Python source code (<code>src=\"./main.py\"</code>). Finally, we indicate where PyScript should find the configuration (<code>config=\"./pyscript.json\"</code>).</p> <p>In the end, our HTML should look like this:</p> The complete index.html<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=\"utf-8\" /&gt;\n&lt;meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" /&gt;\n&lt;title&gt;\ud83e\udd9c Polyglot - Piratical PyScript&lt;/title&gt;\n&lt;link rel=\"stylesheet\" href=\"https://pyscript.net/releases/2026.1.1/core.css\"&gt;\n&lt;script type=\"module\" src=\"https://pyscript.net/releases/2026.1.1/core.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;Polyglot \ud83e\udd9c \ud83d\udcac \ud83c\uddec\ud83c\udde7 \u27a1\ufe0f \ud83c\udff4\u200d\u2620\ufe0f&lt;/h1&gt;\n&lt;p&gt;Translate English into Pirate speak...&lt;/p&gt;\n&lt;input type=\"text\" id=\"english\" placeholder=\"Type English here...\" /&gt;\n&lt;button id=\"translate-button\"&gt;Translate&lt;/button&gt;\n&lt;div id=\"output\"&gt;&lt;/div&gt;\n&lt;script type=\"py\" src=\"./main.py\" config=\"./pyscript.json\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>But this only defines how the user interface should look. To define its behaviour we need to write some Python. Specifically, we need to attach a function to the button's click event.</p>"},{"location":"beginning-pyscript/#mainpy","title":"<code>main.py</code>","text":"<p>The behaviour of the application is defined in <code>main.py</code>. It looks like this:</p> main.py<pre><code>import arrr\nfrom pyscript import web, when\n@when(\"click\", \"#translate-button\")\ndef translate_english(event):\n\"\"\"\n    Translate English text to Pirate speak.\n    \"\"\"\ninput_text = web.page[\"english\"]\nenglish = input_text.value\noutput_div = web.page[\"output\"]\noutput_div.innerText = arrr.translate(english)\n</code></pre> <p>It's not very complicated Python code.</p> <p>On line 1 the <code>arrr</code> module is imported so we can do the actual English to Pirate translation. If we hadn't told PyScript to download the <code>arrr</code> module in our <code>pyscript.json</code> configuration file, this line would cause an error. PyScript has ensured our environment is set up with the expected <code>arrr</code> module before our Python code is evaluated.</p> <p>Line 2 imports the <code>web</code> module and the <code>when</code> decorator from <code>pyscript</code>. The <code>web</code> module provides a Pythonic way to interact with the web page, while <code>when</code> is used to easily attach Python functions to browser events.</p> <p>On line 5 we use the <code>@when</code> decorator to attach our function to the button's click event. The decorator takes two arguments: the event type (<code>\"click\"</code>) and a CSS selector identifying the element (via the id <code>\"#translate-button\"</code>). This is PyScript's idiomatic way to handle events - much more Pythonic than HTML attributes.</p> <p>The <code>translate_english</code> function is defined on line 6. It takes a single parameter called <code>event</code>, which represents the browser event that triggered the function (in this case, the user's click on the button).</p> <p>Inside the body of the function we use <code>web.page[\"english\"]</code> to get a reference to the <code>&lt;input&gt;</code> element with the id \"english\". The <code>web.page</code> object represents the current web page, and using the square bracket notation (<code>web.page[\"element-id\"]</code>) is PyScript's Pythonic way to find elements by their unique id. We assign the result to <code>input_text</code>, then extract the user's <code>english</code> text from the <code>input_text</code>'s <code>value</code> attribute.</p> <p>Next, we get a reference called <code>output_div</code> that points to the <code>&lt;div&gt;</code> element with the id \"output\" using the same <code>web.page[\"output\"]</code> pattern. Finally, we assign the <code>innerText</code> of the <code>output_div</code> to the result of calling <code>arrr.translate</code> to actually translate the <code>english</code> to something piratical.</p> <p>That's it!</p> <p>Alternative: JavaScript-style DOM access</p> <p>PyScript also provides direct access to the browser's JavaScript APIs. If you're already familiar with JavaScript, you can use <code>document.querySelector</code> and other standard DOM methods.</p>"},{"location":"beginning-pyscript/#editing-your-app","title":"Editing your app","text":"<p>If you use an IDE (like VSCode or PyCharm) then you'll probably want it to auto-suggest and introspect aspects of the Python code you're writing. The problem is that the <code>pyscript</code> namespace we provide isn't installed anywhere (because it's in your browser, not your IDE's context) so such information isn't, by default, picked up.</p> <p>Thankfully Python stubs come to the rescue.</p> <p>Members of our community have created Python stub files for PyScript. You should clone the linked-to repository and configure your IDE to consume the stub files.</p> <p>For example, let's say you cloned the repository into <code>~/src/stubs/pyscript-stubs</code>, then in VSCode, you'd create, in your PyScript project, a file called <code>.vscode/settings.json</code> and add the following:</p> <pre><code>{\n\"python.analysis.stubPath\": \"~/src/stubs/pyscript-stubs/src/pyscript-stubs\"\n}\n</code></pre> <p>Then restart the Python language server in VSCode (press <code>Ctrl+Shift+P</code>, or <code>Cmd+Shift+P</code> on Mac, to open the Command Palette and type <code>Python: Restart Language Server</code>).</p> <p>Note</p> <p>The stubs themselves are found within the <code>src/pyscript-stubs</code> directory in the git repository, hence the longer path in the configuration file.</p>"},{"location":"beginning-pyscript/#sharing-your-app","title":"Sharing your app","text":""},{"location":"beginning-pyscript/#from-a-web-server","title":"From a web server","text":"<p>To share your PyScript application, host the three files (<code>pyscript.json</code>,  <code>index.html</code> and <code>main.py</code>) in the same directory on a static web server.</p> <p>Any static web host will work (for example, GitHub Pages, Amazon's S3, Google Cloud or Microsoft's Azure).</p>"},{"location":"beginning-pyscript/#using-pyscriptcom","title":"Using PyScript.com","text":"<p>If you're using pyscript.com for development, you can also deploy directly from there. Save all your files and click the \"run\" button to test your application. The platform provides hosting and generates a shareable link for your app.</p>"},{"location":"beginning-pyscript/#run-pyscript-offline","title":"Run PyScript offline","text":"<p>To run PyScript offline, without the need of a CDN or internet connection, read the offline guide section of the user guide.</p> <p>We also provide an <code>offline.zip</code> file with each release. This file contains everything you need for an offline version of PyScript: PyScript itself, versions of Pyodide and MicroPython, and an index.html page from which you could create your offline-first PyScript work.</p>"},{"location":"beginning-pyscript/#conclusion","title":"Conclusion","text":"<p>Congratulations!</p> <p>You have just created your first PyScript app.</p> <p>But PyScript can do so much more than update text on a page. Here are some of the powerful and fun capabilities waiting for you:</p> <p>Rich output with <code>display()</code>: Instead of manually finding elements and setting their content, you can use PyScript's <code>display()</code> function to show Python objects, images, and charts directly on your page. Imagine displaying a matplotlib chart or a pandas DataFrame with a single function call. Learn more in the user guide.</p> <p>Create dynamic interfaces: The <code>pyscript.web</code> module lets you create entire user interfaces from Python code - build forms, tables, and interactive components without writing HTML. You can compose complex layouts using familiar Python syntax. Explore the possibilities in the DOM interaction guide.</p> <p>Handle any browser event: Beyond simple clicks, you can respond to keyboard input, mouse movements, form submissions, and more. PyScript makes it easy to create rich, interactive experiences. See the events guide for details.</p> <p>Access device capabilities: Capture photos from the camera, record audio, read files from the user's computer, store data locally - PyScript gives your Python code access to modern web capabilities. Check out the media guide and filesystem guide for more information.</p> <p>Build fast, responsive apps: Use web workers to run Python code in the background, keeping your interface smooth even during heavy computation. Perfect for data processing, simulations, or any CPU-intensive task. Learn about workers here.</p> <p>The user guide explores all these topics and more. Keep reading to discover what you can build with PyScript! And if you build something wonderful, please share it via our community discord server (we love to learn about and celebrate what folks have been up to).</p>"},{"location":"conduct/","title":"Code of Conduct","text":"<p>Our code of conduct is based on the Contributor Covenant code of conduct.</p>"},{"location":"conduct/#our-pledge","title":"Our Pledge","text":"<p>We as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for everyone, regardless of age, body size, visible or invisible disability, ethnicity, sex characteristics, gender identity and expression, level of experience, education, socio-economic status, nationality, personal appearance, race, religion, or sexual identity and orientation.</p> <p>We pledge to act and interact in ways that contribute to an open, welcoming, diverse, inclusive, and healthy community.</p>"},{"location":"conduct/#our-standards","title":"Our Standards","text":"<p>Examples of behavior that contributes to a positive environment for our community include:</p> <ul> <li>Demonstrating empathy and kindness toward other people</li> <li>Being respectful of differing opinions, viewpoints, and experiences</li> <li>Giving and gracefully accepting constructive feedback</li> <li>Accepting responsibility and apologizing to those affected by our mistakes,   and learning from the experience</li> <li>Focusing on what is best not just for us as individuals, but for the overall   community</li> </ul> <p>Examples of unacceptable behavior include:</p> <ul> <li>The use of sexualized language or imagery, and sexual attention or   advances of any kind</li> <li>Trolling, insulting or derogatory comments, and personal or political attacks</li> <li>Public or private harassment</li> <li>Publishing others' private information, such as a physical or email   address, without their explicit permission</li> <li>Other conduct which could reasonably be considered inappropriate in a   professional setting</li> </ul>"},{"location":"conduct/#enforcement-responsibilities","title":"Enforcement Responsibilities","text":"<p>Community leaders are responsible for clarifying and enforcing our standards of acceptable behavior and will take appropriate and fair corrective action in response to any behavior that they deem inappropriate, threatening, offensive, or harmful.</p> <p>Community leaders have the right and responsibility to remove, edit, or reject comments, commits, code, wiki edits, issues, and other contributions that are not aligned to this Code of Conduct, and will communicate reasons for moderation decisions when appropriate.</p>"},{"location":"conduct/#scope","title":"Scope","text":"<p>This Code of Conduct applies within all community spaces, and also applies when an individual is officially representing the community in public spaces. Examples of representing our community include using an official e-mail address, posting via an official social media account, or acting as an appointed representative at an online or offline event.</p>"},{"location":"conduct/#enforcement","title":"Enforcement","text":"<p>Instances of abusive, harassing, or otherwise unacceptable behavior may be reported to the community leaders responsible for enforcement as set forth in the repository's Notice.md file. All complaints will be reviewed and investigated promptly and fairly.</p> <p>All community leaders are obligated to respect the privacy and security of the reporter of any incident.</p>"},{"location":"conduct/#enforcement-guidelines","title":"Enforcement Guidelines","text":"<p>Community leaders will follow these Community Impact Guidelines in determining the consequences for any action they deem in violation of this Code of Conduct:</p>"},{"location":"conduct/#1-correction","title":"1. Correction","text":"<p>Community Impact: Use of inappropriate language or other behavior deemed unprofessional or unwelcome in the community.</p> <p>Consequence: A private, written warning from community leaders, providing clarity around the nature of the violation and an explanation of why the behavior was inappropriate. A public apology may be requested.</p>"},{"location":"conduct/#2-warning","title":"2. Warning","text":"<p>Community Impact: A violation through a single incident or series of actions.</p> <p>Consequence: A warning with consequences for continued behavior. No interaction with the people involved, including unsolicited interaction with those enforcing the Code of Conduct, for a specified period of time. This includes avoiding interactions in community spaces as well as external channels like social media. Violating these terms may lead to a temporary or permanent ban.</p>"},{"location":"conduct/#3-temporary-ban","title":"3. Temporary Ban","text":"<p>Community Impact: A serious violation of community standards, including sustained inappropriate behavior.</p> <p>Consequence: A temporary ban from any sort of interaction or public communication with the community for a specified period of time. No public or private interaction with the people involved, including unsolicited interaction with those enforcing the Code of Conduct, is allowed during this period. Violating these terms may lead to a permanent ban.</p>"},{"location":"conduct/#4-permanent-ban","title":"4. Permanent Ban","text":"<p>Community Impact: Demonstrating a pattern of violation of community standards, including sustained inappropriate behavior,  harassment of an individual, or aggression toward or disparagement of classes of individuals.</p> <p>Consequence: A permanent ban from any sort of public interaction within the project community.</p>"},{"location":"conduct/#reporting-a-violation","title":"Reporting a violation","text":"<p>To report a violation of the Code of Conduct, e-mail conduct@pyscript.net</p>"},{"location":"conduct/#attribution","title":"Attribution","text":"<p>This Code of Conduct is adapted from the Contributor Covenant, version 2.0, available at https://www.contributor-covenant.org/version/2/0/code_of_conduct.html.</p> <p>Community Impact Guidelines were inspired by Mozilla's code of conduct enforcement ladder.</p> <p>For answers to common questions about this code of conduct, see the FAQ at https://www.contributor-covenant.org/faq. Translations are available at https://www.contributor-covenant.org/translations.</p>"},{"location":"contributing/","title":"Contributing","text":"<p>Thank you for wanting to contribute to the PyScript project!</p>"},{"location":"contributing/#code-of-conduct","title":"Code of conduct","text":"<p>The PyScript Code of Conduct governs the project and everyone participating in it. By participating, you are expected to uphold this code. Please report unacceptable behavior to the maintainers or administrators as described in that document.</p>"},{"location":"contributing/#ways-to-contribute","title":"Ways to contribute","text":""},{"location":"contributing/#report-bugs","title":"Report bugs","text":"<p>Bugs are tracked on the project issues page.</p> <p>Check first</p> <p>Please check your bug has not already been reported by someone else by searching the existing issues before filing a new one. Once your issue is filed, it will be triaged by another contributor or maintainer. If there are questions raised about your issue, please respond promptly.</p> <ul> <li>Use a clear and descriptive title.</li> <li>Describe the starting context and specific steps needed to reproduce the   problem you have observed. Some of these steps may not be obvious, so please   as much detail as possible.</li> <li>Explain the behaviour you observed, the behaviour you expected, and why this   difference is problematic.</li> <li>Include screenshots if they help make the bug clearer.</li> <li>Include commented example code if that will help recreate the bug.</li> </ul>"},{"location":"contributing/#report-security-issues","title":"Report security issues","text":"<p>If it is not appropriate to submit a security issue using the above process, please e-mail us at security@pyscript.net.</p>"},{"location":"contributing/#ask-questions","title":"Ask questions","text":"<p>If you have questions about the project, using PyScript, or anything else, please ask in the project's discord server.</p>"},{"location":"contributing/#create-resources","title":"Create resources","text":"<p>Folks make all sorts of wonderful things with PyScript.</p> <p>If you have an interesting project, a cool hack, or an innovative way to implement a new capability or feature, please share your work and tell us about it so we can celebrate and amplify your contribution.</p> <ul> <li>Show off your creation at our fortnightly   PyScript FUN   community call on discord.</li> <li>Write up your creation in a blog post.</li> <li>Share it on social media.</li> <li>Create a demo video.</li> <li>Propose a talk about it at a community event.</li> <li>Demonstrate it as a lightning talk at a conference.</li> </ul> <p>Please reach out to us if you'd like advice and feedback.</p>"},{"location":"contributing/#participate","title":"Participate","text":"<p>As an open source project, PyScript has community at its core. In addition to the ways to engage already outlined, you could join our live community calls.</p> <ul> <li>PyScript Community Call<ul> <li>every two weeks on Tuesdays. A coordination call for anyone participating in the   PyScript project.</li> </ul> </li> <li>PyScript FUN<ul> <li>held on the first Thursday of every month, this call is an informal,   supportive and often humorous \"show and tell\" of community created projects,   hacks, feedback and plugins.</li> </ul> </li> </ul> <p>Announcement of connection details is made via the PyScript discord server.</p>"},{"location":"contributing/#technical-contributions","title":"Technical contributions","text":"<p>In addition to working with PyScript, if you would like to contribute to PyScript itself, the following advice should be followed.</p>"},{"location":"contributing/#places-to-start","title":"Places to start","text":"<p>If you're not sure where to begin, we have some suggestions:</p> <ul> <li>Read over our documentation. Are there things missing, or could they be   clearer? Make edits/changes/additions to those documents.</li> <li>Review the open issues. Are they clear? Can you reproduce them? You can   add comments, clarifications, or additions to those issues. If you think you   have an idea of how to address the issue, submit a fix!</li> <li>Look over the open pull requests. Do you have comments or suggestions for   the proposed changes? Add them.</li> <li>Check out the examples. Is there a use case that would be good to have   sample code for? Create an example for it.</li> </ul>"},{"location":"contributing/#set-up-your-development-environment","title":"Set up your development environment","text":"<p>We assume you are familiar with core development practices such as using a code editor, writing Python and/or JavaScript and working with tools and services such as GIT and GitHub.</p> <ul> <li>Create your own fork of the main    PyScript github repository.</li> <li>Clone your fork of PyScript onto your local machine.</li> </ul> <pre><code>git clone https://github.com/&lt;your username&gt;/pyscript\n</code></pre> <ul> <li>Add our original PyScript repository as your <code>upstream</code>.</li> </ul> <pre><code>git remote add upstream https://github.com/pyscript/pyscript.git\n</code></pre> <ul> <li>This allows you to pull the latest changes from the main project.</li> </ul> <pre><code>git pull upstream main\n</code></pre> <ul> <li>Contribute changes using the   GitHub flow   model of coding collaboration.</li> </ul>"},{"location":"contributing/#license-terms-for-contributions","title":"License terms for contributions","text":"<p>PyScrcipt welcomes contributions, suggestions, and feedback. All contributions, suggestions, and feedback you submitted are accepted under the Apache 2.0 license. You represent that if you do not own copyright in the code that you have the authority to submit it under the Apache 2.0 license. All feedback, suggestions, or contributions are not confidential.</p>"},{"location":"contributing/#becoming-a-maintainer","title":"Becoming a maintainer","text":"<p>Contributors are invited to be maintainers of the project by demonstrating good decision making in their contributions, a commitment to the goals of the project, and consistent adherence to the code of conduct.</p>"},{"location":"contributing/#trademarks","title":"Trademarks","text":"<p>The Project abides by the Organization's trademark policy.</p>"},{"location":"developers/","title":"Developer Guide","text":"<p>This page explains the technical and practical requirements and processes needed to contribute to PyScript.</p> <p>Info</p> <p>In the following instructions, we assume familiarity with <code>git</code>, GitHub, the command line and other common development concepts, tools and practices.</p> <p>For those who come from a non-Pythonic technical background (for example, you're a JavaScript developer), we will explain Python-isms as we go along so you're contributing with confidence.</p> <p>If you're unsure, or encounter problems, please ask for help on our discord server.</p>"},{"location":"developers/#welcome","title":"Welcome","text":"<p>We are a diverse, inclusive coding community and welcome contributions from anyone irrespective of their background. If you're thinking, \"but they don't mean me\", then we especially mean YOU. Our diversity means you will meet folks in our community who are different to yourself. Therefore, thoughtful contributions made in good faith, and engagement with respect, care and compassion wins every time.</p> <ul> <li>If you're from a background which isn't well-represented in most geeky   groups, get involved - we want to help you make a difference.</li> <li>If you're from a background which is well-represented in most geeky   groups, get involved - we want your help making a difference.</li> <li>If you're worried about not being technical enough, get involved - your   fresh perspective will be invaluable.</li> <li>If you need help with anything, get involved - we welcome questions asked   in good faith, and will move mountains to help.</li> <li>If you're unsure where to start, get involved - we have many ways to   contribute.</li> </ul> <p>All contributors are expected to follow our code of conduct.</p>"},{"location":"developers/#setup","title":"Setup","text":"<p>The following steps create a working development environment for PyScript. It is through this environment that you contribute to PyScript. You can choose between two options for setting up your environment.</p> <p>Danger</p> <p>The following commands work on Unix like operating systems (like MacOS or Linux). If you are a Microsoft Windows user please use the Windows Subsystem for Linux with the following instructions.</p>"},{"location":"developers/#create-a-virtual-environment","title":"Create a virtual environment","text":"<ul> <li> <p>A Python virtual environment    is a computing \"sandbox\" that safely isolates your work. PyScript's   development makes use of various Python based tools, so both   Python and a virtual environment is needed. There are   many tools to help manage these environments, but the standard way to create   a virtual environment is to use this command in your terminal:</p> <pre><code>python3 -m venv my_pyscript_dev_venv\n</code></pre> </li> </ul> <p>Warning</p> <p>Replace <code>my_pyscript_dev_venv</code> with a meaningful name for the   virtual environment, that works for you.</p> <ul> <li> <p>A <code>my_pyscript_dev_venv</code> directory containing the virtual environment's   \"stuff\" is created as a subdirectory of your current directory. Next,   activate the virtual environment to ensure your development activities happen   within the context of the sandbox:</p> <pre><code>source my_pyscript_dev_venv/bin/activate\n</code></pre> </li> <li> <p>The prompt in your terminal will change to include the name of your virtual   environment indicating the sandbox is active. To deactivate the virtual   environment just type the following into your terminal:</p> <pre><code>deactivate\n</code></pre> </li> </ul>"},{"location":"developers/#option-2-create-a-conda-environment","title":"Option 2: Create a conda environment","text":"<p>This option will install Python and NodeJS for you, so you don't need to have them pre-installed on your system.</p> <ul> <li>If you prefer using conda for environment management, you can create a conda environment that includes both Python and NodeJS:</li> <li> <pre><code>conda create --name pyscript python nodejs\nconda activate pyscript\n</code></pre> </li> </ul> <p>Warning</p> <p>Replace <code>pyscript</code> with a meaningful name for the conda environment, that works for you.</p> <ul> <li>This creates a new environment with both Python and NodeJS installed. The prompt in your terminal will change to include the name of your conda environment indicating the sandbox is active.</li> <li> <p>To deactivate the conda environment just type the following into your terminal:</p> <pre><code>conda deactivate\n</code></pre> </li> <li> <p>If you don't have conda installed, you can download and install Miniconda, Miniforge, or Anaconda.</p> </li> </ul> <p>Info</p> <p>The rest of the instructions on this page assume you are working in an activated virtual environment for developing PyScript.</p>"},{"location":"developers/#prepare-your-repository","title":"Prepare your repository","text":"<ul> <li>Create a fork   of the   PyScript github repository to   your own GitHub account.</li> <li> <p>Clone   your newly forked version of the PyScript repository onto your   local development machine. For example, use this command in your terminal:</p> <pre><code>git clone https://github.com/&lt;YOUR USERNAME&gt;/pyscript\n</code></pre> <p>Warning</p> <p>In the URL for the forked PyScript repository, remember to replace <code>&lt;YOUR USERNAME&gt;</code> with your actual GitHub username.</p> <p>Tip</p> <p>To help explain steps, we will use <code>git</code> commands to be typed into your terminal / command line.</p> <p>The equivalent of these commands could be achieved through other means (such as GitHub's desktop client). How these alternatives work is beyond the scope of this document.</p> </li> <li> <p>Change into the root directory of your newly cloned <code>pyscript</code> repository:</p> <pre><code>cd pyscript\n</code></pre> </li> <li> <p>Add the original PyScript repository as your <code>upstream</code> to allow you to keep   your own fork up-to-date with the latest changes:</p> <pre><code>git remote add upstream https://github.com/pyscript/pyscript.git\n</code></pre> </li> <li> <p>If the above fails, try this alternative:</p> <pre><code>git remote remove upstream\ngit remote add upstream git@github.com:pyscript/pyscript.git\n</code></pre> </li> <li> <p>Pull in the latest changes from the main <code>upstream</code> PyScript repository:</p> <pre><code>git pull upstream main\n</code></pre> </li> <li> <p>Pyscript uses a <code>Makefile</code> to automate the most common development tasks. In   your terminal, type <code>make</code> to see what it can do. You should see something   like this:</p> <pre><code>There is no default Makefile target right now. Try:\n\nmake setup - check your environment and install the dependencies.\nmake clean - clean up auto-generated assets.\nmake build - build PyScript.\nmake precommit-check - run the precommit checks (run eslint).\nmake test-integration - run all integration tests sequentially.\nmake fmt - format the code.\nmake fmt-check - check the code formatting.\n</code></pre> </li> </ul>"},{"location":"developers/#install-dependencies","title":"Install dependencies","text":"<ul> <li> <p>To install the required software dependencies for working on PyScript, in   your terminal type:</p> <pre><code>make setup\n</code></pre> </li> <li> <p>Updates from <code>npm</code> and then <code>pip</code> will scroll past telling you about   their progress installing the required packages.</p> <p>Warning</p> <p>The <code>setup</code> process checks the versions of Python, node and npm. If you encounter a failure at this point, it's probably because one of these pre-requisits is out of date on your system. Please update!</p> </li> </ul>"},{"location":"developers/#check-code","title":"Check code","text":"<ul> <li> <p>To ensure consistency of code layout we use tools to both reformat and check   the code.</p> </li> <li> <p>To ensure your code is formatted correctly:</p> <pre><code>make fmt\n</code></pre> </li> <li> <p>To check your code is formatted correctly:</p> <pre><code>make fmt-check\n</code></pre> </li> <li> <p>Finally, as part of the automated workflow for contributing   pull requests   pre-commit checks the source code. If this fails revise your PR. To run   pre-commit checks locally (before creating the PR):</p> <pre><code>make precommit-check\n</code></pre> <p>This may also revise your code formatting. Re-run <code>make precommit-check</code> to ensure this is the case.</p> </li> </ul>"},{"location":"developers/#build-pyscript","title":"Build PyScript","text":"<ul> <li> <p>To turn the JavaScript source code found in the <code>pyscript.core</code> directory   into a bundled up module ready for the browser, type:</p> <pre><code>make build\n</code></pre> <p>The resulting assets will be in the <code>pyscript.core/dist</code> directory.</p> </li> </ul>"},{"location":"developers/#run-the-tests","title":"Run the tests","text":"<ul> <li> <p>The integration tests for PyScript are started with:</p> <pre><code>make test\n</code></pre> <p>(This essentially runs the <code>npm run test:integration</code> command in the right place. This is defined in PyScript's <code>package.json</code> file.)</p> <p>Tests are found in the <code>core/tests</code> directory. These are organised into three locations:</p> <ol> <li><code>python</code> - the Python based test suite to exercise Python code    within PyScript.</li> <li><code>javascript</code> - JavaScript tests to exercise PyScript itself, in the    browser.</li> <li><code>manual</code> - containing tests to run manually in a browser, due to the    complex nature of the tests.</li> </ol> <p>We use Playwright to automate the running of the Python and JavaScript test suites. We use uPyTest as a test framework for the Python test suite. uPyTest is a \"PyTest inspired\" framework for running tests in the browser on both MicroPython and Pyodide.</p> <p>The automated (Playwright) tests are specified in the <code>tests/integration.spec.js</code> file.</p> </li> </ul>"},{"location":"developers/#documentation","title":"Documentation","text":"<ul> <li> <p>Documentation for PyScript (i.e. what you're reading right now), is found   in a separate repository:   https://github.com/pyscript/docs</p> </li> <li> <p>The documentation's <code>README</code> file contains instructions for setting up a   development environment and contributing.</p> </li> </ul>"},{"location":"developers/#contributing","title":"Contributing","text":"<ul> <li> <p>We have suggestions for how to contribute to PyScript. Take   a read and dive in.</p> </li> <li> <p>Please make sure you discuss potential contributions before you put in   work. We don#t want folks to waste their time or re-invent the wheel.</p> </li> <li> <p>Technical discussions happen on our discord server   and in the   discussions section of   our GitHub repository.</p> </li> <li> <p>Every two weeks on a Tuesday is a technical community video call,   the details of which are posted onto   the discord server. Face to face technical discussions happen here.</p> </li> <li> <p>On the first Thursday of every month is a   PyScript FUN call,   the details of which   are also posted to discord. Project show-and-tells, cool hacks, new features   and a generally humorous and creative time is had by all.</p> </li> </ul>"},{"location":"faq/","title":"Frequently Asked Questions","text":"<p>This page addresses common questions and troubleshooting scenarios encountered by the PyScript community on Discord, in community calls, and through general usage.</p> <p>The FAQ covers two main areas: common errors and helpful hints.</p>"},{"location":"faq/#common-errors","title":"Common errors","text":""},{"location":"faq/#reading-error-messages","title":"Reading error messages","text":"<p>When your application doesn't run and you see no error messages on the page, check your browser's console.</p> <p>The last line of an error message usually reveals the problem:</p> <pre><code>Traceback (most recent call last):\n  File \"/lib/python311.zip/_pyodide/_base.py\", line 501, in eval_code\n    .run(globals, locals)\n     ^^^^^^^^^^^^^^^^^^^^\n  File \"/lib/python311.zip/_pyodide/_base.py\", line 339, in run\n    coroutine = eval(self.code, globals, locals)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"&lt;exec&gt;\", line 1, in &lt;module&gt;\nNameError: name 'failure' is not defined\n</code></pre> <pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nNameError: name 'failure' isn't defined\n</code></pre> <p>Both examples show a <code>NameError</code> because the name <code>failure</code> doesn't exist. Everything above the error message provides potentially useful technical detail for debugging.</p> <p>These are the most common errors PyScript users encounter.</p>"},{"location":"faq/#sharedarraybuffer","title":"SharedArrayBuffer","text":"<p>This is the most common error new PyScript users face:</p> <p>Failure</p> <p>Your application doesn't run and your browser console shows:</p> <pre><code>Unable to use `window` or `document` -&gt; https://docs.pyscript.net/latest/faq/#sharedarraybuffer\n</code></pre>"},{"location":"faq/#when","title":"When","text":"<p>This error occurs when code running in a worker tries to access <code>window</code> or <code>document</code> objects that exist on the main thread.</p> <p>The error indicates either your web server is incorrectly configured or a <code>service-worker</code> attribute is missing from your script element.</p> <p>Specifically, one of three situations applies:</p> <p>Your web server configuration prevents the browser from enabling Atomics (a technology for cross-thread communication). When your script element has a <code>worker</code> attribute and your Python code uses <code>window</code> or <code>document</code> objects that exist on the main thread, this browser limitation causes failure unless you reconfigure your server.</p> <p>You're using <code>&lt;script type=\"py-editor\"&gt;</code> (which always runs in a worker) without providing a fallback via a <code>service-worker</code> attribute on that element.</p> <p>You've explicitly created a <code>PyWorker</code> or <code>MPWorker</code> instance somewhere in your code without providing a <code>service_worker</code> fallback.</p> <p>The workers guide documents all these cases with code examples and solutions.</p>"},{"location":"faq/#why","title":"Why","text":"<p>For <code>document.getElementById('some-id').value</code> to work in a worker, JavaScript requires two primitives:</p> <p>SharedArrayBuffer allows multiple threads to read and write shared memory.</p> <p>Atomics provides <code>wait(sab, index)</code> and <code>notify(sab, index)</code> to coordinate threads, where <code>sab</code> is a SharedArrayBuffer.</p> <p>Whilst a worker waits for a main thread operation, it doesn't consume CPU. It idles until the referenced buffer index changes, effectively never blocking the main thread whilst pausing its own execution.</p> <p>These primitives make worker-main thread communication seamless for developers. We encourage using workers over running Python on the main thread, especially with Pyodide, because workers keep the user interface responsive during heavy computation.</p> <p>Unfortunately, we cannot patch or work around these primitives - they're defined by web standards. However, various solutions exist for working within these limitations. The workers guide explains how.</p>"},{"location":"faq/#borrowed-proxy","title":"Borrowed proxy","text":"<p>This common error occurs with event listeners, timers, or anywhere JavaScript lazily invokes a Python callback:</p> <p>Failure</p> <p>Your browser console shows:</p> <pre><code>Uncaught Error: This borrowed proxy was automatically destroyed at the end of a function call.\nTry using create_proxy or create_once_callable.\nFor more information about the cause of this error, use `pyodide.setDebug(true)`\n</code></pre>"},{"location":"faq/#when_1","title":"When","text":"<p>This error happens when using Pyodide on the main thread and passing a bare Python function as a JavaScript callback:</p> <pre><code>import js\n# This throws the error.\njs.setTimeout(lambda msg: print(msg), 1000, \"FAIL\")\n</code></pre> <p>The garbage collector immediately cleans up the Python function after passing it to JavaScript. For the function to work as a future callback, it must not be garbage collected - hence the error.</p> <p>Info</p> <p>This error doesn't occur when code executes in a worker and the JavaScript reference comes from the main thread:</p> <pre><code>from pyscript import window\n# This works fine in a worker.\nwindow.setTimeout(lambda x: print(x), 1000, \"OK\")\n</code></pre> <p>Proxy objects cannot be communicated between a worker and the main thread. Behind the scenes, PyScript ensures references are maintained between workers and the main thread. Worker-based Python functions appear as JavaScript proxy objects on the main thread, avoiding the borrowed proxy problem.</p> <p>Two solutions exist:</p> <p>Manually wrap functions with <code>pyscript.ffi.create_proxy</code>:</p> <pre><code>from pyscript import ffi, window\nwindow.setTimeout(\nffi.create_proxy(print),\n100,\n\"print\"\n)\n</code></pre> <p>Or set <code>experimental_create_proxy = \"auto\"</code> in your configuration. This intercepts Python objects passed to JavaScript callbacks and manages memory automatically via JavaScript's garbage collector.</p> <p>Note</p> <p>FinalizationRegistry enables automatic memory management. It's not observable and you cannot predict when it frees proxy objects. Memory consumption might be slightly higher than manual <code>create_proxy</code>, but JavaScript's engine manages memory efficiently and frees retained proxies when memory pressure increases.</p>"},{"location":"faq/#why_1","title":"Why","text":"<p>Pyodide and MicroPython both have garbage collectors for automatic memory management. When Python object references pass to JavaScript via the FFI, Python interpreters cannot guarantee JavaScript's garbage collector will free them. They may lose control since there's no reliable way to know when JavaScript no longer needs the objects.</p> <p>One solution expects users to explicitly create and destroy proxy objects. But manual memory management defeats automatic collection and risks dead references - destroying Python objects still active in JavaScript. This creates difficulty.</p> <p>Pyodide provides ffi.wrappers for common cases. PyScript's <code>experimental_create_proxy = \"auto\"</code> configuration automates memory management via <code>FinalizationRegistry</code>.</p>"},{"location":"faq/#python-packages","title":"Python packages","text":"<p>Sometimes Python packages specified via <code>packages</code> configuration don't work with PyScript's interpreters.</p> <p>Failure</p> <p>Using Pyodide: Your browser console shows:</p> <pre><code>ValueError: Can't find a pure Python 3 wheel for: 'package_name'\n</code></pre> <p>Failure</p> <p>Using MicroPython: Your browser console shows:</p> <pre><code>Cross-Origin Request Blocked: The Same Origin Policy disallows reading the\nremote resource at https://micropython.org/pi/v2/package/py/package_name/latest.json.\n(Reason: CORS header 'Access-Control-Allow-Origin' missing).\nStatus code: 404.\n</code></pre>"},{"location":"faq/#when_2","title":"When","text":"<p>This is a complicated problem, but the summary is:</p> <p>First, check you've used the correct package name. This is a remarkably common mistake worth verifying first.</p> <p>In Pyodide, the error indicates the package contains code written in C, C++, or Rust. These compiled languages haven't been compiled for WebAssembly. The Pyodide project and Python Packaging Authority are working to make WebAssembly a default compilation target. Until then, follow Pyodide's guidance to overcome this limitation.</p> <p>In MicroPython, the package hasn't been ported to the <code>micropython-lib</code> repository. To use pure Python packages with MicroPython, use the files configuration to manually copy the package onto the filesystem, or reference it via URL.</p> <p>The packaging pointers section provides hints and tips about packaging with PyScript.</p>"},{"location":"faq/#why_2","title":"Why","text":"<p>Pyodide and MicroPython are different Python interpreters running in WebAssembly. Packages built for Pyodide may not work for MicroPython, and vice versa. Furthermore, packages containing compiled code may not have been compiled for WebAssembly.</p> <p>If a package is written in Python that both interpreters support (subtle differences exist between them), you should be able to use it by getting it into the Python path via configuration.</p> <p>Currently, MicroPython cannot expose modules requiring native compilation, but PyScript is working with the MicroPython team to provide builds including commonly requested packages (like MicroPython's versions of <code>numpy</code> or <code>sqlite</code>).</p> <p>Warning</p> <p>Depending on complexity, seamlessly porting from Pyodide to MicroPython may be difficult. MicroPython has comprehensive documentation explaining differences from \"regular\" CPython (the version Pyodide provides).</p>"},{"location":"faq/#javascript-modules","title":"JavaScript modules","text":"<p>When using JavaScript modules you may encounter these errors:</p> <p>Failure</p> <p>Uncaught SyntaxError: The requested module './library.js' does not provide an export named 'default'</p> <p>Failure</p> <p>Uncaught SyntaxError: The requested module './library.js' does not provide an export named 'util'</p>"},{"location":"faq/#when_3","title":"When","text":"<p>These errors occur because the JavaScript module isn't written as a standards-compliant JavaScript module.</p> <p>To solve this, various content delivery networks provide automatic conversion to standard ESM (ECMAScript Modules). We recommend esm.run:</p> <pre><code>&lt;mpy-config&gt;\n[js_modules.main]\n\"https://esm.run/d3\" = \"d3\"\n&lt;/mpy-config&gt;\n&lt;script type=\"mpy\"&gt;\nfrom pyscript.js_modules import d3\n&lt;/script&gt;\n</code></pre> <p>Alternatively, ensure referenced JavaScript code uses <code>export</code> or request an <code>.mjs</code> version. The user guide covers all options and technical considerations for using JavaScript modules.</p>"},{"location":"faq/#why_3","title":"Why","text":"<p>Although the JavaScript module standard has existed since 2015, many libraries still produce files incompatible with modern standards.</p> <p>This reflects the JavaScript ecosystem's evolution rather than a technical limitation. Developers are learning the new standard and migrating legacy code from obsolete patterns.</p> <p>While legacy code exists, JavaScript may require special handling.</p>"},{"location":"faq/#possible-deadlock","title":"Possible deadlock","text":"<p>This error message indicates a serious problem:</p> <p>Failure</p> <pre><code>\ud83d\udc80\ud83d\udd12 - Possible deadlock if proxy.xyz(...args) is awaited\n</code></pre>"},{"location":"faq/#when_4","title":"When","text":"<p>This error occurs when code on a worker and the main thread are in deadlock. Neither fragment can proceed without waiting for the other.</p>"},{"location":"faq/#why_4","title":"Why","text":"<p>Consider this worker code:</p> <pre><code>from pyscript import sync\nsync.worker_task = lambda: print('\ud83d\udd25 this is fine \ud83d\udd25')\n# Deadlock occurs here. \ud83d\udc80\ud83d\udd12\nsync.main_task()\n</code></pre> <p>And this main thread code:</p> <pre><code>&lt;script type=\"mpy\"&gt;\nfrom pyscript import PyWorker\nasync def main_task():\n# Deadlock occurs here. \ud83d\udc80\ud83d\udd12\nawait pw.sync.worker_task()\npw = PyWorker(\"./worker.py\", {\"type\": \"pyodide\"})\npw.sync.main_task = main_task\n&lt;/script&gt;\n</code></pre> <p>The main thread calls <code>main_task()</code>, which awaits <code>worker_task()</code> on the worker. But <code>worker_task()</code> can only execute after <code>main_task()</code> completes. Neither can proceed - classic deadlock.</p> <p>PyScript detects this situation and raises the error to prevent your application from freezing.</p>"},{"location":"faq/#solution","title":"Solution","text":"<p>Restructure your code to avoid circular dependencies between main thread and worker. One thread should complete its work before the other begins, or they should work independently without waiting for each other.</p>"},{"location":"faq/#typeerror-cryptorandomuuid-is-not-a-function","title":"TypeError: crypto.randomUUID is not a function","text":"<p>This error appears in specific browser environments:</p> <p>Failure</p> <pre><code>TypeError: crypto.randomUUID is not a function\n</code></pre>"},{"location":"faq/#when_5","title":"When","text":"<p>This occurs when using PyScript in environments where the <code>crypto.randomUUID</code> API isn't available. This typically happens in:</p> <p>Older browsers not supporting this API.</p> <p>Non-secure contexts (HTTP instead of HTTPS). The <code>crypto.randomUUID</code> function requires a secure context.</p> <p>Certain embedded browser environments or WebViews with restricted APIs.</p>"},{"location":"faq/#solution_1","title":"Solution","text":"<p>Use HTTPS for your application. The <code>crypto</code> API requires secure contexts.</p> <p>Update to modern browsers supporting the full Web Crypto API.</p> <p>If working in a restricted environment, you may need to polyfill <code>crypto.randomUUID</code> or use an alternative approach for generating unique identifiers.</p>"},{"location":"faq/#helpful-hints","title":"Helpful hints","text":"<p>This section provides guidance on common scenarios and best practices.</p>"},{"location":"faq/#pyscript-latest","title":"PyScript <code>latest</code>","text":"<p>When including PyScript in your HTML, you can reference specific versions or use <code>latest</code>:</p> <pre><code>&lt;!-- Specific version (recommended for production). --&gt;\n&lt;script type=\"module\" src=\"https://pyscript.net/releases/2026.1.1/core.js\"&gt;&lt;/script&gt;\n&lt;!-- Latest version (useful for development). --&gt;\n&lt;script type=\"module\" src=\"https://pyscript.net/latest/core.js\"&gt;&lt;/script&gt;\n</code></pre>"},{"location":"faq/#production-vs-development","title":"Production vs development","text":"<p>For production applications, always use specific version numbers. This ensures your application continues working even when new PyScript versions are released. Updates happen on your schedule, not automatically.</p> <p>For development and experimentation, <code>latest</code> provides convenient access to new features without updating version numbers.</p>"},{"location":"faq/#version-compatibility","title":"Version compatibility","text":"<p>When reporting bugs or asking questions, always mention which PyScript version you're using. Different versions may behave differently, and version information helps diagnose problems.</p> <p>Check the releases page to see available versions and their release notes.</p>"},{"location":"faq/#workers-via-javascript","title":"Workers via JavaScript","text":"<p>You can create workers programmatically from JavaScript:</p> <pre><code>&lt;script type=\"module\"&gt;\nimport { PyWorker } from \"https://pyscript.net/releases/2026.1.1/core.js\";\nconst worker = new PyWorker(\"./worker.py\", {type: \"pyodide\"});\n// Call Python functions from JavaScript.\nawait worker.sync.python_function();\n&lt;/script&gt;\n</code></pre> <p>This approach is useful when:</p> <p>You're building primarily JavaScript applications that need Python functionality.</p> <p>You want dynamic worker creation based on runtime conditions.</p> <p>You're integrating PyScript into existing JavaScript frameworks.</p> <p>The worker runs Python code in a separate thread, keeping your main thread responsive. Use <code>worker.sync</code> to call Python functions from JavaScript, and vice versa through <code>pyscript.window</code>.</p>"},{"location":"faq/#javascript-classnew","title":"JavaScript <code>Class.new()</code>","text":"<p>When creating JavaScript class instances from Python, use the <code>.new()</code> method:</p> <pre><code>from pyscript import window\n# Create a new Date instance.\ndate = window.Date.new()\n# Create other class instances.\nmap_instance = window.Map.new()\nset_instance = window.Set.new()\n</code></pre> <p>This pattern exists because Python's <code>Date()</code> would attempt to call the JavaScript class as a function rather than constructing an instance.</p> <p>The <code>.new()</code> method explicitly invokes JavaScript's <code>new</code> operator, ensuring proper class instantiation.</p>"},{"location":"faq/#pyscript-events","title":"PyScript events","text":"<p>PyScript dispatches custom events throughout the application lifecycle. You can listen for these events to coordinate behaviour:</p> <pre><code>&lt;script type=\"module\"&gt;\ndocument.addEventListener('py:ready', (event) =&gt; {\nconsole.log('Python interpreter ready');\nconsole.log('Script:', event.detail.script);\n});\ndocument.addEventListener('py:done', (event) =&gt; {\nconsole.log('All scripts finished');\n});\ndocument.addEventListener('mpy:ready', (event) =&gt; {\nconsole.log('MicroPython interpreter ready');\n});\n&lt;/script&gt;\n</code></pre>"},{"location":"faq/#available-events","title":"Available events","text":"<p><code>py:ready</code> - Pyodide interpreter is ready and about to run code.</p> <p><code>mpy:ready</code> - MicroPython interpreter is ready and about to run code.</p> <p><code>py:done</code> - All Pyodide scripts have finished executing.</p> <p><code>mpy:done</code> - All MicroPython scripts have finished executing.</p> <p><code>py:all-done</code> - All PyScript activity has completed.</p>"},{"location":"faq/#event-details","title":"Event details","text":"<p>Events carry useful information in their <code>detail</code> property:</p> <pre><code>document.addEventListener('py:ready', (event) =&gt; {\n// Access the script element.\nconst script = event.detail.script;\n// Access the interpreter wrapper.\nconst wrap = event.detail.wrap;\n});\n</code></pre> <p>Use these events to:</p> <p>Show loading indicators whilst Python initialises.</p> <p>Coordinate between JavaScript and Python code.</p> <p>Enable UI elements only after Python is ready.</p> <p>Track application lifecycle for debugging or analytics.</p>"},{"location":"faq/#packaging-pointers","title":"Packaging pointers","text":"<p>Understanding packaging helps you use external Python libraries effectively.</p>"},{"location":"faq/#pyodide-packages","title":"Pyodide packages","text":"<p>Pyodide includes many pre-built packages. Check the package list to see what's available.</p> <p>Install pure Python packages from PyPI using <code>micropip</code>:</p> <pre><code>import micropip\nawait micropip.install(\"pillow\")\n</code></pre> <p>Some packages with C extensions are available. If <code>micropip</code> reports it cannot find a pure Python wheel, the package either:</p> <p>Contains C extensions not compiled for WebAssembly.</p> <p>Isn't compatible with the browser environment.</p> <p>Has dependencies that aren't available.</p>"},{"location":"faq/#micropython-packages","title":"MicroPython packages","text":"<p>MicroPython uses packages from micropython-lib. Reference them in configuration:</p> <pre><code>[packages]\n\"unittest\" = \"\"\n</code></pre> <p>For packages not in micropython-lib, use the <code>files</code> configuration to include them:</p> <pre><code>[files]\n\"my_package.py\" = \"https://example.com/my_package.py\"\n</code></pre> <p>Or reference local files:</p> <pre><code>[files]\n\"my_package.py\" = \"./my_package.py\"\n</code></pre>"},{"location":"faq/#package-size-considerations","title":"Package size considerations","text":"<p>Pyodide packages can be large. The <code>numpy</code> package alone is several megabytes. Consider:</p> <p>Using MicroPython for applications where package access isn't critical.</p> <p>Loading only necessary packages.</p> <p>Showing loading indicators whilst packages download.</p> <p>Caching packages for offline use in production applications.</p>"},{"location":"faq/#filesystem","title":"Filesystem","text":"<p>PyScript provides virtual filesystems through Emscripten. Understanding how they work helps you manage files effectively.</p>"},{"location":"faq/#virtual-filesystem-basics","title":"Virtual filesystem basics","text":"<p>Both Pyodide and MicroPython run in sandboxed environments with virtual filesystems. These aren't the user's actual filesystem - they're in-memory or browser-storage-backed filesystems provided by Emscripten.</p> <p>Files you create or modify exist only in this virtual environment. They persist during the session but may not survive page reloads unless explicitly saved to browser storage.</p>"},{"location":"faq/#loading-files","title":"Loading files","text":"<p>Use the <code>files</code> configuration to make files available:</p> <pre><code>[files]\n\"data.csv\" = \"./data.csv\"\n\"config.json\" = \"https://example.com/config.json\"\n</code></pre> <p>PyScript downloads these files and places them in the virtual filesystem. Your Python code can then open them normally:</p> <pre><code>with open(\"data.csv\") as f:\ndata = f.read()\n</code></pre> <p>It's also possible to manually upload files onto the virtual file system from the browser (<code>&lt;input type=\"file\"&gt;</code>), using the DOM API.</p> <p>The following fragment is just one way to achieve this:</p> <pre><code># Assume an input element of type \"file\" with an id of \"upload\" in\n# the DOM.\n# E.g. &lt;input type=\"file\" id=\"upload\"&gt;\nfrom pyscript import when, fetch, window\n@when(\"change\", \"#upload\")\nasync def on_change(event):\n\"\"\"\n    Activated when the user has selected a file to upload via\n    the file input element.\n    \"\"\"\n# For each file the user has selected to upload...\nfor file in input.files:\n# Create a temporary URL.\ntmp = window.URL.createObjectURL(file)\n# Fetch and save its content somewhere.\nwith open(f\"./{file.name}\", \"wb\") as dest:\ndest.write(await fetch(tmp).bytearray())\n# Then revoke the tmp URL.\nwindow.URL.revokeObjectURL(tmp)\n</code></pre>"},{"location":"faq/#writing-files","title":"Writing files","text":"<p>You can create and write files in the virtual filesystem:</p> <pre><code>with open(\"output.txt\", \"w\") as f:\nf.write(\"Hello, world!\")\n</code></pre> <p>These files exist in memory. To provide them for download, use the browser's download mechanism:</p> <pre><code>from pyscript import window, ffi\ndef download_file(filename, content):\n\"\"\"\n    Trigger browser download of file content.\n    \"\"\"\n# Ensure you use the correct mime-type!\nblob = window.Blob.new([content], ffi.to_js({\"type\": \"text/plain\"}))\n# Create a temporary download link/URL.\nurl = window.URL.createObjectURL(blob)\nlink = window.document.createElement(\"a\")\nlink.href = url\nlink.download = filename\n# Activate the link (pretend to click it).\nlink.click()\n# Then revoke the temporary URL.\nwindow.URL.revokeObjectURL(url)\n# Use it.\ndownload_file(\"output.txt\", \"File contents here\")\n</code></pre>"},{"location":"faq/#browser-storage","title":"Browser storage","text":"<p>For persistent storage across sessions, use browser storage APIs:</p> <pre><code>from pyscript import window\n# Save data to localStorage.\nwindow.localStorage.setItem(\"key\", \"value\")\n# Retrieve data.\nvalue = window.localStorage.getItem(\"key\")\n</code></pre> <p>Or use the File System Access API for actual file access (requires user permission):</p> <pre><code>from pyscript import window\n# Request file picker (modern browsers only).\nfile_handle = await window.showSaveFilePicker()\nwritable = await file_handle.createWritable()\nawait writable.write(\"content\")\nawait writable.close()\n</code></pre>"},{"location":"faq/#create_proxy","title":"create_proxy","text":"<p>The <code>create_proxy</code> function manages Python-JavaScript reference lifecycles.</p>"},{"location":"faq/#when-to-use-create_proxy","title":"When to use create_proxy","text":"<p>In Pyodide on the main thread, wrap Python functions passed as JavaScript callbacks:</p> <pre><code>from pyscript import ffi, window\ndef callback(event):\n\"\"\"\n    Handle events.\n    \"\"\"\nprint(event.type)\n# Create proxy before passing to JavaScript.\nwindow.addEventListener(\"click\", ffi.create_proxy(callback))\n</code></pre>"},{"location":"faq/#when-create_proxy-isnt-needed","title":"When create_proxy isn't needed","text":"<p>In workers, PyScript automatically manages references. You don't need <code>create_proxy</code>:</p> <pre><code>from pyscript import window\ndef callback(event):\n\"\"\"\n    Handle events in worker.\n    \"\"\"\nprint(event.type)\n# No create_proxy needed in workers.\nwindow.addEventListener(\"click\", callback)\n</code></pre> <p>With <code>experimental_create_proxy = \"auto\"</code> in configuration, PyScript automatically wraps functions:</p> <pre><code>[experimental_create_proxy]\nauto = true\n</code></pre> <pre><code>from pyscript import window\ndef callback(event):\n\"\"\"\n    Handle events with auto proxying.\n    \"\"\"\nprint(event.type)\n# No create_proxy needed with auto mode.\nwindow.addEventListener(\"click\", callback)\n</code></pre>"},{"location":"faq/#in-micropython","title":"In MicroPython","text":"<p>MicroPython creates proxies automatically. The <code>create_proxy</code> function exists for code portability between Pyodide and MicroPython, but it's just a pass-through in MicroPython:</p> <pre><code>from pyscript import ffi, window\ndef callback(event):\n\"\"\"\n    Handle events.\n    \"\"\"\nprint(event.type)\n# Works with or without create_proxy in MicroPython.\nwindow.addEventListener(\"click\", callback)\nwindow.addEventListener(\"click\", ffi.create_proxy(callback))\n</code></pre> <p>Both versions work identically in MicroPython.</p>"},{"location":"faq/#manual-proxy-destruction","title":"Manual proxy destruction","text":"<p>If manually managing proxies in Pyodide, destroy them when done:</p> <pre><code>from pyscript import ffi, window\ndef callback(event):\n\"\"\"\n    One-time handler.\n    \"\"\"\nprint(event.type)\nproxy = ffi.create_proxy(callback)\nwindow.addEventListener(\"click\", proxy, ffi.to_js({\"once\": True}))\n# After the event fires once, destroy the proxy.\n# (In practice, the \"once\" option auto-removes it, but this shows the\n# pattern for cases where you manage lifecycle manually.)\nproxy.destroy()\n</code></pre> <p>Manual destruction prevents memory leaks when callbacks are no longer needed.</p>"},{"location":"faq/#to_js","title":"to_js","text":"<p>The <code>to_js</code> function converts Python objects to JavaScript equivalents.</p>"},{"location":"faq/#python-dicts-to-javascript-objects","title":"Python dicts to JavaScript objects","text":"<p>Python dictionaries convert to JavaScript object literals, not Maps:</p> <pre><code>from pyscript import ffi, window\nconfig = {\"async\": False, \"cache\": True}\n# Converts to JavaScript object literal.\njs_config = ffi.to_js(config)\n# Pass to JavaScript APIs expecting objects.\nwindow.someAPI(js_config)\n</code></pre> <p>This differs from Pyodide's default behaviour (which creates Maps). PyScript's <code>to_js</code> always creates object literals for better JavaScript compatibility.</p>"},{"location":"faq/#when-to-use-to_js","title":"When to use to_js","text":"<p>Use <code>to_js</code> when passing Python data structures to JavaScript APIs:</p> <pre><code>from pyscript import ffi, window\n# Passing configuration objects.\noptions = {\"method\": \"POST\", \"headers\": {\"Content-Type\": \"application/json\"}}\nwindow.fetch(\"/api\", ffi.to_js(options))\n# Passing arrays.\nnumbers = [1, 2, 3, 4, 5]\nwindow.console.log(ffi.to_js(numbers))\n# Passing nested structures.\ndata = {\"users\": [{\"name\": \"Alice\"}, {\"name\": \"Bob\"}]}\nwindow.processData(ffi.to_js(data))\n</code></pre>"},{"location":"faq/#important-caveat","title":"Important caveat","text":"<p>Warning</p> <p>Objects created by <code>to_js</code> are detached from the original Python object. Changes to the JavaScript object don't affect the Python object:</p> <pre><code>from pyscript import ffi, window\npython_dict = {\"key\": \"value\"}\njs_object = ffi.to_js(python_dict)\n# Modify JavaScript object.\njs_object.key = \"new value\"\n# Python dict unchanged.\nprint(python_dict[\"key\"])  # Still \"value\"\n</code></pre> <p>This detachment is usually desirable - you're passing data to JavaScript, not sharing mutable state. But be aware of this behaviour.</p>"},{"location":"faq/#micropython-differences","title":"MicroPython differences","text":"<p>MicroPython's <code>to_js</code> already creates object literals by default. You may not need <code>to_js</code> in MicroPython unless ensuring cross-interpreter compatibility:</p> <pre><code>from pyscript import window\n# Works in MicroPython without to_js.\nconfig = {\"async\": False}\nwindow.someAPI(config)\n# But using to_js ensures Pyodide compatibility.\nfrom pyscript import ffi\nwindow.someAPI(ffi.to_js(config))\n</code></pre> <p>For code that might run with either interpreter, use <code>to_js</code> consistently.</p>"},{"location":"license/","title":"Apache License","text":"<p>Version 2.0, January 2004 &lt;http://www.apache.org/licenses/&gt;</p>"},{"location":"license/#terms-and-conditions-for-use-reproduction-and-distribution","title":"Terms and Conditions for use, reproduction, and distribution","text":""},{"location":"license/#1-definitions","title":"1. Definitions","text":"<p>\u201cLicense\u201d shall mean the terms and conditions for use, reproduction, and distribution as defined by Sections 1 through 9 of this document.</p> <p>\u201cLicensor\u201d shall mean the copyright owner or entity authorized by the copyright owner that is granting the License.</p> <p>\u201cLegal Entity\u201d shall mean the union of the acting entity and all other entities that control, are controlled by, or are under common control with that entity. For the purposes of this definition, \u201ccontrol\u201d means (i) the power, direct or indirect, to cause the direction or management of such entity, whether by contract or otherwise, or (ii) ownership of fifty percent (50%) or more of the outstanding shares, or (iii) beneficial ownership of such entity.</p> <p>\u201cYou\u201d (or \u201cYour\u201d) shall mean an individual or Legal Entity exercising permissions granted by this License.</p> <p>\u201cSource\u201d form shall mean the preferred form for making modifications, including but not limited to software source code, documentation source, and configuration files.</p> <p>\u201cObject\u201d form shall mean any form resulting from mechanical transformation or translation of a Source form, including but not limited to compiled object code, generated documentation, and conversions to other media types.</p> <p>\u201cWork\u201d shall mean the work of authorship, whether in Source or Object form, made available under the License, as indicated by a copyright notice that is included in or attached to the work (an example is provided in the Appendix below).</p> <p>\u201cDerivative Works\u201d shall mean any work, whether in Source or Object form, that is based on (or derived from) the Work and for which the editorial revisions, annotations, elaborations, or other modifications represent, as a whole, an original work of authorship. For the purposes of this License, Derivative Works shall not include works that remain separable from, or merely link (or bind by name) to the interfaces of, the Work and Derivative Works thereof.</p> <p>\u201cContribution\u201d shall mean any work of authorship, including the original version of the Work and any modifications or additions to that Work or Derivative Works thereof, that is intentionally submitted to Licensor for inclusion in the Work by the copyright owner or by an individual or Legal Entity authorized to submit on behalf of the copyright owner. For the purposes of this definition, \u201csubmitted\u201d means any form of electronic, verbal, or written communication sent to the Licensor or its representatives, including but not limited to communication on electronic mailing lists, source code control systems, and issue tracking systems that are managed by, or on behalf of, the Licensor for the purpose of discussing and improving the Work, but excluding communication that is conspicuously marked or otherwise designated in writing by the copyright owner as \u201cNot a Contribution.\u201d</p> <p>\u201cContributor\u201d shall mean Licensor and any individual or Legal Entity on behalf of whom a Contribution has been received by Licensor and subsequently incorporated within the Work.</p>"},{"location":"license/#2-grant-of-copyright-license","title":"2. Grant of Copyright License","text":"<p>Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare Derivative Works of, publicly display, publicly perform, sublicense, and distribute the Work and such Derivative Works in Source or Object form.</p>"},{"location":"license/#3-grant-of-patent-license","title":"3. Grant of Patent License","text":"<p>Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable (except as stated in this section) patent license to make, have made, use, offer to sell, sell, import, and otherwise transfer the Work, where such license applies only to those patent claims licensable by such Contributor that are necessarily infringed by their Contribution(s) alone or by combination of their Contribution(s) with the Work to which such Contribution(s) was submitted. If You institute patent litigation against any entity (including a cross-claim or counterclaim in a lawsuit) alleging that the Work or a Contribution incorporated within the Work constitutes direct or contributory patent infringement, then any patent licenses granted to You under this License for that Work shall terminate as of the date such litigation is filed.</p>"},{"location":"license/#4-redistribution","title":"4. Redistribution","text":"<p>You may reproduce and distribute copies of the Work or Derivative Works thereof in any medium, with or without modifications, and in Source or Object form, provided that You meet the following conditions:</p> <ul> <li>(a) You must give any other recipients of the Work or Derivative Works a copy of this License; and</li> <li>(b) You must cause any modified files to carry prominent notices stating that You changed the files; and</li> <li>(c) You must retain, in the Source form of any Derivative Works that You distribute, all copyright, patent, trademark, and attribution notices from the Source form of the Work, excluding those notices that do not pertain to any part of the Derivative Works; and</li> <li>(d) If the Work includes a \u201cNOTICE\u201d text file as part of its distribution, then any Derivative Works that You distribute must include a readable copy of the attribution notices contained within such NOTICE file, excluding those notices that do not pertain to any part of the Derivative Works, in at least one of the following places: within a NOTICE text file distributed as part of the Derivative Works; within the Source form or documentation, if provided along with the Derivative Works; or, within a display generated by the Derivative Works, if and wherever such third-party notices normally appear. The contents of the NOTICE file are for informational purposes only and do not modify the License. You may add Your own attribution notices within Derivative Works that You distribute, alongside or as an addendum to the NOTICE text from the Work, provided that such additional attribution notices cannot be construed as modifying the License.</li> </ul> <p>You may add Your own copyright statement to Your modifications and may provide additional or different license terms and conditions for use, reproduction, or distribution of Your modifications, or for any such Derivative Works as a whole, provided Your use, reproduction, and distribution of the Work otherwise complies with the conditions stated in this License.</p>"},{"location":"license/#5-submission-of-contributions","title":"5. Submission of Contributions","text":"<p>Unless You explicitly state otherwise, any Contribution intentionally submitted for inclusion in the Work by You to the Licensor shall be under the terms and conditions of this License, without any additional terms or conditions. Notwithstanding the above, nothing herein shall supersede or modify the terms of any separate license agreement you may have executed with Licensor regarding such Contributions.</p>"},{"location":"license/#6-trademarks","title":"6. Trademarks","text":"<p>This License does not grant permission to use the trade names, trademarks, service marks, or product names of the Licensor, except as required for reasonable and customary use in describing the origin of the Work and reproducing the content of the NOTICE file.</p>"},{"location":"license/#7-disclaimer-of-warranty","title":"7. Disclaimer of Warranty","text":"<p>Unless required by applicable law or agreed to in writing, Licensor provides the Work (and each Contributor provides its Contributions) on an \u201cAS IS\u201d BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. You are solely responsible for determining the appropriateness of using or redistributing the Work and assume any risks associated with Your exercise of permissions under this License.</p>"},{"location":"license/#8-limitation-of-liability","title":"8. Limitation of Liability","text":"<p>In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall any Contributor be liable to You for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising as a result of this License or out of the use or inability to use the Work (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if such Contributor has been advised of the possibility of such damages.</p>"},{"location":"license/#9-accepting-warranty-or-additional-liability","title":"9. Accepting Warranty or Additional Liability","text":"<p>While redistributing the Work or Derivative Works thereof, You may choose to offer, and charge a fee for, acceptance of support, warranty, indemnity, or other liability obligations and/or rights consistent with this License. However, in accepting such obligations, You may act only on Your own behalf and on Your sole responsibility, not on behalf of any other Contributor, and only if You agree to indemnify, defend, and hold each Contributor harmless for any liability incurred by, or claims asserted against, such Contributor by reason of your accepting any such warranty or additional liability.</p> <p>END OF TERMS AND CONDITIONS</p>"},{"location":"license/#appendix-how-to-apply-the-apache-license-to-your-work","title":"APPENDIX: How to apply the Apache License to your work","text":"<p>To apply the Apache License to your work, attach the following boilerplate notice, with the fields enclosed by brackets <code>[]</code> replaced with your own identifying information. (Don't include the brackets!) The text should be enclosed in the appropriate comment syntax for the file format. We also recommend that a file or class name and description of purpose be included on the same \u201cprinted page\u201d as the copyright notice for easier identification within third-party archives.</p> <pre><code>Copyright [yyyy] [name of copyright owner]\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n  http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n</code></pre>"},{"location":"api/context/","title":"<code>pyscript.context</code>","text":"<p>Execution context management for PyScript.</p> <p>This module handles the differences between running in the main browser thread versus running in a Web Worker, providing a consistent API regardless of the execution context.</p> <p>Key features:</p> <ul> <li>Detects whether code is running in a worker or main thread. Read this via   the boolean <code>pyscript.context.RUNNING_IN_WORKER</code>.</li> <li>Parses and normalizes configuration from <code>polyscript.config</code> and adds the   Python interpreter type via the <code>type</code> key in <code>pyscript.context.config</code>.</li> <li>Provides appropriate implementations of <code>window</code>, <code>document</code>, and <code>sync</code>.</li> <li>Sets up JavaScript module import system, including a lazy <code>js_import</code>   function.</li> <li>Manages <code>PyWorker</code> creation.</li> <li>Provides access to the current display target via   <code>pyscript.context.display_target</code>.</li> </ul> <p>Warning</p> <p>These are key differences between the main thread and worker contexts:</p> <p>Main thread context:</p> <ul> <li><code>window</code> and <code>document</code> are available directly.</li> <li><code>PyWorker</code> can be created to spawn worker threads.</li> <li><code>sync</code> is not available (raises <code>NotSupported</code>).</li> </ul> <p>Worker context:</p> <ul> <li><code>window</code> and <code>document</code> are proxied from main thread (if SharedArrayBuffer available).</li> <li><code>PyWorker</code> is not available (raises <code>NotSupported</code>).</li> <li><code>sync</code> utilities are available for main thread communication.</li> </ul>"},{"location":"api/context/#pyscript.context.RUNNING_IN_WORKER","title":"<code>RUNNING_IN_WORKER = not hasattr(js, 'document')</code>  <code>module-attribute</code>","text":"<p>Detect execution context: True if running in a worker, False if main thread.</p>"},{"location":"api/context/#pyscript.context.config","title":"<code>config = json.loads(js.JSON.stringify(_polyscript_config))</code>  <code>module-attribute</code>","text":"<p>Parsed and normalized configuration.</p>"},{"location":"api/context/#pyscript.context.sync","title":"<code>sync = None</code>  <code>module-attribute</code>","text":"<p>Sync utilities for worker-main thread communication (only in workers).</p>"},{"location":"api/context/#pyscript.context.window","title":"<code>window = polyscript.xworker.window</code>  <code>module-attribute</code>","text":"<p>The <code>window</code> object (proxied if in a worker).</p>"},{"location":"api/context/#pyscript.context.document","title":"<code>document = window.document</code>  <code>module-attribute</code>","text":"<p>The <code>document</code> object (proxied if in a worker).</p>"},{"location":"api/context/#pyscript.context.js_import","title":"<code>js_import = window.Function('return (...urls) =&gt; Promise.all(urls.map((url) =&gt; import(url)))')()</code>  <code>module-attribute</code>","text":"<p>Function to import JavaScript modules dynamically.</p>"},{"location":"api/context/#pyscript.context.PyWorker","title":"<code>PyWorker(url, **options)</code>","text":"<p>Create a Web Worker running Python code.</p> <p>This spawns a new worker thread that can execute Python code found at the <code>url</code>, independently of the main thread. The <code>**options</code> can be used to configure the worker.</p> <pre><code>from pyscript import PyWorker\n# Create a worker to run background tasks.\n# (`type` MUST be either `micropython` or `pyodide`)\nworker = PyWorker(\"./worker.py\", type=\"micropython\")\n</code></pre> <p>PyWorker can only be created from the main thread, not from within another worker.</p> Source code in <code>pyscript/context.py</code> <pre><code>def PyWorker(url, **options):\n\"\"\"\n    Create a Web Worker running Python code.\n    This spawns a new worker thread that can execute Python code\n    found at the `url`, independently of the main thread. The\n    `**options` can be used to configure the worker.\n    ```python\n    from pyscript import PyWorker\n    # Create a worker to run background tasks.\n    # (`type` MUST be either `micropython` or `pyodide`)\n    worker = PyWorker(\"./worker.py\", type=\"micropython\")\n    ```\n    PyWorker **can only be created from the main thread**, not from\n    within another worker.\n    \"\"\"\nreturn _PyWorker(url, to_js(options))\n</code></pre>"},{"location":"api/context/#pyscript.context.current_target","title":"<code>current_target()</code>","text":"<p>Get the current output target in main thread context.</p> Source code in <code>pyscript/context.py</code> <pre><code>def current_target():\n\"\"\"\n    Get the current output target in main thread context.\n    \"\"\"\nreturn _pyscript.target\n</code></pre>"},{"location":"api/display/","title":"<code>pyscript.display</code>","text":"<p>Display Pythonic content in the browser.</p> <p>This module provides the <code>display()</code> function for rendering Python objects in the web page. The function introspects objects to determine the appropriate MIME type and rendering method.</p> <p>Supported MIME types:</p> <ul> <li><code>text/plain</code>: Plain text (HTML-escaped)</li> <li><code>text/html</code>: HTML content</li> <li><code>image/png</code>: PNG images as data URLs</li> <li><code>image/jpeg</code>: JPEG images as data URLs</li> <li><code>image/svg+xml</code>: SVG graphics</li> <li><code>application/json</code>: JSON data</li> <li><code>application/javascript</code>: JavaScript code (discouraged)</li> </ul> <p>The <code>display()</code> function uses standard Python representation methods (<code>_repr_html_</code>, <code>_repr_png_</code>, etc.) to determine how to render objects. Objects can provide a <code>_repr_mimebundle_</code> method to specify preferred formats like this:</p> <pre><code>def _repr_mimebundle_(self):\nreturn {\n\"text/html\": \"&lt;b&gt;Bold HTML&lt;/b&gt;\",\n\"image/png\": \"&lt;base64-encoded-png-data&gt;\",\n}\n</code></pre> <p>Heavily inspired by IPython's rich display system.</p>"},{"location":"api/display/#pyscript.display.HTML","title":"<code>HTML</code>","text":"<p>Wrap a string to render as unescaped HTML in <code>display()</code>. This is necessary because plain strings are automatically HTML-escaped for safety:</p> <pre><code>from pyscript import HTML, display\ndisplay(HTML(\"&lt;h1&gt;Hello World&lt;/h1&gt;\"))\n</code></pre> <p>Inspired by <code>IPython.display.HTML</code>.</p> Source code in <code>pyscript/display.py</code> <pre><code>class HTML:\n\"\"\"\n    Wrap a string to render as unescaped HTML in `display()`. This is\n    necessary because plain strings are automatically HTML-escaped for safety:\n    ```python\n    from pyscript import HTML, display\n    display(HTML(\"&lt;h1&gt;Hello World&lt;/h1&gt;\"))\n    ```\n    Inspired by\n    [`IPython.display.HTML`](https://ipython.readthedocs.io/en/stable/api/generated/IPython.display.html#IPython.display.HTML).\n    \"\"\"\ndef __init__(self, html):\nself._html = html\ndef _repr_html_(self):\nreturn self._html\n</code></pre>"},{"location":"api/display/#pyscript.display.display","title":"<code>display(*values, target=None, append=True)</code>","text":"<p>Display Python objects in the web page.</p> <ul> <li><code>*values</code>: Python objects to display. Each object is introspected to   determine the appropriate rendering method.</li> <li><code>target</code>: DOM element ID where content should be displayed. If <code>None</code>   (default), uses the current script tag's designated output area. This   can start with '#' (which will be stripped for compatibility).</li> <li><code>append</code>: If <code>True</code> (default), add content to existing output. If   <code>False</code>, replace existing content before displaying.</li> </ul> <p>When used in a worker, <code>display()</code> requires an explicit <code>target</code> parameter to identify where content will be displayed. If used on the main thread, it automatically uses the current <code>&lt;script&gt;</code> tag as the target. If the script tag has a <code>target</code> attribute, that element will be used instead.</p> <p>A ValueError is raised if a valid target cannot be found for the current context.</p> <pre><code>from pyscript import display, HTML\n# Display raw HTML.\ndisplay(HTML(\"&lt;h1&gt;Hello, World!&lt;/h1&gt;\"))\n# Display in current script's output area.\ndisplay(\"Hello, World!\")\n# Display in a specific element.\ndisplay(\"Hello\", target=\"my-div\")\n# Replace existing content (note the `#`).\ndisplay(\"New content\", target=\"#my-div\", append=False)\n# Display multiple values in the default target.\ndisplay(\"First\", \"Second\", \"Third\")\n</code></pre> Source code in <code>pyscript/display.py</code> <pre><code>def display(*values, target=None, append=True):\n\"\"\"\n    Display Python objects in the web page.\n    * `*values`: Python objects to display. Each object is introspected to\n      determine the appropriate rendering method.\n    * `target`: DOM element ID where content should be displayed. If `None`\n      (default), uses the current script tag's designated output area. This\n      can start with '#' (which will be stripped for compatibility).\n    * `append`: If `True` (default), add content to existing output. If\n      `False`, replace existing content before displaying.\n    When used in a worker, `display()` requires an explicit `target` parameter\n    to identify where content will be displayed. If used on the main thread,\n    it automatically uses the current `&lt;script&gt;` tag as the target. If the\n    script tag has a `target` attribute, that element will be used instead.\n    A ValueError is raised if a valid target cannot be found for the current\n    context.\n    ```python\n    from pyscript import display, HTML\n    # Display raw HTML.\n    display(HTML(\"&lt;h1&gt;Hello, World!&lt;/h1&gt;\"))\n    # Display in current script's output area.\n    display(\"Hello, World!\")\n    # Display in a specific element.\n    display(\"Hello\", target=\"my-div\")\n    # Replace existing content (note the `#`).\n    display(\"New content\", target=\"#my-div\", append=False)\n    # Display multiple values in the default target.\n    display(\"First\", \"Second\", \"Third\")\n    ```\n    \"\"\"\nif isinstance(target, str):\n# There's a valid target.\ntarget = target[1:] if target.startswith(\"#\") else target\nelif is_none(target):\ntarget = current_target()\nelement = document.getElementById(target)\nif is_none(element):\nraise ValueError(f\"Cannot find element with id='{target}' in the page.\")\n# If possible, use a script tag's target attribute.\nif element.tagName == \"SCRIPT\" and hasattr(element, \"target\"):\nelement = element.target\n# Clear before displaying all values when not appending.\nif not append:\nelement.replaceChildren()\n# Add each value.\nfor value in values:\n_write_to_dom(element, value, append)\n</code></pre>"},{"location":"api/events/","title":"<code>pyscript.event</code>","text":"<p>Event handling for PyScript.</p> <p>This module provides two complementary systems:</p> <ol> <li> <p>The <code>Event</code> class: A simple publish-subscribe pattern for custom events    within your Python code.</p> </li> <li> <p>The <code>@when</code> decorator: Connects Python functions to browser DOM events,    or instances of the <code>Event</code> class, allowing you to respond to user    interactions like clicks, key presses and form submissions, or to custom    events defined in your Python code.</p> </li> </ol>"},{"location":"api/events/#pyscript.events.Event","title":"<code>Event</code>","text":"<p>A custom event that can notify multiple listeners when triggered.</p> <p>Use this class to create your own event system within Python code. Listeners can be either regular functions or async functions.</p> <pre><code>from pyscript.events import Event\n# Create a custom event.\ndata_loaded = Event()\n# Add a listener.\ndef on_data_loaded(result):\nprint(f\"Data loaded: {result}\")\ndata_loaded.add_listener(on_data_loaded)\n# Time passes.... trigger the event.\ndata_loaded.trigger({\"data\": 123})\n</code></pre> Source code in <code>pyscript/events.py</code> <pre><code>class Event:\n\"\"\"\n    A custom event that can notify multiple listeners when triggered.\n    Use this class to create your own event system within Python code.\n    Listeners can be either regular functions or async functions.\n    ```python\n    from pyscript.events import Event\n    # Create a custom event.\n    data_loaded = Event()\n    # Add a listener.\n    def on_data_loaded(result):\n        print(f\"Data loaded: {result}\")\n    data_loaded.add_listener(on_data_loaded)\n    # Time passes.... trigger the event.\n    data_loaded.trigger({\"data\": 123})\n    ```\n    \"\"\"\ndef __init__(self):\nself._listeners = []\ndef trigger(self, result):\n\"\"\"\n        Trigger the event and notify all listeners with the given `result`.\n        \"\"\"\nfor listener in self._listeners:\nif is_awaitable(listener):\nasyncio.create_task(listener(result))\nelse:\nlistener(result)\ndef add_listener(self, listener):\n\"\"\"\n        Add a function to be called when this event is triggered.\n        The `listener` must be callable. It can be either a regular function\n        or an async function. Duplicate listeners are ignored.\n        \"\"\"\nif not callable(listener):\nmsg = \"Listener must be callable.\"\nraise ValueError(msg)\nif listener not in self._listeners:\nself._listeners.append(listener)\ndef remove_listener(self, *listeners):\n\"\"\"\n        Remove specified `listeners`. If none specified, remove all listeners.\n        \"\"\"\nif listeners:\nfor listener in listeners:\ntry:\nself._listeners.remove(listener)\nexcept ValueError:\npass  # Silently ignore listeners not in the list.\nelse:\nself._listeners = []\n</code></pre>"},{"location":"api/events/#pyscript.events.Event.trigger","title":"<code>trigger(result)</code>","text":"<p>Trigger the event and notify all listeners with the given <code>result</code>.</p> Source code in <code>pyscript/events.py</code> <pre><code>def trigger(self, result):\n\"\"\"\n    Trigger the event and notify all listeners with the given `result`.\n    \"\"\"\nfor listener in self._listeners:\nif is_awaitable(listener):\nasyncio.create_task(listener(result))\nelse:\nlistener(result)\n</code></pre>"},{"location":"api/events/#pyscript.events.Event.add_listener","title":"<code>add_listener(listener)</code>","text":"<p>Add a function to be called when this event is triggered.</p> <p>The <code>listener</code> must be callable. It can be either a regular function or an async function. Duplicate listeners are ignored.</p> Source code in <code>pyscript/events.py</code> <pre><code>def add_listener(self, listener):\n\"\"\"\n    Add a function to be called when this event is triggered.\n    The `listener` must be callable. It can be either a regular function\n    or an async function. Duplicate listeners are ignored.\n    \"\"\"\nif not callable(listener):\nmsg = \"Listener must be callable.\"\nraise ValueError(msg)\nif listener not in self._listeners:\nself._listeners.append(listener)\n</code></pre>"},{"location":"api/events/#pyscript.events.Event.remove_listener","title":"<code>remove_listener(*listeners)</code>","text":"<p>Remove specified <code>listeners</code>. If none specified, remove all listeners.</p> Source code in <code>pyscript/events.py</code> <pre><code>def remove_listener(self, *listeners):\n\"\"\"\n    Remove specified `listeners`. If none specified, remove all listeners.\n    \"\"\"\nif listeners:\nfor listener in listeners:\ntry:\nself._listeners.remove(listener)\nexcept ValueError:\npass  # Silently ignore listeners not in the list.\nelse:\nself._listeners = []\n</code></pre>"},{"location":"api/events/#pyscript.events.when","title":"<code>when(event_type, selector=None, **options)</code>","text":"<p>A decorator to handle DOM events or custom <code>Event</code> objects.</p> <p>For DOM events, specify the <code>event_type</code> (e.g. <code>\"click\"</code>) and a <code>selector</code> for target elements. For custom <code>Event</code> objects, just pass the <code>Event</code> instance as the <code>event_type</code>. It's also possible to pass a list of <code>Event</code> objects. The <code>selector</code> is required only for DOM events. It should be a CSS selector string, <code>Element</code>, <code>ElementCollection</code>, or list of DOM elements.</p> <p>For DOM events only, you can specify optional addEventListener options: <code>capture</code>, <code>once</code>, <code>passive</code>, or <code>signal</code>.</p> <p>The decorated function can be either a regular function or an async function. If the function accepts an argument, it will receive the event object (for DOM events) or the Event's result (for custom events). A function does not need to accept any arguments if it doesn't require them.</p> <pre><code>from pyscript import when, display\n# Handle DOM events.\n@when(\"click\", \"#my-button\")\ndef handle_click(event):\ndisplay(\"Button clicked!\")\n# Handle DOM events with options.\n@when(\"click\", \"#my-button\", once=True)\ndef handle_click_once(event):\ndisplay(\"Button clicked once!\")\n# Handle custom events.\nmy_event = Event()\n@when(my_event)\ndef handle_custom():  # No event argument needed.\ndisplay(\"Custom event triggered!\")\n# Handle multiple custom events.\nanother_event = Event()\ndef another_handler():\ndisplay(\"Another custom event handler.\")\n# Attach the same handler to multiple events but not as a decorator.\nwhen([my_event, another_event])(another_handler)\n# Trigger an Event instance from a DOM event via @when.\n@when(\"click\", \"#my-button\")\ndef handle_click(event):\nanother_event.trigger(\"Button clicked!\")\n# Stacked decorators also work.\n@when(\"mouseover\", \"#my-div\")\n@when(my_event)\ndef handle_both(event):\ndisplay(\"Either mouseover or custom event triggered!\")\n</code></pre> Source code in <code>pyscript/events.py</code> <pre><code>def when(event_type, selector=None, **options):\n\"\"\"\n    A decorator to handle DOM events or custom `Event` objects.\n    For DOM events, specify the `event_type` (e.g. `\"click\"`) and a `selector`\n    for target elements. For custom `Event` objects, just pass the `Event`\n    instance as the `event_type`. It's also possible to pass a list of `Event`\n    objects. The `selector` is required only for DOM events. It should be a\n    [CSS selector string](https://developer.mozilla.org/en-US/docs/Web/CSS/Guides/Selectors),\n    `Element`, `ElementCollection`, or list of DOM elements.\n    For DOM events only, you can specify optional\n    [addEventListener options](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#options):\n    `capture`, `once`, `passive`, or `signal`.\n    The decorated function can be either a regular function or an async\n    function. If the function accepts an argument, it will receive the event\n    object (for DOM events) or the Event's result (for custom events). A\n    function does not need to accept any arguments if it doesn't require them.\n    ```python\n    from pyscript import when, display\n    # Handle DOM events.\n    @when(\"click\", \"#my-button\")\n    def handle_click(event):\n        display(\"Button clicked!\")\n    # Handle DOM events with options.\n    @when(\"click\", \"#my-button\", once=True)\n    def handle_click_once(event):\n        display(\"Button clicked once!\")\n    # Handle custom events.\n    my_event = Event()\n    @when(my_event)\n    def handle_custom():  # No event argument needed.\n        display(\"Custom event triggered!\")\n    # Handle multiple custom events.\n    another_event = Event()\n    def another_handler():\n        display(\"Another custom event handler.\")\n    # Attach the same handler to multiple events but not as a decorator.\n    when([my_event, another_event])(another_handler)\n    # Trigger an Event instance from a DOM event via @when.\n    @when(\"click\", \"#my-button\")\n    def handle_click(event):\n        another_event.trigger(\"Button clicked!\")\n    # Stacked decorators also work.\n    @when(\"mouseover\", \"#my-div\")\n    @when(my_event)\n    def handle_both(event):\n        display(\"Either mouseover or custom event triggered!\")\n    ```\n    \"\"\"\nif isinstance(event_type, str):\n# This is a DOM event to handle, so check and use the selector.\nif not selector:\nraise ValueError(\"Selector required for DOM event handling.\")\nelements = _get_elements(selector)\nif not elements:\nraise ValueError(f\"No elements found for selector: {selector}\")\ndef decorator(func):\nwrapper = _create_wrapper(func)\nif isinstance(event_type, Event):\n# Custom Event - add listener.\nevent_type.add_listener(wrapper)\nelif isinstance(event_type, list) and all(\nisinstance(t, Event) for t in event_type\n):\n# List of custom Events - add listener to each.\nfor event in event_type:\nevent.add_listener(wrapper)\nelse:\n# DOM event - attach to all matched elements.\nfor element in elements:\nelement.addEventListener(\nevent_type,\ncreate_proxy(wrapper),\nto_js(options) if options else False,\n)\nreturn wrapper\nreturn decorator\n</code></pre>"},{"location":"api/fetch/","title":"<code>pyscript.fetch</code>","text":"<p>This module provides a Python-friendly interface to the browser's fetch API, returning native Python data types and supporting directly awaiting the promise and chaining method calls directly on the promise.</p> <pre><code>from pyscript.fetch import fetch\nurl = \"https://api.example.com/data\"\n# Pattern 1: Await the response, then extract data.\nresponse = await fetch(url)\nif response.ok:\ndata = await response.json()\nelse:\nraise NetworkError(f\"Fetch failed: {response.status}\")\n# Pattern 2: Chain method calls directly on the promise.\ndata = await fetch(url).json()\n</code></pre>"},{"location":"api/fetch/#pyscript.fetch.fetch","title":"<code>fetch(url, **options)</code>","text":"<p>Fetch a resource from the network using a Pythonic interface.</p> <p>This wraps JavaScript's fetch API, returning Python-native data types and supporting both direct promise awaiting and method chaining.</p> <p>The function takes a <code>url</code> and optional fetch <code>options</code> as keyword arguments. The <code>options</code> correspond to the JavaScript fetch API's RequestInit dictionary, and commonly include:</p> <ul> <li><code>method</code>: HTTP method (e.g., <code>\"GET\"</code>, <code>\"POST\"</code>, <code>\"PUT\"</code> etc.)</li> <li><code>headers</code>: Dict of request headers.</li> <li><code>body</code>: Request body (string, dict for JSON, etc.)</li> </ul> <p>The function returns a promise that resolves to a Response-like object with Pythonic methods to extract data:</p> <ul> <li><code>await response.json()</code> to get JSON as Python objects.</li> <li><code>await response.text()</code> to get text data.</li> <li><code>await response.bytearray()</code> to get raw data as a bytearray.</li> <li><code>await response.arrayBuffer()</code> to get raw data as a memoryview or bytes.</li> <li><code>await response.blob()</code> to get the raw JS Blob object.</li> </ul> <p>It's also possible to chain these methods directly on the fetch promise: <code>data = await fetch(url).json()</code></p> <p>The returned response object also exposes standard properties like <code>ok</code>, <code>status</code>, and <code>statusText</code> for checking response status.</p> <pre><code># Simple GET request.\nresponse = await fetch(\"https://api.example.com/data\")\ndata = await response.json()\n# Method chaining.\ndata = await fetch(\"https://api.example.com/data\").json()\n# POST request with JSON.\nresponse = await fetch(\n\"https://api.example.com/users\",\nmethod=\"POST\",\nheaders={\"Content-Type\": \"application/json\"},\nbody=json.dumps({\"name\": \"Alice\"})\n)\nresult = await response.json()\n# Check response status codes.\nresponse = await fetch(\"https://api.example.com/data\")\nif response.ok:\n# Status in the range 200-299.\ndata = await response.json()\nelif response.status == 404:\nprint(\"Resource not found\")\nelse:\nprint(f\"Error: {response.status} {response.statusText}\")\n</code></pre> Source code in <code>pyscript/fetch.py</code> <pre><code>def fetch(url, **options):\n\"\"\"\n    Fetch a resource from the network using a Pythonic interface.\n    This wraps JavaScript's fetch API, returning Python-native data types\n    and supporting both direct promise awaiting and method chaining.\n    The function takes a `url` and optional fetch `options` as keyword\n    arguments. The `options` correspond to the JavaScript fetch API's\n    [RequestInit dictionary](https://developer.mozilla.org/en-US/docs/Web/API/RequestInit),\n    and commonly include:\n    - `method`: HTTP method (e.g., `\"GET\"`, `\"POST\"`, `\"PUT\"` etc.)\n    - `headers`: Dict of request headers.\n    - `body`: Request body (string, dict for JSON, etc.)\n    The function returns a promise that resolves to a Response-like object\n    with Pythonic methods to extract data:\n    - `await response.json()` to get JSON as Python objects.\n    - `await response.text()` to get text data.\n    - `await response.bytearray()` to get raw data as a bytearray.\n    - `await response.arrayBuffer()` to get raw data as a memoryview or bytes.\n    - `await response.blob()` to get the raw JS Blob object.\n    It's also possible to chain these methods directly on the fetch promise:\n    `data = await fetch(url).json()`\n    The returned response object also exposes standard properties like\n    `ok`, `status`, and `statusText` for checking response status.\n    ```python\n    # Simple GET request.\n    response = await fetch(\"https://api.example.com/data\")\n    data = await response.json()\n    # Method chaining.\n    data = await fetch(\"https://api.example.com/data\").json()\n    # POST request with JSON.\n    response = await fetch(\n        \"https://api.example.com/users\",\n        method=\"POST\",\n        headers={\"Content-Type\": \"application/json\"},\n        body=json.dumps({\"name\": \"Alice\"})\n    )\n    result = await response.json()\n    # Check response status codes.\n    response = await fetch(\"https://api.example.com/data\")\n    if response.ok:\n        # Status in the range 200-299.\n        data = await response.json()\n    elif response.status == 404:\n        print(\"Resource not found\")\n    else:\n        print(f\"Error: {response.status} {response.statusText}\")\n    ```\n    \"\"\"\n# Convert Python dict to JavaScript object.\njs_options = js.JSON.parse(json.dumps(options))\n# Setup response handler to wrap the result.\ndef on_response(response, *_):\nreturn _FetchPromise.setup(promise, response)\npromise = js.fetch(url, js_options).then(on_response)\n_FetchPromise(promise)\nreturn promise\n</code></pre>"},{"location":"api/ffi/","title":"<code>pyscript.ffi</code>","text":"<p>This module provides a unified Foreign Function Interface (FFI) layer for Python/JavaScript interactions, that works consistently across both Pyodide and MicroPython, and in a worker or main thread context, abstracting away the differences in their JavaScript interop APIs.</p> <p>The following utilities work on both the main thread and in worker contexts:</p> <ul> <li><code>create_proxy</code>: Create a persistent JavaScript proxy of a Python function.</li> <li><code>to_js</code>: Convert Python objects to JavaScript objects.</li> <li><code>is_none</code>: Check if a value is Python <code>None</code> or JavaScript <code>null</code>.</li> <li><code>assign</code>: Merge objects (like JavaScript's <code>Object.assign</code>).</li> </ul> <p>The following utilities are specific to worker contexts:</p> <ul> <li><code>direct</code>: Mark objects for direct JavaScript access.</li> <li><code>gather</code>: Collect multiple values from worker contexts.</li> <li><code>query</code>: Query objects in worker contexts.</li> </ul> <p>More details of the <code>direct</code>, <code>gather</code>, and <code>query</code> utilities can be found here.</p>"},{"location":"api/ffi/#pyscript.ffi.create_proxy","title":"<code>create_proxy(func)</code>","text":"<p>Create a persistent JavaScript proxy of a Python function.</p> <p>This proxy allows JavaScript code to call the Python function seamlessly, maintaining the correct context and argument handling.</p> <p>This is especially useful when passing Python functions as callbacks to JavaScript APIs (without <code>create_proxy</code>, the function would be garbage collected after the declaration of the callback).</p> <pre><code>from pyscript import ffi\nfrom pyscript import document\nmy_button = document.getElementById(\"my-button\")\ndef py_callback(x):\nprint(f\"Callback called with {x}\")\nmy_button.addEventListener(\"click\", ffi.create_proxy(py_callback))\n</code></pre> Source code in <code>pyscript/ffi.py</code> <pre><code>def create_proxy(func):\n\"\"\"\n    Create a persistent JavaScript proxy of a Python function.\n    This proxy allows JavaScript code to call the Python function\n    seamlessly, maintaining the correct context and argument handling.\n    This is especially useful when passing Python functions as callbacks\n    to JavaScript APIs (without `create_proxy`, the function would be\n    garbage collected after the declaration of the callback).\n    ```python\n    from pyscript import ffi\n    from pyscript import document\n    my_button = document.getElementById(\"my-button\")\n    def py_callback(x):\n        print(f\"Callback called with {x}\")\n    my_button.addEventListener(\"click\", ffi.create_proxy(py_callback))\n    ```\n    \"\"\"\nreturn _cp(func)\n</code></pre>"},{"location":"api/ffi/#pyscript.ffi.to_js","title":"<code>to_js(value, **kw)</code>","text":"<p>Convert Python objects to JavaScript objects.</p> <p>This ensures a Python <code>dict</code> becomes a proper JavaScript object rather a JavaScript <code>Map</code>, which is more intuitive for most use cases.</p> <p>Where required, the underlying <code>to_js</code> uses <code>Object.fromEntries</code> for <code>dict</code> conversion.</p> <pre><code>from pyscript import ffi\nimport js\nnote = {\n\"body\": \"This is a notification\",\n\"icon\": \"icon.png\"\n}\njs.Notification.new(\"Hello!\", ffi.to_js(note))\n</code></pre> Source code in <code>pyscript/ffi.py</code> <pre><code>def to_js(value, **kw):\n\"\"\"\n    Convert Python objects to JavaScript objects.\n    This ensures a Python `dict` becomes a\n    [proper JavaScript object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)\n    rather a JavaScript [`Map`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map),\n    which is more intuitive for most use cases.\n    Where required, the underlying `to_js` uses `Object.fromEntries` for\n    `dict` conversion.\n    ```python\n    from pyscript import ffi\n    import js\n    note = {\n        \"body\": \"This is a notification\",\n        \"icon\": \"icon.png\"\n    }\n    js.Notification.new(\"Hello!\", ffi.to_js(note))\n    ```\n    \"\"\"\nreturn _to_js_wrapper(value, **kw)\n</code></pre>"},{"location":"api/ffi/#pyscript.ffi.is_none","title":"<code>is_none(value)</code>","text":"<p>Check if a value is <code>None</code> or JavaScript <code>null</code>.</p> <p>In Pyodide, JavaScript <code>null</code> is represented by the <code>jsnull</code> object, so we check for both Python <code>None</code> and <code>jsnull</code>. This function ensures consistent behavior across Pyodide and MicroPython for null-like values.</p> <pre><code>from pyscript import ffi\nimport js\nval1 = None\nval2 = js.null\nval3 = 42\nprint(ffi.is_none(val1))  # True\nprint(ffi.is_none(val2))  # True\nprint(ffi.is_none(val3))  # False\n</code></pre> Source code in <code>pyscript/ffi.py</code> <pre><code>def is_none(value):\n\"\"\"\n    Check if a value is `None` or JavaScript `null`.\n    In Pyodide, JavaScript `null` is represented by the `jsnull` object,\n    so we check for both Python `None` and `jsnull`. This function ensures\n    consistent behavior across Pyodide and MicroPython for null-like\n    values.\n    ```python\n    from pyscript import ffi\n    import js\n    val1 = None\n    val2 = js.null\n    val3 = 42\n    print(ffi.is_none(val1))  # True\n    print(ffi.is_none(val2))  # True\n    print(ffi.is_none(val3))  # False\n    ```\n    \"\"\"\nreturn value is None or value is jsnull\n</code></pre>"},{"location":"api/ffi/#pyscript.ffi.assign","title":"<code>assign(source, *args)</code>","text":"<p>Merge JavaScript objects (like Object.assign).</p> <p>Takes a target object and merges properties from one or more source objects into it, returning the modified target.</p> <pre><code>obj = js.Object.new()\nffi.assign(obj, {\"a\": 1}, {\"b\": 2})\n# obj now has properties a=1 and b=2\n</code></pre> Source code in <code>pyscript/ffi.py</code> <pre><code>def assign(source, *args):\n\"\"\"\n    Merge JavaScript objects (like\n    [Object.assign](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)).\n    Takes a target object and merges properties from one or more source\n    objects into it, returning the modified target.\n    ```python\n    obj = js.Object.new()\n    ffi.assign(obj, {\"a\": 1}, {\"b\": 2})\n    # obj now has properties a=1 and b=2\n    ```\n    \"\"\"\nfor arg in args:\n_assign(source, to_js(arg))\nreturn source\n</code></pre>"},{"location":"api/flatted/","title":"<code>pyscript.flatted</code>","text":"<p>This module is a Python implementation of the Flatted JavaScript library, which provides a light and fast way to serialize and deserialize JSON structures that contain circular references.</p> <p>Standard JSON cannot handle circular references - attempting to serialize an object that references itself will cause an error. Flatted solves this by transforming circular structures into a flat array format that can be safely serialized and later reconstructed.</p> <p>Common use cases:</p> <ul> <li>Serializing complex object graphs with circular references.</li> <li>Working with DOM-like structures that contain parent/child references.</li> <li>Preserving object identity when serializing data structures.</li> </ul> <pre><code>from pyscript import flatted\n# Create a circular structure.\nobj = {\"name\": \"parent\"}\nobj[\"self\"] = obj  # Circular reference!\n# Standard json.dumps would fail here.\nserialized = flatted.stringify(obj)\n# Reconstruct the original structure.\nrestored = flatted.parse(serialized)\nassert restored[\"self\"] is restored  # Circular reference preserved!\n</code></pre>"},{"location":"api/flatted/#pyscript.flatted.parse","title":"<code>parse(value, *args, **kwargs)</code>","text":"<p>Parse a Flatted JSON string and reconstruct the original structure.</p> <p>This function takes a <code>value</code> containing a JSON string created by Flatted's stringify() and reconstructs the original Python object, including any circular references. The <code>*args</code> and <code>**kwargs</code> are passed to json.loads() for additional customization.</p> <pre><code>from pyscript import flatted\n# Parse a Flatted JSON string.\njson_string = '[{\"name\": \"1\", \"self\": \"0\"}, \"parent\"]'\nobj = flatted.parse(json_string)\n# Circular references are preserved.\nassert obj[\"self\"] is obj\n</code></pre> Source code in <code>pyscript/flatted.py</code> <pre><code>def parse(value, *args, **kwargs):\n\"\"\"\n    Parse a Flatted JSON string and reconstruct the original structure.\n    This function takes a `value` containing a JSON string created by\n    Flatted's stringify() and reconstructs the original Python object,\n    including any circular references. The `*args` and `**kwargs` are passed\n    to json.loads() for additional customization.\n    ```python\n    from pyscript import flatted\n    # Parse a Flatted JSON string.\n    json_string = '[{\"name\": \"1\", \"self\": \"0\"}, \"parent\"]'\n    obj = flatted.parse(json_string)\n    # Circular references are preserved.\n    assert obj[\"self\"] is obj\n    ```\n    \"\"\"\njson = _json.loads(value, *args, **kwargs)\nwrapped = []\nfor value in json:\nwrapped.append(_wrap(value))\ninput = []\nfor value in wrapped:\nif isinstance(value, _String):\ninput.append(value.value)\nelse:\ninput.append(value)\nvalue = input[0]\nif _is_array(value):\nreturn _loop(_array_keys(value), input, [value], value)\nif _is_object(value):\nreturn _loop(_object_keys(value), input, [value], value)\nreturn value\n</code></pre>"},{"location":"api/flatted/#pyscript.flatted.stringify","title":"<code>stringify(value, *args, **kwargs)</code>","text":"<p>Serialize a Python object to a Flatted JSON string.</p> <p>This function converts <code>value</code>, a Python object (including those with circular references), into a JSON string that can be safely transmitted or stored. The resulting string can be reconstructed using Flatted's parse(). The <code>*args</code> and <code>**kwargs</code> are passed to json.dumps() for additional customization.</p> <pre><code>from pyscript import flatted\n# Create an object with a circular reference.\nparent = {\"name\": \"parent\", \"children\": []}\nchild = {\"name\": \"child\", \"parent\": parent}\nparent[\"children\"].append(child)\n# Serialize it (standard json.dumps would fail here).\njson_string = flatted.stringify(parent)\n# Can optionally pretty-print via JSON indentation etc.\npretty = flatted.stringify(parent, indent=2)\n</code></pre> Source code in <code>pyscript/flatted.py</code> <pre><code>def stringify(value, *args, **kwargs):\n\"\"\"\n    Serialize a Python object to a Flatted JSON string.\n    This function converts `value`, a Python object (including those with\n    circular references), into a JSON string that can be safely transmitted\n    or stored. The resulting string can be reconstructed using Flatted's\n    parse(). The `*args` and `**kwargs` are passed to json.dumps() for\n    additional customization.\n    ```python\n    from pyscript import flatted\n    # Create an object with a circular reference.\n    parent = {\"name\": \"parent\", \"children\": []}\n    child = {\"name\": \"child\", \"parent\": parent}\n    parent[\"children\"].append(child)\n    # Serialize it (standard json.dumps would fail here).\n    json_string = flatted.stringify(parent)\n    # Can optionally pretty-print via JSON indentation etc.\n    pretty = flatted.stringify(parent, indent=2)\n    ```\n    \"\"\"\nknown = _Known()\ninput = []\noutput = []\ni = int(_index(known, input, value))\nwhile i &lt; len(input):\noutput.append(_transform(known, input, input[i]))\ni += 1\nreturn _json.dumps(output, *args, **kwargs)\n</code></pre>"},{"location":"api/fs/","title":"<code>pyscript.fs</code>","text":"<p>This module provides an API for mounting directories from the user's local filesystem into the browser's virtual filesystem. This means Python code, running in the browser, can read and write files on the user's local machine.</p> <p>Warning</p> <p>This API only works in Chromium-based browsers (Chrome, Edge, Vivaldi, Brave, etc.) that support the File System Access API.</p> <p>The module maintains a <code>mounted</code> dictionary that tracks all currently mounted paths and their associated filesystem handles.</p> <pre><code>from pyscript import fs, document, when\n# Mount a local directory to the `/local` mount point in the browser's\n# virtual filesystem (may prompt user for permission).\nawait fs.mount(\"/local\")\n# Alternatively, mount on a button click event. This is important because\n# if the call to `fs.mount` happens after a click or other transient event,\n# the confirmation dialog will not be shown.\n@when(\"click\", \"#mount-button\")\nasync def handler(event):\nawait fs.mount(\"/another_dir\")\n# Work with files in the mounted directory as usual.\nwith open(\"/local/example.txt\", \"w\") as f:\nf.write(\"Hello from PyScript!\")\n# Ensure changes are written to local filesystem.\nawait fs.sync(\"/local\")\n# Clean up when done.\nawait fs.unmount(\"/local\")\n</code></pre>"},{"location":"api/fs/#pyscript.fs.mounted","title":"<code>mounted = {}</code>  <code>module-attribute</code>","text":"<p>Global dictionary tracking mounted paths and their filesystem handles.</p>"},{"location":"api/fs/#pyscript.fs.mount","title":"<code>mount(path, mode='readwrite', root='', id='pyscript')</code>  <code>async</code>","text":"<p>Mount a directory from the local filesystem to the virtual filesystem at the specified <code>path</code> mount point. The <code>mode</code> can be \"readwrite\" or \"read\" to specify access level. The <code>root</code> parameter provides a hint for the file picker starting location. The <code>id</code> parameter allows multiple distinct mounts at the same path.</p> <p>On first use, the browser will prompt the user to select a directory and grant permission.</p> <pre><code>from pyscript import fs\n# Basic mount with default settings.\nawait fs.mount(\"/local\")\n# Mount with read-only access.\nawait fs.mount(\"/readonly\", mode=\"read\")\n# Mount with a hint to start in Downloads folder.\nawait fs.mount(\"/downloads\", root=\"downloads\")\n# Mount with a custom ID to track different directories.\nawait fs.mount(\"/project\", id=\"my-project\")\n</code></pre> <p>If called during a user interaction (like a button click), the permission dialog may be skipped if permission was previously granted.</p> Source code in <code>pyscript/fs.py</code> <pre><code>async def mount(path, mode=\"readwrite\", root=\"\", id=\"pyscript\"):\n\"\"\"\n    Mount a directory from the local filesystem to the virtual filesystem\n    at the specified `path` mount point. The `mode` can be \"readwrite\" or\n    \"read\" to specify access level. The `root` parameter provides a hint\n    for the file picker starting location. The `id` parameter allows multiple\n    distinct mounts at the same path.\n    On first use, the browser will prompt the user to select a directory\n    and grant permission.\n    ```python\n    from pyscript import fs\n    # Basic mount with default settings.\n    await fs.mount(\"/local\")\n    # Mount with read-only access.\n    await fs.mount(\"/readonly\", mode=\"read\")\n    # Mount with a hint to start in Downloads folder.\n    await fs.mount(\"/downloads\", root=\"downloads\")\n    # Mount with a custom ID to track different directories.\n    await fs.mount(\"/project\", id=\"my-project\")\n    ```\n    If called during a user interaction (like a button click), the\n    permission dialog may be skipped if permission was previously granted.\n    \"\"\"\njs.console.warn(\"experimental pyscript.fs \u26a0\ufe0f\")\n# Check if path is already mounted with a different ID.\nmount_key = f\"{path}@{id}\"\nif path in mounted:\n# Path already mounted - check if it's the same ID.\nfor existing_key in mounted.keys():\nif existing_key.startswith(f\"{path}@\") and existing_key != mount_key:\nraise ValueError(\nf\"Path '{path}' is already mounted with a different ID. \"\nf\"Unmount it first or use a different path.\"\n)\ndetails = None\nhandler = None\noptions = {\"id\": id, \"mode\": mode}\nif root != \"\":\noptions[\"startIn\"] = root\nif RUNNING_IN_WORKER:\nfs_handler = sync_with_worker.storeFSHandler(mount_key, to_js(options))\n# Handle both async and SharedArrayBuffer use cases.\nif isinstance(fs_handler, bool):\nsuccess = fs_handler\nelse:\nsuccess = await fs_handler\nif success:\nidbm = IDBMap.new(_fs.NAMESPACE)\ndetails = await idbm.get(mount_key)\nhandler = await _check_permission(details)\nif handler is None:\n# Force await in either async or sync scenario.\nawait js.Promise.resolve(sync_with_worker.getFSHandler(details.options))\nhandler = details.handler\nelse:\nraise RuntimeError(_fs.ERROR)\nelse:\nsuccess = await _fs.idb.has(mount_key)\nif success:\ndetails = await _fs.idb.get(mount_key)\nhandler = await _check_permission(details)\nif handler is None:\nhandler = await _fs.getFileSystemDirectoryHandle(details.options)\nelse:\njs_options = to_js(options)\nhandler = await _fs.getFileSystemDirectoryHandle(js_options)\ndetails = {\"handler\": handler, \"options\": js_options}\nawait _fs.idb.set(mount_key, to_js(details))\nmounted[path] = await interpreter.mountNativeFS(path, handler)\n</code></pre>"},{"location":"api/fs/#pyscript.fs.sync","title":"<code>sync(path)</code>  <code>async</code>","text":"<p>Synchronise the virtual and local filesystems for a mounted <code>path</code>.</p> <p>This ensures all changes made in the browser's virtual filesystem are written to the user's local filesystem, and vice versa.</p> <pre><code>from pyscript import fs\nawait fs.mount(\"/local\")\n# Make changes to files.\nwith open(\"/local/data.txt\", \"w\") as f:\nf.write(\"Important data\")\n# Ensure changes are written to local disk.\nawait fs.sync(\"/local\")\n</code></pre> <p>This is automatically called by unmount(), but you may want to call it explicitly to ensure data persistence at specific points.</p> Source code in <code>pyscript/fs.py</code> <pre><code>async def sync(path):\n\"\"\"\n    Synchronise the virtual and local filesystems for a mounted `path`.\n    This ensures all changes made in the browser's virtual filesystem are\n    written to the user's local filesystem, and vice versa.\n    ```python\n    from pyscript import fs\n    await fs.mount(\"/local\")\n    # Make changes to files.\n    with open(\"/local/data.txt\", \"w\") as f:\n        f.write(\"Important data\")\n    # Ensure changes are written to local disk.\n    await fs.sync(\"/local\")\n    ```\n    This is automatically called by unmount(), but you may want to call\n    it explicitly to ensure data persistence at specific points.\n    \"\"\"\nif path not in mounted:\nraise KeyError(\nf\"Path '{path}' is not mounted. \" f\"Use fs.mount() to mount it first.\"\n)\nawait mounted[path].syncfs()\n</code></pre>"},{"location":"api/fs/#pyscript.fs.unmount","title":"<code>unmount(path)</code>  <code>async</code>","text":"<p>Unmount a directory, specified by <code>path</code>, from the virtual filesystem.</p> <p>This synchronises any pending changes and then removes the mount point, freeing up memory. The <code>path</code> can be reused for mounting a different directory.</p> <pre><code>from pyscript import fs\nawait fs.mount(\"/local\")\n# ... work with files ...\nawait fs.unmount(\"/local\")\n# Path can now be reused.\nawait fs.mount(\"/local\", id=\"different-folder\")\n</code></pre> <p>This automatically calls <code>sync()</code> before unmounting to ensure no data is lost.</p> Source code in <code>pyscript/fs.py</code> <pre><code>async def unmount(path):\n\"\"\"\n    Unmount a directory, specified by `path`, from the virtual filesystem.\n    This synchronises any pending changes and then removes the mount point,\n    freeing up memory. The `path` can be reused for mounting a different\n    directory.\n    ```python\n    from pyscript import fs\n    await fs.mount(\"/local\")\n    # ... work with files ...\n    await fs.unmount(\"/local\")\n    # Path can now be reused.\n    await fs.mount(\"/local\", id=\"different-folder\")\n    ```\n    This automatically calls `sync()` before unmounting to ensure no data\n    is lost.\n    \"\"\"\nif path not in mounted:\nraise KeyError(f\"Path '{path}' is not mounted. Cannot unmount.\")\nawait sync(path)\ninterpreter._module.FS.unmount(path)\ndel mounted[path]\n</code></pre>"},{"location":"api/fs/#pyscript.fs.revoke","title":"<code>revoke(path, id='pyscript')</code>  <code>async</code>","text":"<p>Revoke filesystem access permission and unmount for a given <code>path</code> and <code>id</code> combination.</p> <p>This removes the stored permission for accessing the user's local filesystem at the specified path and ID. Unlike <code>unmount()</code>, which only removes the mount point, <code>revoke()</code> also clears the permission so the user will be prompted again on next mount.</p> <pre><code>from pyscript import fs\nawait fs.mount(\"/local\", id=\"my-app\")\n# ... work with files ...\n# Revoke permission (user will be prompted again next time).\nrevoked = await fs.revoke(\"/local\", id=\"my-app\")\nif revoked:\nprint(\"Permission revoked successfully\")\n</code></pre> <p>After revoking, the user will need to grant permission again and select a directory when <code>mount()</code> is called next time.</p> Source code in <code>pyscript/fs.py</code> <pre><code>async def revoke(path, id=\"pyscript\"):\n\"\"\"\n    Revoke filesystem access permission and unmount for a given\n    `path` and `id` combination.\n    This removes the stored permission for accessing the user's local\n    filesystem at the specified path and ID. Unlike `unmount()`, which only\n    removes the mount point, `revoke()` also clears the permission so the\n    user will be prompted again on next mount.\n    ```python\n    from pyscript import fs\n    await fs.mount(\"/local\", id=\"my-app\")\n    # ... work with files ...\n    # Revoke permission (user will be prompted again next time).\n    revoked = await fs.revoke(\"/local\", id=\"my-app\")\n    if revoked:\n        print(\"Permission revoked successfully\")\n    ```\n    After revoking, the user will need to grant permission again and\n    select a directory when `mount()` is called next time.\n    \"\"\"\nmount_key = f\"{path}@{id}\"\nif RUNNING_IN_WORKER:\nhandler_exists = sync_with_worker.deleteFSHandler(mount_key)\nelse:\nhandler_exists = await _fs.idb.has(mount_key)\nif handler_exists:\nhandler_exists = await _fs.idb.delete(mount_key)\nif handler_exists:\ninterpreter._module.FS.unmount(path)\nif path in mounted:\ndel mounted[path]\nreturn handler_exists\n</code></pre>"},{"location":"api/init/","title":"The <code>pyscript</code> API","text":"<p>Important</p> <p>These API docs are auto-generated from our source code. To suggest changes or report errors, please do so via our GitHub repository. The source code for these APIs is found here in our repository.</p> <p>This is the main <code>pyscript</code> namespace. It provides the primary Pythonic API for users to interact with the browser's own API. It includes utilities for common activities such as displaying content, handling events, fetching resources, managing local storage, and coordinating with web workers.</p> <p>The most important names provided by this namespace can be directly imported from <code>pyscript</code>, for example:</p> <pre><code>from pyscript import display, HTML, fetch, when, storage, WebSocket\n</code></pre> <p>The following names are available in the <code>pyscript</code> namespace:</p> <ul> <li><code>RUNNING_IN_WORKER</code>: Boolean indicating if the code is running in a Web   Worker.</li> <li><code>PyWorker</code>: Class for creating Web Workers running Python code.</li> <li><code>config</code>: Configuration object for pyscript settings.</li> <li><code>current_target</code>: The element in the DOM that is the current target for   output.</li> <li><code>document</code>: The standard <code>document</code> object, proxied in workers.</li> <li><code>window</code>: The standard <code>window</code> object, proxied in workers.</li> <li><code>js_import</code>: Function to dynamically import JS modules.</li> <li><code>js_modules</code>: Object containing JS modules available to Python.</li> <li><code>sync</code>: Utility for synchronizing between worker and main thread.</li> <li><code>display</code>: Function to render Python objects in the web page.</li> <li><code>HTML</code>: Helper class to create HTML content for display.</li> <li><code>fetch</code>: Function to perform HTTP requests.</li> <li><code>Storage</code>: Class representing browser storage (local/session).</li> <li><code>storage</code>: Object to interact with browser's local storage.</li> <li><code>WebSocket</code>: Class to create and manage WebSocket connections.</li> <li><code>when</code>: Function to register event handlers on DOM elements.</li> <li><code>Event</code>: Class representing user defined or DOM events.</li> <li><code>py_import</code>: Function to lazily import Pyodide related Python modules.</li> </ul> <p>If running in the main thread, the following additional names are available:</p> <ul> <li><code>create_named_worker</code>: Function to create a named Web Worker.</li> <li><code>workers</code>: Object to manage and interact with existing Web Workers.</li> </ul> <p>All of these names are defined in the various submodules of <code>pyscript</code> and are imported and re-exported here for convenience. Please refer to the respective submodule documentation for more details on each component.</p> <p>Note</p> <p>Some notes about the naming conventions and the relationship between various similar-but-different names found within this code base.</p> <pre><code>import pyscript\n</code></pre> <p>The <code>pyscript</code> package contains the main user-facing API offered by PyScript. All the names which are supposed be used by end users should be made available in <code>pyscript/__init__.py</code> (i.e., this source file).</p> <pre><code>import _pyscript\n</code></pre> <p>The <code>_pyscript</code> module is an internal API implemented in JS. End users should not use it directly. For its implementation, grep for <code>interpreter.registerJsModule(\"_pyscript\",...)</code> in <code>core.js</code>.</p> <pre><code>import js\n</code></pre> <p>The <code>js</code> object is the JS <code>globalThis</code>, as exported by Pyodide and/or Micropython's foreign function interface (FFI). As such, it contains different things in the main thread or in a worker, as defined by web standards.</p> <pre><code>import pyscript.context\n</code></pre> <p>The <code>context</code> submodule abstracts away some of the differences between the main thread and a worker. Its most important features are made available in the root <code>pyscript</code> namespace. All other functionality is mostly for internal PyScript use or advanced users. In particular, it defines <code>window</code> and <code>document</code> in such a way that these names work in both cases: in the main thread, they are the \"real\" objects, in a worker they are proxies which work thanks to coincident.</p> <pre><code>from pyscript import window, document\n</code></pre> <p>These are just the <code>window</code> and <code>document</code> objects as defined by <code>pyscript.context</code>. This is the blessed way to access them from <code>pyscript</code>, as it works transparently in both the main thread and worker cases.</p>"},{"location":"api/media/","title":"<code>pyscript.media</code>","text":"<p>This module provides classes and functions for interacting with media devices and streams in the browser, enabling you to work with cameras, microphones, and other media input/output devices directly from Python.</p> <p>Use this module for:</p> <ul> <li>Accessing webcams for video capture.</li> <li>Recording audio from microphones.</li> <li>Enumerating available media devices.</li> <li>Applying constraints to media streams (resolution, frame rate, etc.).</li> </ul> <pre><code>from pyscript import document\nfrom pyscript.media import Device, list_devices\n# Get a video stream from the default camera.\nstream = await Device.request_stream(video=True)\n# Display in a video element.\nvideo = document.getElementById(\"my-video\")\nvideo.srcObject = stream\n# Or list all available devices.\ndevices = await list_devices()\nfor device in devices:\nprint(f\"{device.kind}: {device.label}\")\n</code></pre> <p>Using media devices requires user permission. Browsers will show a permission dialog when accessing devices for the first time.</p>"},{"location":"api/media/#pyscript.media.Device","title":"<code>Device</code>","text":"<p>Represents a media input or output device.</p> <p>This class wraps a browser MediaDeviceInfo object, providing Pythonic access to device properties like <code>ID</code>, <code>label</code>, and <code>kind</code> (audio/video, input/output).</p> <p>Devices are typically obtained via the <code>list_devices()</code> function in this module, rather than constructed directly.</p> <pre><code>from pyscript.media import list_devices\n# Get all available devices.\ndevices = await list_devices()\n# Find video input devices (cameras).\ncameras = [d for d in devices if d.kind == \"videoinput\"]\n# Get a stream from a specific camera.\nif cameras:\nstream = await cameras[0].get_stream()\n</code></pre> Source code in <code>pyscript/media.py</code> <pre><code>class Device:\n\"\"\"\n    Represents a media input or output device.\n    This class wraps a browser\n    [MediaDeviceInfo object](https://developer.mozilla.org/en-US/docs/Web/API/MediaDeviceInfo),\n    providing Pythonic access to device properties like `ID`, `label`, and\n    `kind` (audio/video, input/output).\n    Devices are typically obtained via the `list_devices()` function in this\n    module, rather than constructed directly.\n    ```python\n    from pyscript.media import list_devices\n    # Get all available devices.\n    devices = await list_devices()\n    # Find video input devices (cameras).\n    cameras = [d for d in devices if d.kind == \"videoinput\"]\n    # Get a stream from a specific camera.\n    if cameras:\n        stream = await cameras[0].get_stream()\n    ```\n    \"\"\"\ndef __init__(self, device):\n\"\"\"\n        Create a Device wrapper around a MediaDeviceInfo `device`.\n        \"\"\"\nself._device_info = device\n@property\ndef id(self):\n\"\"\"\n        Unique identifier for this device.\n        This `ID` persists across sessions but is reset when the user clears\n        cookies. It's unique to the origin of the calling application.\n        \"\"\"\nreturn self._device_info.deviceId\n@property\ndef group(self):\n\"\"\"\n        Group identifier for related devices.\n        Devices belonging to the same physical device (e.g., a monitor with\n        both a camera and microphone) share the same `group ID`.\n        \"\"\"\nreturn self._device_info.groupId\n@property\ndef kind(self):\n\"\"\"\n        Device type: `\"videoinput\"`, `\"audioinput\"`, or `\"audiooutput\"`.\n        \"\"\"\nreturn self._device_info.kind\n@property\ndef label(self):\n\"\"\"\n        Human-readable description of the device.\n        Example: `\"External USB Webcam\"` or `\"Built-in Microphone\"`.\n        \"\"\"\nreturn self._device_info.label\ndef __getitem__(self, key):\n\"\"\"\n        Support bracket notation for JavaScript interop.\n        Allows accessing properties via `device[\"id\"]` syntax. Necessary\n        when Device instances are proxied to JavaScript.\n        \"\"\"\nreturn getattr(self, key)\n@classmethod\nasync def request_stream(cls, audio=False, video=True):\n\"\"\"\n        Request a media stream with the specified constraints.\n        This is a class method that requests access to media devices matching\n        the given `audio` and `video` constraints. The browser will prompt the\n        user for permission if needed and return a `MediaStream` object that\n        can be assigned to video/audio elements.\n        Simple boolean constraints for `audio` and `video` can be used to\n        request default devices. More complex constraints can be specified as\n        dictionaries conforming to\n        [the MediaTrackConstraints interface](https://developer.mozilla.org/en-US/docs/Web/API/MediaTrackConstraints).\n        ```python\n        from pyscript import document\n        from pyscript.media import Device\n        # Get default video stream.\n        stream = await Device.request_stream()\n        # Get stream with specific constraints.\n        stream = await Device.request_stream(\n            video={\"width\": 1920, \"height\": 1080}\n        )\n        # Get audio and video.\n        stream = await Device.request_stream(audio=True, video=True)\n        # Use the stream.\n        video_el = document.getElementById(\"camera\")\n        video_el.srcObject = stream\n        ```\n        This method will trigger a browser permission dialog on first use.\n        \"\"\"\noptions = {}\nif isinstance(audio, bool):\noptions[\"audio\"] = audio\nelif isinstance(audio, dict):\n# audio is a dict of constraints (sampleRate, echoCancellation etc...).\noptions[\"audio\"] = audio\nif isinstance(video, bool):\noptions[\"video\"] = video\nelif isinstance(video, dict):\n# video is a dict of constraints (width, height etc...).\noptions[\"video\"] = video\nreturn await window.navigator.mediaDevices.getUserMedia(to_js(options))\n@classmethod\nasync def load(cls, audio=False, video=True):\n\"\"\"\n        !!! warning\n            **Deprecated: Use `request_stream()` instead.**\n            This method is retained for backwards compatibility but will be\n            removed in a future release. Please use `request_stream()` instead.\n        \"\"\"\nreturn await cls.request_stream(audio=audio, video=video)\nasync def get_stream(self):\n\"\"\"\n        Get a media stream from this specific device.\n        ```python\n        from pyscript.media import list_devices\n        # List all devices.\n        devices = await list_devices()\n        # Find a specific camera.\n        my_camera = None\n        for device in devices:\n            if device.kind == \"videoinput\" and \"USB\" in device.label:\n                my_camera = device\n                break\n        # Get a stream from that specific camera.\n        if my_camera:\n            stream = await my_camera.get_stream()\n        ```\n        This will trigger a permission dialog if the user hasn't already\n        granted permission for this device type.\n        \"\"\"\n# Extract media type from device kind (e.g., \"videoinput\" -&gt; \"video\").\nmedia_type = self.kind.replace(\"input\", \"\").replace(\"output\", \"\")\n# Request stream with exact device ID constraint.\noptions = {media_type: {\"deviceId\": {\"exact\": self.id}}}\nreturn await self.request_stream(**options)\n</code></pre>"},{"location":"api/media/#pyscript.media.Device.id","title":"<code>id</code>  <code>property</code>","text":"<p>Unique identifier for this device.</p> <p>This <code>ID</code> persists across sessions but is reset when the user clears cookies. It's unique to the origin of the calling application.</p>"},{"location":"api/media/#pyscript.media.Device.group","title":"<code>group</code>  <code>property</code>","text":"<p>Group identifier for related devices.</p> <p>Devices belonging to the same physical device (e.g., a monitor with both a camera and microphone) share the same <code>group ID</code>.</p>"},{"location":"api/media/#pyscript.media.Device.kind","title":"<code>kind</code>  <code>property</code>","text":"<p>Device type: <code>\"videoinput\"</code>, <code>\"audioinput\"</code>, or <code>\"audiooutput\"</code>.</p>"},{"location":"api/media/#pyscript.media.Device.label","title":"<code>label</code>  <code>property</code>","text":"<p>Human-readable description of the device.</p> <p>Example: <code>\"External USB Webcam\"</code> or <code>\"Built-in Microphone\"</code>.</p>"},{"location":"api/media/#pyscript.media.Device.__init__","title":"<code>__init__(device)</code>","text":"<p>Create a Device wrapper around a MediaDeviceInfo <code>device</code>.</p> Source code in <code>pyscript/media.py</code> <pre><code>def __init__(self, device):\n\"\"\"\n    Create a Device wrapper around a MediaDeviceInfo `device`.\n    \"\"\"\nself._device_info = device\n</code></pre>"},{"location":"api/media/#pyscript.media.Device.__getitem__","title":"<code>__getitem__(key)</code>","text":"<p>Support bracket notation for JavaScript interop.</p> <p>Allows accessing properties via <code>device[\"id\"]</code> syntax. Necessary when Device instances are proxied to JavaScript.</p> Source code in <code>pyscript/media.py</code> <pre><code>def __getitem__(self, key):\n\"\"\"\n    Support bracket notation for JavaScript interop.\n    Allows accessing properties via `device[\"id\"]` syntax. Necessary\n    when Device instances are proxied to JavaScript.\n    \"\"\"\nreturn getattr(self, key)\n</code></pre>"},{"location":"api/media/#pyscript.media.Device.request_stream","title":"<code>request_stream(audio=False, video=True)</code>  <code>async</code> <code>classmethod</code>","text":"<p>Request a media stream with the specified constraints.</p> <p>This is a class method that requests access to media devices matching the given <code>audio</code> and <code>video</code> constraints. The browser will prompt the user for permission if needed and return a <code>MediaStream</code> object that can be assigned to video/audio elements.</p> <p>Simple boolean constraints for <code>audio</code> and <code>video</code> can be used to request default devices. More complex constraints can be specified as dictionaries conforming to the MediaTrackConstraints interface.</p> <pre><code>from pyscript import document\nfrom pyscript.media import Device\n# Get default video stream.\nstream = await Device.request_stream()\n# Get stream with specific constraints.\nstream = await Device.request_stream(\nvideo={\"width\": 1920, \"height\": 1080}\n)\n# Get audio and video.\nstream = await Device.request_stream(audio=True, video=True)\n# Use the stream.\nvideo_el = document.getElementById(\"camera\")\nvideo_el.srcObject = stream\n</code></pre> <p>This method will trigger a browser permission dialog on first use.</p> Source code in <code>pyscript/media.py</code> <pre><code>@classmethod\nasync def request_stream(cls, audio=False, video=True):\n\"\"\"\n    Request a media stream with the specified constraints.\n    This is a class method that requests access to media devices matching\n    the given `audio` and `video` constraints. The browser will prompt the\n    user for permission if needed and return a `MediaStream` object that\n    can be assigned to video/audio elements.\n    Simple boolean constraints for `audio` and `video` can be used to\n    request default devices. More complex constraints can be specified as\n    dictionaries conforming to\n    [the MediaTrackConstraints interface](https://developer.mozilla.org/en-US/docs/Web/API/MediaTrackConstraints).\n    ```python\n    from pyscript import document\n    from pyscript.media import Device\n    # Get default video stream.\n    stream = await Device.request_stream()\n    # Get stream with specific constraints.\n    stream = await Device.request_stream(\n        video={\"width\": 1920, \"height\": 1080}\n    )\n    # Get audio and video.\n    stream = await Device.request_stream(audio=True, video=True)\n    # Use the stream.\n    video_el = document.getElementById(\"camera\")\n    video_el.srcObject = stream\n    ```\n    This method will trigger a browser permission dialog on first use.\n    \"\"\"\noptions = {}\nif isinstance(audio, bool):\noptions[\"audio\"] = audio\nelif isinstance(audio, dict):\n# audio is a dict of constraints (sampleRate, echoCancellation etc...).\noptions[\"audio\"] = audio\nif isinstance(video, bool):\noptions[\"video\"] = video\nelif isinstance(video, dict):\n# video is a dict of constraints (width, height etc...).\noptions[\"video\"] = video\nreturn await window.navigator.mediaDevices.getUserMedia(to_js(options))\n</code></pre>"},{"location":"api/media/#pyscript.media.Device.load","title":"<code>load(audio=False, video=True)</code>  <code>async</code> <code>classmethod</code>","text":"<p>Warning</p> <p>Deprecated: Use <code>request_stream()</code> instead.</p> <p>This method is retained for backwards compatibility but will be removed in a future release. Please use <code>request_stream()</code> instead.</p> Source code in <code>pyscript/media.py</code> <pre><code>@classmethod\nasync def load(cls, audio=False, video=True):\n\"\"\"\n    !!! warning\n        **Deprecated: Use `request_stream()` instead.**\n        This method is retained for backwards compatibility but will be\n        removed in a future release. Please use `request_stream()` instead.\n    \"\"\"\nreturn await cls.request_stream(audio=audio, video=video)\n</code></pre>"},{"location":"api/media/#pyscript.media.Device.get_stream","title":"<code>get_stream()</code>  <code>async</code>","text":"<p>Get a media stream from this specific device.</p> <pre><code>from pyscript.media import list_devices\n# List all devices.\ndevices = await list_devices()\n# Find a specific camera.\nmy_camera = None\nfor device in devices:\nif device.kind == \"videoinput\" and \"USB\" in device.label:\nmy_camera = device\nbreak\n# Get a stream from that specific camera.\nif my_camera:\nstream = await my_camera.get_stream()\n</code></pre> <p>This will trigger a permission dialog if the user hasn't already granted permission for this device type.</p> Source code in <code>pyscript/media.py</code> <pre><code>async def get_stream(self):\n\"\"\"\n    Get a media stream from this specific device.\n    ```python\n    from pyscript.media import list_devices\n    # List all devices.\n    devices = await list_devices()\n    # Find a specific camera.\n    my_camera = None\n    for device in devices:\n        if device.kind == \"videoinput\" and \"USB\" in device.label:\n            my_camera = device\n            break\n    # Get a stream from that specific camera.\n    if my_camera:\n        stream = await my_camera.get_stream()\n    ```\n    This will trigger a permission dialog if the user hasn't already\n    granted permission for this device type.\n    \"\"\"\n# Extract media type from device kind (e.g., \"videoinput\" -&gt; \"video\").\nmedia_type = self.kind.replace(\"input\", \"\").replace(\"output\", \"\")\n# Request stream with exact device ID constraint.\noptions = {media_type: {\"deviceId\": {\"exact\": self.id}}}\nreturn await self.request_stream(**options)\n</code></pre>"},{"location":"api/media/#pyscript.media.list_devices","title":"<code>list_devices()</code>  <code>async</code>","text":"<p>Returns a list of all media devices currently available to the browser, such as microphones, cameras, and speakers.</p> <pre><code>from pyscript.media import list_devices\n# Get all devices.\ndevices = await list_devices()\n# Print device information.\nfor device in devices:\nprint(f\"{device.kind}: {device.label} (ID: {device.id})\")\n# Filter for specific device types.\ncameras = [d for d in devices if d.kind == \"videoinput\"]\nmicrophones = [d for d in devices if d.kind == \"audioinput\"]\nspeakers = [d for d in devices if d.kind == \"audiooutput\"]\n</code></pre> <p>The returned list will omit devices that are blocked by the document Permission Policy (microphone, camera, speaker-selection) or for which the user has not granted explicit permission.</p> <p>For security and privacy, device labels may be empty strings until permission is granted. See this document for more information about this web standard.</p> Source code in <code>pyscript/media.py</code> <pre><code>async def list_devices():\n\"\"\"\n    Returns a list of all media devices currently available to the browser,\n    such as microphones, cameras, and speakers.\n    ```python\n    from pyscript.media import list_devices\n    # Get all devices.\n    devices = await list_devices()\n    # Print device information.\n    for device in devices:\n        print(f\"{device.kind}: {device.label} (ID: {device.id})\")\n    # Filter for specific device types.\n    cameras = [d for d in devices if d.kind == \"videoinput\"]\n    microphones = [d for d in devices if d.kind == \"audioinput\"]\n    speakers = [d for d in devices if d.kind == \"audiooutput\"]\n    ```\n    The returned list will omit devices that are blocked by the document\n    [Permission Policy](https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/Permissions_Policy)\n    (microphone, camera, speaker-selection) or for\n    which the user has not granted explicit permission.\n    For security and privacy, device labels may be empty strings until\n    permission is granted. See\n    [this document](https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/enumerateDevices)\n    for more information about this web standard.\n    \"\"\"\ndevice_infos = await window.navigator.mediaDevices.enumerateDevices()\nreturn [Device(device_info) for device_info in device_infos]\n</code></pre>"},{"location":"api/storage/","title":"<code>pyscript.storage</code>","text":"<p>This module wraps the browser's IndexedDB persistent storage to provide a familiar Python dictionary API. Data is automatically serialized and persisted, surviving page reloads and browser restarts.</p> <p>Storage is persistent per origin (domain), isolated between different sites for security. Browsers typically allow each origin to store up to 10-60% of total disk space, depending on browser and configuration.</p> <p>What this module provides:</p> <ul> <li>A <code>dict</code>-like API (get, set, delete, iterate).</li> <li>Automatic serialization of common Python types.</li> <li>Background persistence with optional explicit <code>sync()</code>.</li> <li>Support for custom <code>Storage</code> subclasses.</li> </ul> <pre><code>from pyscript import storage\n# Create or open a named storage.\nmy_data = await storage(\"user-preferences\")\n# Use like a regular dictionary.\nmy_data[\"theme\"] = \"dark\"\nmy_data[\"font_size\"] = 14\nmy_data[\"settings\"] = {\"notifications\": True, \"sound\": False}\n# Changes are queued automatically.\n# To ensure immediate write, sync explicitly.\nawait my_data.sync()\n# Read values (survives page reload).\ntheme = my_data.get(\"theme\", \"light\")\n</code></pre> <p>Common types are automatically serialized: <code>bool</code>, <code>int</code>, <code>float</code>, <code>str</code>, <code>None</code>, <code>list</code>, <code>dict</code>, <code>tuple</code>. Binary data (<code>bytearray</code>, <code>memoryview</code>) can be stored as single values but not nested in structures.</p> <p>Tuples are deserialized as lists due to IndexedDB limitations.</p> <p>Info</p> <p>Browsers typically allow 10-60% of total disk space per origin. Chrome and Edge allow up to 60%, Firefox up to 10 GiB (or 10% of disk, whichever is smaller). Safari varies by app type. These limits are unlikely to be reached in typical usage.</p>"},{"location":"api/storage/#pyscript.storage.Storage","title":"<code>Storage</code>","text":"<p>               Bases: <code>dict</code></p> <p>A persistent dictionary backed by the browser's IndexedDB.</p> <p>This class provides a dict-like interface with automatic persistence. Changes are queued for background writing, with optional explicit synchronization via <code>sync()</code>.</p> <p>Inherits from <code>dict</code>, so all standard dictionary methods work as expected.</p> <pre><code>from pyscript import storage\n# Open a storage.\nprefs = await storage(\"preferences\")\n# Use as a dictionary.\nprefs[\"color\"] = \"blue\"\nprefs[\"count\"] = 42\n# Iterate like a dict.\nfor key, value in prefs.items():\nprint(f\"{key}: {value}\")\n# Ensure writes complete immediately.\nawait prefs.sync()\n</code></pre> <p>Sometimes you may need to subclass <code>Storage</code> to add custom behavior:</p> <pre><code>from pyscript import storage, Storage, window\nclass LoggingStorage(Storage):\ndef __setitem__(self, key, value):\nwindow.console.log(f\"Setting {key} = {value}\")\nsuper().__setitem__(key, value)\nmy_store = await storage(\"app-data\", storage_class=LoggingStorage)\nmy_store[\"test\"] = 123  # Logs to console.\n</code></pre> Source code in <code>pyscript/storage.py</code> <pre><code>class Storage(dict):\n\"\"\"\n    A persistent dictionary backed by the browser's IndexedDB.\n    This class provides a dict-like interface with automatic persistence.\n    Changes are queued for background writing, with optional explicit\n    synchronization via `sync()`.\n    Inherits from `dict`, so all standard dictionary methods work as expected.\n    ```python\n    from pyscript import storage\n    # Open a storage.\n    prefs = await storage(\"preferences\")\n    # Use as a dictionary.\n    prefs[\"color\"] = \"blue\"\n    prefs[\"count\"] = 42\n    # Iterate like a dict.\n    for key, value in prefs.items():\n        print(f\"{key}: {value}\")\n    # Ensure writes complete immediately.\n    await prefs.sync()\n    ```\n    Sometimes you may need to subclass `Storage` to add custom behavior:\n    ```python\n    from pyscript import storage, Storage, window\n    class LoggingStorage(Storage):\n        def __setitem__(self, key, value):\n            window.console.log(f\"Setting {key} = {value}\")\n            super().__setitem__(key, value)\n    my_store = await storage(\"app-data\", storage_class=LoggingStorage)\n    my_store[\"test\"] = 123  # Logs to console.\n    ```\n    \"\"\"\ndef __init__(self, store):\n\"\"\"\n        Create a Storage instance wrapping an IndexedDB `store` (a JS\n        proxy).\n        \"\"\"\nsuper().__init__(\n{key: _convert_from_idb(value) for key, value in store.entries()}\n)\nself._store = store\ndef __delitem__(self, key):\n\"\"\"\n        Delete an item from storage via its `key`.\n        The deletion is queued for persistence. Use `sync()` to ensure\n        immediate completion.\n        \"\"\"\nself._store.delete(key)\nsuper().__delitem__(key)\ndef __setitem__(self, key, value):\n\"\"\"\n        Set a `key` to a `value` in storage.\n        The change is queued for persistence. Use `sync()` to ensure\n        immediate completion. The `value` must be a supported type for\n        serialization.\n        \"\"\"\nself._store.set(key, _convert_to_idb(value))\nsuper().__setitem__(key, value)\ndef clear(self):\n\"\"\"\n        Remove all items from storage.\n        The `clear()` operation is queued for persistence. Use `sync()` to ensure\n        immediate completion.\n        \"\"\"\nself._store.clear()\nsuper().clear()\nasync def sync(self):\n\"\"\"\n        Force immediate synchronization to IndexedDB.\n        By default, storage operations are queued and written asynchronously.\n        Call `sync()` when you need to guarantee changes are persisted immediately,\n        such as before critical operations or page unload.\n        ```python\n        store = await storage(\"important-data\")\n        store[\"critical_value\"] = data\n        # Ensure it's written before proceeding.\n        await store.sync()\n        ```\n        This is a blocking operation that waits for IndexedDB to complete\n        the write.\n        \"\"\"\nawait self._store.sync()\n</code></pre>"},{"location":"api/storage/#pyscript.storage.Storage.__init__","title":"<code>__init__(store)</code>","text":"<p>Create a Storage instance wrapping an IndexedDB <code>store</code> (a JS proxy).</p> Source code in <code>pyscript/storage.py</code> <pre><code>def __init__(self, store):\n\"\"\"\n    Create a Storage instance wrapping an IndexedDB `store` (a JS\n    proxy).\n    \"\"\"\nsuper().__init__(\n{key: _convert_from_idb(value) for key, value in store.entries()}\n)\nself._store = store\n</code></pre>"},{"location":"api/storage/#pyscript.storage.Storage.__delitem__","title":"<code>__delitem__(key)</code>","text":"<p>Delete an item from storage via its <code>key</code>.</p> <p>The deletion is queued for persistence. Use <code>sync()</code> to ensure immediate completion.</p> Source code in <code>pyscript/storage.py</code> <pre><code>def __delitem__(self, key):\n\"\"\"\n    Delete an item from storage via its `key`.\n    The deletion is queued for persistence. Use `sync()` to ensure\n    immediate completion.\n    \"\"\"\nself._store.delete(key)\nsuper().__delitem__(key)\n</code></pre>"},{"location":"api/storage/#pyscript.storage.Storage.__setitem__","title":"<code>__setitem__(key, value)</code>","text":"<p>Set a <code>key</code> to a <code>value</code> in storage.</p> <p>The change is queued for persistence. Use <code>sync()</code> to ensure immediate completion. The <code>value</code> must be a supported type for serialization.</p> Source code in <code>pyscript/storage.py</code> <pre><code>def __setitem__(self, key, value):\n\"\"\"\n    Set a `key` to a `value` in storage.\n    The change is queued for persistence. Use `sync()` to ensure\n    immediate completion. The `value` must be a supported type for\n    serialization.\n    \"\"\"\nself._store.set(key, _convert_to_idb(value))\nsuper().__setitem__(key, value)\n</code></pre>"},{"location":"api/storage/#pyscript.storage.Storage.clear","title":"<code>clear()</code>","text":"<p>Remove all items from storage.</p> <p>The <code>clear()</code> operation is queued for persistence. Use <code>sync()</code> to ensure immediate completion.</p> Source code in <code>pyscript/storage.py</code> <pre><code>def clear(self):\n\"\"\"\n    Remove all items from storage.\n    The `clear()` operation is queued for persistence. Use `sync()` to ensure\n    immediate completion.\n    \"\"\"\nself._store.clear()\nsuper().clear()\n</code></pre>"},{"location":"api/storage/#pyscript.storage.Storage.sync","title":"<code>sync()</code>  <code>async</code>","text":"<p>Force immediate synchronization to IndexedDB.</p> <p>By default, storage operations are queued and written asynchronously. Call <code>sync()</code> when you need to guarantee changes are persisted immediately, such as before critical operations or page unload.</p> <pre><code>store = await storage(\"important-data\")\nstore[\"critical_value\"] = data\n# Ensure it's written before proceeding.\nawait store.sync()\n</code></pre> <p>This is a blocking operation that waits for IndexedDB to complete the write.</p> Source code in <code>pyscript/storage.py</code> <pre><code>async def sync(self):\n\"\"\"\n    Force immediate synchronization to IndexedDB.\n    By default, storage operations are queued and written asynchronously.\n    Call `sync()` when you need to guarantee changes are persisted immediately,\n    such as before critical operations or page unload.\n    ```python\n    store = await storage(\"important-data\")\n    store[\"critical_value\"] = data\n    # Ensure it's written before proceeding.\n    await store.sync()\n    ```\n    This is a blocking operation that waits for IndexedDB to complete\n    the write.\n    \"\"\"\nawait self._store.sync()\n</code></pre>"},{"location":"api/storage/#pyscript.storage.storage","title":"<code>storage(name='', storage_class=Storage)</code>  <code>async</code>","text":"<p>Open or create persistent storage with a unique <code>name</code> and optional <code>storage_class</code> (used to extend the default <code>Storage</code> based behavior).</p> <p>Each storage is isolated by name within the current origin (domain). If the storage doesn't exist, it will be created. If it does exist, its current contents will be loaded.</p> <p>This function returns a <code>Storage</code> instance (or custom subclass instance) acting as a persistent dictionary. A <code>ValueError</code> is raised if <code>name</code> is empty or not provided.</p> <pre><code>from pyscript import storage\n# Basic usage.\nuser_data = await storage(\"user-profile\")\nuser_data[\"name\"] = \"Alice\"\nuser_data[\"age\"] = 30\n# Multiple independent storages.\nsettings = await storage(\"app-settings\")\ncache = await storage(\"api-cache\")\n# With custom Storage class.\nclass ValidatingStorage(Storage):\ndef __setitem__(self, key, value):\nif not isinstance(key, str):\nraise TypeError(\"Keys must be strings\")\nsuper().__setitem__(key, value)\nvalidated = await storage(\"validated-data\", ValidatingStorage)\n</code></pre> <p>Storage names are automatically prefixed with <code>\"@pyscript/\"</code> to namespace them within IndexedDB.</p> Source code in <code>pyscript/storage.py</code> <pre><code>async def storage(name=\"\", storage_class=Storage):\n\"\"\"\n    Open or create persistent storage with a unique `name` and optional\n    `storage_class` (used to extend the default `Storage` based behavior).\n    Each storage is isolated by name within the current origin (domain).\n    If the storage doesn't exist, it will be created. If it does exist,\n    its current contents will be loaded.\n    This function returns a `Storage` instance (or custom subclass instance)\n    acting as a persistent dictionary. A `ValueError` is raised if `name` is\n    empty or not provided.\n    ```python\n    from pyscript import storage\n    # Basic usage.\n    user_data = await storage(\"user-profile\")\n    user_data[\"name\"] = \"Alice\"\n    user_data[\"age\"] = 30\n    # Multiple independent storages.\n    settings = await storage(\"app-settings\")\n    cache = await storage(\"api-cache\")\n    # With custom Storage class.\n    class ValidatingStorage(Storage):\n        def __setitem__(self, key, value):\n            if not isinstance(key, str):\n                raise TypeError(\"Keys must be strings\")\n            super().__setitem__(key, value)\n    validated = await storage(\"validated-data\", ValidatingStorage)\n    ```\n    Storage names are automatically prefixed with `\"@pyscript/\"` to\n    namespace them within IndexedDB.\n    \"\"\"\nif not name:\nraise ValueError(\"Storage name must be a non-empty string\")\nunderlying_store = await _polyscript_storage(f\"@pyscript/{name}\")\nreturn storage_class(underlying_store)\n</code></pre>"},{"location":"api/util/","title":"<code>pyscript.util</code>","text":"<p>This module contains general-purpose utility functions that don't fit into more specific modules. These utilities handle cross-platform compatibility between Pyodide and MicroPython, feature detection, and common type conversions:</p> <ul> <li><code>as_bytearray</code>: Convert JavaScript <code>ArrayBuffer</code> to Python <code>bytearray</code>.</li> <li><code>NotSupported</code>: Placeholder for unavailable features in specific contexts.</li> <li><code>is_awaitable</code>: Detect <code>async</code> functions across Python implementations.</li> </ul> <p>These utilities are primarily used internally by PyScript but are available for use in application code when needed.</p>"},{"location":"api/util/#pyscript.util.NotSupported","title":"<code>NotSupported</code>","text":"<p>Small helper that raises exceptions if you try to get/set any attribute on it.</p> Source code in <code>pyscript/util.py</code> <pre><code>class NotSupported:\n\"\"\"\n    Small helper that raises exceptions if you try to get/set any attribute on\n    it.\n    \"\"\"\ndef __init__(self, name, error):\nobject.__setattr__(self, \"name\", name)\nobject.__setattr__(self, \"error\", error)\ndef __repr__(self):\nreturn f\"&lt;NotSupported {self.name} [{self.error}]&gt;\"\ndef __getattr__(self, attr):\nraise AttributeError(self.error)\ndef __setattr__(self, attr, value):\nraise AttributeError(self.error)\ndef __call__(self, *args):\nraise TypeError(self.error)\n</code></pre>"},{"location":"api/util/#pyscript.util.as_bytearray","title":"<code>as_bytearray(buffer)</code>","text":"<p>Given a JavaScript <code>ArrayBuffer</code>, convert it to a Python <code>bytearray</code> in a MicroPython friendly manner.</p> Source code in <code>pyscript/util.py</code> <pre><code>def as_bytearray(buffer):\n\"\"\"\n    Given a JavaScript `ArrayBuffer`, convert it to a Python `bytearray` in a\n    MicroPython friendly manner.\n    \"\"\"\nui8a = js.Uint8Array.new(buffer)\nsize = ui8a.length\nba = bytearray(size)\nfor i in range(size):\nba[i] = ui8a[i]\nreturn ba\n</code></pre>"},{"location":"api/util/#pyscript.util.is_awaitable","title":"<code>is_awaitable(obj)</code>","text":"<p>Returns a boolean indication if the passed in obj is an awaitable function. This is interpreter agnostic.</p> <p>Info</p> <p>MicroPython treats awaitables as generator functions, and if the object is a closure containing an async function or a bound method we need to work carefully.</p> Source code in <code>pyscript/util.py</code> <pre><code>def is_awaitable(obj):\n\"\"\"\n    Returns a boolean indication if the passed in obj is an awaitable\n    function. This is interpreter agnostic.\n    !!! info\n        MicroPython treats awaitables as generator functions, and if\n        the object is a closure containing an async function or a bound method\n        we need to work carefully.\n    \"\"\"\nfrom pyscript import config\nif config[\"type\"] == \"mpy\":\n# MicroPython doesn't appear to have a way to determine if a closure is\n# an async function except via the repr. This is a bit hacky.\nr = repr(obj)\nif \"&lt;closure &lt;generator&gt;\" in r:\nreturn True\n# Same applies to bound methods.\nif \"&lt;bound_method\" in r and \"&lt;generator&gt;\" in r:\nreturn True\n# In MicroPython, generator functions are awaitable.\nreturn inspect.isgeneratorfunction(obj)\nreturn inspect.iscoroutinefunction(obj)\n</code></pre>"},{"location":"api/web/","title":"<code>pyscript.web</code>","text":"<p>A lightweight Pythonic interface to the DOM and HTML elements that helps you interact with web pages, making it easy to find, create, manipulate, and compose HTML elements from Python.</p> <p>Highlights include:</p> <p>Use the <code>page</code> object to find elements on the current page:</p> <pre><code>from pyscript import web\n# Find by CSS selector (returns an ElementCollection).\ndivs = web.page.find(\"div\")\nbuttons = web.page.find(\".button-class\")\n# Get element by ID (returns single Element or None).\nheader = web.page[\"header-id\"]\nheader = web.page[\"#header-id\"]  # the \"#\" prefix is optional.\n# Access page structure.\nweb.page.body.append(some_element)\nweb.page.title = \"New Page Title\"\n</code></pre> <p>Create new elements and compose them together:</p> <pre><code># Create simple elements.\ndiv = web.div(\"Hello, World!\")\nparagraph = web.p(\"Some text\", id=\"my-para\", className=\"text-content\")\n# Compose elements together.\ncontainer = web.div(\nweb.h1(\"Title\"),\nweb.p(\"First paragraph\"),\nweb.p(\"Second paragraph\"),\nid=\"container\"\n)\n# Add to the page.\nweb.page.body.append(container)\n# Create with initial attributes.\nlink = web.a(\n\"Click me\",\nhref=\"https://example.com\",\ntarget=\"_blank\",\nclasses=[\"link\", \"external\"]\n)\n</code></pre> <p>Modify element content and attributes:</p> <pre><code># Update content.\nelement.innerHTML = \"&lt;b&gt;Bold text&lt;/b&gt;\"\nelement.textContent = \"Plain text\"\n# Update attributes.\nelement.id = \"new-id\"\nelement.title = \"Tooltip text\"\n# Bulk update with convenience method.\nelement.update(\nclasses=[\"active\", \"highlighted\"],\nstyle={\"color\": \"red\", \"font-size\": \"16px\"},\ntitle=\"Updated tooltip\"\n)\n</code></pre> <p>An element's CSS classes behave like a Python <code>set</code>:</p> <pre><code># Add and remove classes\nelement.classes.add(\"active\")\nelement.classes.add(\"highlighted\")\nelement.classes.remove(\"hidden\")\n# Check membership.\nif \"active\" in element.classes:\nprint(\"Element is active\")\n# Clear all classes.\nelement.classes.clear()\n# Discard (no error if missing).\nelement.classes.discard(\"maybe-not-there\")\n</code></pre> <p>An element's styles behave like a Python <code>dict</code>:</p> <pre><code># Set individual styles.\nelement.style[\"color\"] = \"red\"\nelement.style[\"background-color\"] = \"#f0f0f0\"\nelement.style[\"font-size\"] = \"16px\"\n# Remove a style.\ndel element.style[\"margin\"]\n# Check if style is set.\nif \"color\" in element.style:\nprint(f\"Color is {element.style['color']}\")\n</code></pre> <p>Update multiple elements at once via an <code>ElementCollection</code>:</p> <pre><code># Find multiple elements (returns an ElementCollection).\nitems = web.page.find(\".list-item\")\n# Iterate over collection.\nfor item in items:\nitem.innerHTML = \"Updated\"\nitem.classes.add(\"processed\")\n# Bulk update all elements.\nitems.update_all(\ninnerHTML=\"Hello\",\nclassName=\"updated-item\"\n)\n# Index and slice collections.\nfirst = items[0]\nsubset = items[1:3]\n# Get an element by ID within the collection.\nspecial = items[\"special-id\"]\n# Find descendants within the collection.\nsubitems = items.find(\".sub-item\")\n</code></pre> <p>Manage <code>select</code> element options (also for <code>datalist</code> and <code>optgroup</code>):</p> <pre><code># Get existing select.\nselect = web.page[\"my-select\"]\n# Add options.\nselect.options.add(value=\"1\", html=\"Option 1\")\nselect.options.add(value=\"2\", html=\"Option 2\", selected=True)\n# Get selected option.\nselected = select.options.selected\nprint(f\"Selected: {selected.value}\")\n# Iterate over options.\nfor option in select.options:\nprint(f\"{option.value}: {option.innerHTML}\")\n# Clear all options.\nselect.options.clear()\n# Remove specific option by index.\nselect.options.remove(0)\n</code></pre> <p>Attach event handlers to elements:</p> <pre><code>from pyscript import when\nbutton = web.button(\"Click me\", id=\"my-button\")\n# Use the when decorator.\n@when(\"click\", button)\ndef handle_click(event):\nprint(\"Button clicked!\")\n# Or add directly to the event.\ndef another_handler(event):\nprint(\"Another handler\")\nbutton.on_click.add_listener(another_handler)\n# Pass handler during creation.\nbutton = web.button(\"Click\", on_click=handle_click)\n</code></pre> <p>All <code>Element</code> instances provide direct access to the underlying DOM element via attribute delegation:</p> <pre><code># Most DOM methods are accessible directly.\nelement.scrollIntoView()\nelement.focus()\nelement.blur()\n# But we do have a historic convenience method for scrolling into view.\nelement.show_me()  # Calls scrollIntoView()\n# Access the raw DOM element when needed for special cases.\ndom_element = element._dom_element\n</code></pre> <p>The main entry point is the <code>page</code> object, which represents the current document and provides access to common elements like <code>page.body</code> and methods like <code>page.find()</code> for querying the DOM.</p>"},{"location":"api/web/#pyscript.web.page","title":"<code>page = Page()</code>  <code>module-attribute</code>","text":"<p>A reference to the current web page. An instance of the <code>Page</code> class.</p>"},{"location":"api/web/#pyscript.web.CONTAINER_TAGS","title":"<code>CONTAINER_TAGS = ['a', 'abbr', 'address', 'article', 'aside', 'audio', 'b', 'blockquote', 'body', 'button', 'caption', 'cite', 'code', 'colgroup', 'data', 'dd', 'del', 'details', 'dialog', 'div', 'dl', 'dt', 'em', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'html', 'i', 'iframe', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'menu', 'meta', 'meter', 'nav', 'object', 'ol', 'option', 'output', 'p', 'param', 'picture', 'pre', 'progress', 'q', 's', 'script', 'section', 'small', 'span', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'title', 'tr', 'u', 'ul', 'var', 'wbr']</code>  <code>module-attribute</code>","text":"<p>Container elements that can have children. Each becomes a class in the <code>pyscript.web</code> namespace and corresponds to an HTML tag.</p>"},{"location":"api/web/#pyscript.web.VOID_TAGS","title":"<code>VOID_TAGS = ['area', 'base', 'br', 'col', 'embed', 'hr', 'img', 'input', 'link', 'source', 'track']</code>  <code>module-attribute</code>","text":"<p>Void elements that cannot have children. Each becomes a class in the <code>pyscript.web</code> namespace and corresponds to an HTML tag.</p>"},{"location":"api/web/#pyscript.web.Element","title":"<code>Element</code>","text":"<p>The base class for all HTML elements.</p> <p>Provides a Pythonic interface to DOM elements with support for attributes, events, styles, classes, and DOM manipulation. It can create new elements or wrap existing DOM elements.</p> <p>Elements are typically created using the tag-specific classes found within this namespace (e.g. <code>web.div</code>, <code>web.span</code>, <code>web.button</code>):</p> <pre><code>from pyscript import web\n# Create a simple div.\ndiv = web.div(\"Hello, World!\")\n# Create with attributes.\nlink = web.a(\"Click me\", href=\"https://example.com\", target=\"_blank\")\n# Create with classes and styles.\nbutton = web.button(\n\"Submit\",\nclasses=[\"primary\", \"large\"],\nstyle={\"background-color\": \"blue\", \"color\": \"white\"},\nid=\"submit-btn\"\n)\n</code></pre> <p>Info</p> <p>Some elements have an underscore suffix in their class names (e.g. <code>select_</code>, <code>input_</code>).</p> <p>This is to avoid clashes with Python keywords. The underscore is removed when determining the actual HTML tag name.</p> <p>Wrap existing DOM elements found on the page:</p> <pre><code># Find and wrap an element by CSS selector.\nexisting = web.page.find(\".my_class\")[0]\n# Or, better, just use direct ID lookup (with or without the\n# leading '#').\nexisting = web.page[\"my-element\"]\n</code></pre> <p>Element attributes are accessible as Python properties:</p> <pre><code># Get attributes.\nelement_id = div.id\nelement_title = div.title\nelement_href = link.href\n# Set attributes.\ndiv.id = \"new-id\"\ndiv.title = \"Tooltip text\"\nlink.href = \"https://new-url.com\"\n# HTML content.\ndiv.innerHTML = \"&lt;b&gt;Bold text&lt;/b&gt;\"\ndiv.textContent = \"Plain text\"\n</code></pre> <p>CSS classes are managed through a <code>set</code>-like interface:</p> <pre><code># Add classes.\nelement.classes.add(\"active\")\nelement.classes.add(\"highlighted\")\n# Remove classes.\nelement.classes.remove(\"inactive\")\nelement.classes.discard(\"maybe-missing\")  # No error if absent\n# Check membership.\nif \"active\" in element.classes:\nprint(\"Element is active\")\n# Iterate over classes.\nfor cls in element.classes:\nprint(cls)\n</code></pre> <p>Explicit CSS styles are managed through a <code>dict</code>-like interface:</p> <pre><code># Set styles using CSS property names (hyphenated).\nelement.style[\"color\"] = \"red\"\nelement.style[\"background-color\"] = \"#f0f0f0\"\nelement.style[\"font-size\"] = \"16px\"\n# Get styles.\ncolor = element.style[\"color\"]\n# Remove styles.\ndel element.style[\"margin\"]\n</code></pre> <p>Add, find, and navigate elements:</p> <pre><code># Append children.\nparent.append(child_element)\nparent.append(child1, child2, child3)  # Multiple at once\n# Find descendants using CSS selectors.\nbuttons = parent.find(\"button\")\nitems = parent.find(\".item-class\")\n# Navigate the tree.\nchild = parent.children[0]\nparent_elem = child.parent\n# Access children by index or slice.\nfirst_child = parent[0]\nfirst_three = parent[0:3]\n# Get a child explicitly by ID. Returns None if not found.\nspecific = parent[\"child-id\"]\n</code></pre> <p>Attach event listeners to elements:</p> <pre><code>button = web.button(\"Click me\")\n# Use the @when decorator with event name.\nfrom pyscript import when\n@when(\"click\", button)\ndef handle_click(event):\nprint(\"Clicked!\")\n# Or use the on_* event directly with @when.\n@when(button.on_click)\ndef handle_click(event):\nprint(\"Also works!\")\n# Pass handlers during element creation.\nbutton = web.button(\"Click\", on_click=handle_click)\n</code></pre> <p>Update multiple properties at once:</p> <pre><code>element.update(\nclasses=[\"active\", \"highlighted\"],\nstyle={\"color\": \"red\", \"font-size\": \"20px\"},\nid=\"updated-id\",\ntitle=\"New tooltip\"\n)\n</code></pre> <p>Warning</p> <p>Some HTML attributes clash with Python keywords and use trailing underscores.</p> <p>Use <code>for_</code> instead of <code>for</code>, and <code>class_</code> instead of <code>class</code>.</p> <pre><code># The 'for' attribute (on labels)\nlabel = web.label(\"Username\", for_=\"username-input\")\n# The 'class' attribute (although 'classes' is preferred)\ndiv.class_ = \"my-class\"\n</code></pre> <p>Create copies of elements:</p> <pre><code>original = web.div(\"Original content\", id=\"original\")\nclone = original.clone(clone_id=\"cloned\")\n</code></pre> <p>Access the underlying DOM element when needed:</p> <pre><code># Most DOM properties and methods are accessible directly.\nelement.focus()\nelement.scrollIntoView()\nbounding_rect = element.getBoundingClientRect()\n# Or access the raw DOM element.\ndom_element = element._dom_element\n</code></pre> Source code in <code>pyscript/web.py</code> <pre><code>class Element:\n\"\"\"\n    The base class for all [HTML elements](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements).\n    Provides a Pythonic interface to DOM elements with support for attributes,\n    events, styles, classes, and DOM manipulation. It can create new elements\n    or wrap existing DOM elements.\n    Elements are typically created using the tag-specific classes found\n    within this namespace (e.g. `web.div`, `web.span`, `web.button`):\n    ```python\n    from pyscript import web\n    # Create a simple div.\n    div = web.div(\"Hello, World!\")\n    # Create with attributes.\n    link = web.a(\"Click me\", href=\"https://example.com\", target=\"_blank\")\n    # Create with classes and styles.\n    button = web.button(\n        \"Submit\",\n        classes=[\"primary\", \"large\"],\n        style={\"background-color\": \"blue\", \"color\": \"white\"},\n        id=\"submit-btn\"\n    )\n    ```\n    !!! info\n        Some elements have an underscore suffix in their class names (e.g.\n        `select_`, `input_`).\n        This is to avoid clashes with Python keywords. The underscore is removed\n        when determining the actual HTML tag name.\n    Wrap existing DOM elements found on the page:\n    ```python\n    # Find and wrap an element by CSS selector.\n    existing = web.page.find(\".my_class\")[0]\n    # Or, better, just use direct ID lookup (with or without the\n    # leading '#').\n    existing = web.page[\"my-element\"]\n    ```\n    Element attributes are accessible as Python properties:\n    ```python\n    # Get attributes.\n    element_id = div.id\n    element_title = div.title\n    element_href = link.href\n    # Set attributes.\n    div.id = \"new-id\"\n    div.title = \"Tooltip text\"\n    link.href = \"https://new-url.com\"\n    # HTML content.\n    div.innerHTML = \"&lt;b&gt;Bold text&lt;/b&gt;\"\n    div.textContent = \"Plain text\"\n    ```\n    CSS classes are managed through a `set`-like interface:\n    ```python\n    # Add classes.\n    element.classes.add(\"active\")\n    element.classes.add(\"highlighted\")\n    # Remove classes.\n    element.classes.remove(\"inactive\")\n    element.classes.discard(\"maybe-missing\")  # No error if absent\n    # Check membership.\n    if \"active\" in element.classes:\n        print(\"Element is active\")\n    # Iterate over classes.\n    for cls in element.classes:\n        print(cls)\n    ```\n    Explicit CSS styles are managed through a `dict`-like interface:\n    ```python\n    # Set styles using CSS property names (hyphenated).\n    element.style[\"color\"] = \"red\"\n    element.style[\"background-color\"] = \"#f0f0f0\"\n    element.style[\"font-size\"] = \"16px\"\n    # Get styles.\n    color = element.style[\"color\"]\n    # Remove styles.\n    del element.style[\"margin\"]\n    ```\n    Add, find, and navigate elements:\n    ```python\n    # Append children.\n    parent.append(child_element)\n    parent.append(child1, child2, child3)  # Multiple at once\n    # Find descendants using CSS selectors.\n    buttons = parent.find(\"button\")\n    items = parent.find(\".item-class\")\n    # Navigate the tree.\n    child = parent.children[0]\n    parent_elem = child.parent\n    # Access children by index or slice.\n    first_child = parent[0]\n    first_three = parent[0:3]\n    # Get a child explicitly by ID. Returns None if not found.\n    specific = parent[\"child-id\"]\n    ```\n    Attach event listeners to elements:\n    ```python\n    button = web.button(\"Click me\")\n    # Use the @when decorator with event name.\n    from pyscript import when\n    @when(\"click\", button)\n    def handle_click(event):\n        print(\"Clicked!\")\n    # Or use the on_* event directly with @when.\n    @when(button.on_click)\n    def handle_click(event):\n        print(\"Also works!\")\n    # Pass handlers during element creation.\n    button = web.button(\"Click\", on_click=handle_click)\n    ```\n    Update multiple properties at once:\n    ```python\n    element.update(\n        classes=[\"active\", \"highlighted\"],\n        style={\"color\": \"red\", \"font-size\": \"20px\"},\n        id=\"updated-id\",\n        title=\"New tooltip\"\n    )\n    ```\n    !!! warning\n        **Some HTML attributes clash with Python keywords and use trailing\n        underscores**.\n    Use `for_` instead of `for`, and `class_` instead of `class`.\n    ```python\n    # The 'for' attribute (on labels)\n    label = web.label(\"Username\", for_=\"username-input\")\n    # The 'class' attribute (although 'classes' is preferred)\n    div.class_ = \"my-class\"\n    ```\n    Create copies of elements:\n    ```python\n    original = web.div(\"Original content\", id=\"original\")\n    clone = original.clone(clone_id=\"cloned\")\n    ```\n    Access the underlying DOM element when needed:\n    ```python\n    # Most DOM properties and methods are accessible directly.\n    element.focus()\n    element.scrollIntoView()\n    bounding_rect = element.getBoundingClientRect()\n    # Or access the raw DOM element.\n    dom_element = element._dom_element\n    ```\n    \"\"\"\n# Lookup table: tag name -&gt; Element subclass.\nelement_classes_by_tag_name = {}\n@classmethod\ndef get_tag_name(cls):\n\"\"\"\n        Get the HTML tag name for this class.\n        Classes ending with underscore (e.g. `input_`) have it removed to get\n        the actual HTML tag name.\n        \"\"\"\nreturn cls.__name__.replace(\"_\", \"\")\n@classmethod\ndef register_element_classes(cls, element_classes):\n\"\"\"\n        Register `Element` subclasses for tag-based lookup.\n        \"\"\"\nfor element_class in element_classes:\ntag_name = element_class.get_tag_name()\ncls.element_classes_by_tag_name[tag_name] = element_class\n@classmethod\ndef unregister_element_classes(cls, element_classes):\n\"\"\"\n        Unregister `Element` subclasses from tag-based lookup.\n        \"\"\"\nfor element_class in element_classes:\ntag_name = element_class.get_tag_name()\ncls.element_classes_by_tag_name.pop(tag_name, None)\n@classmethod\ndef wrap_dom_element(cls, dom_element):\n\"\"\"\n        Wrap a DOM element in the appropriate `Element` subclass.\n        Looks up the subclass by tag name. Unknown tags use the base `Element`\n        class.\n        \"\"\"\nelement_cls = cls.element_classes_by_tag_name.get(\ndom_element.tagName.lower(), cls\n)\nreturn element_cls(dom_element=dom_element)\ndef __init__(self, dom_element=None, classes=None, style=None, **kwargs):\n\"\"\"\n        Create or wrap a DOM element.\n        If `dom_element` is `None`, this creates a new element. Otherwise wraps\n        the provided DOM element. The `**kwargs` can include HTML attributes\n        and event handlers (names starting with `on_`).\n        \"\"\"\n# Create or wrap the DOM element.\nif is_none(dom_element):\nself._dom_element = document.createElement(type(self).get_tag_name())\nelse:\nself._dom_element = dom_element\n# Event handling.\nself._on_events = {}\nself.update(classes=classes, style=style, **kwargs)\ndef __eq__(self, obj):\n\"\"\"\n        Check equality by comparing underlying DOM elements.\n        \"\"\"\nreturn isinstance(obj, Element) and obj._dom_element == self._dom_element\ndef __getitem__(self, key):\n\"\"\"\n        Get an item within this element.\n        Behaviour depends on the key type:\n        - Integer: returns the child at that index.\n        - Slice: returns a collection of children in that slice.\n        - String: looks up an element by id (with or without '#' prefix).\n        ```python\n        element[0]          # First child.\n        element[1:3]        # Second and third children.\n        element[\"my-id\"]    # Element with id=\"my-id\" (or None).\n        element[\"#my-id\"]   # Same as above (# is optional).\n        ```\n        \"\"\"\nif isinstance(key, (int, slice)):\nreturn self.children[key]\nif isinstance(key, str):\nreturn _find_by_id(self._dom_element, key)\nraise TypeError(\nf\"Element indices must be integers, slices, or strings, \"\nf\"not {type(key).__name__}.\"\n)\ndef __getattr__(self, name):\n\"\"\"\n        Get an attribute from the element.\n        Attributes starting with `on_` return `Event` instances. Other\n        attributes are retrieved from the underlying DOM element.\n        \"\"\"\nif name.startswith(\"on_\"):\nreturn self.get_event(name)\ndom_name = self._normalize_attribute_name(name)\nreturn getattr(self._dom_element, dom_name)\ndef __setattr__(self, name, value):\n\"\"\"\n        Set an attribute on the element.\n        Private attributes (starting with `_`) are set on the Python object.\n        Public attributes are set on the underlying DOM element. Attributes\n        starting with `on_` are treated as events.\n        \"\"\"\nif name.startswith(\"_\"):\nsuper().__setattr__(name, value)\nelif name.startswith(\"on_\"):\n# Separate events...\nself.get_event(name).add_listener(value)\nelse:\n# ...from regular attributes.\ndom_name = self._normalize_attribute_name(name)\nsetattr(self._dom_element, dom_name, value)\ndef _normalize_attribute_name(self, name):\n\"\"\"\n        Normalize Python attribute names to DOM attribute names.\n        Removes trailing underscores and maps special cases.\n        \"\"\"\nif name.endswith(\"_\"):\nname = name[:-1]\nif name == \"for\":\nreturn \"htmlFor\"\nif name == \"class\":\nreturn \"className\"\nreturn name\ndef get_event(self, name):\n\"\"\"\n        Get an `Event` instance for the specified event name.\n        Event names must start with `on_` (e.g. `on_click`). Creates and\n        caches `Event` instances that are triggered when the DOM event fires.\n        \"\"\"\nif not name.startswith(\"on_\"):\nraise ValueError(\"Event names must start with 'on_'.\")\nevent_name = name[3:]  # Remove 'on_' prefix.\nif not hasattr(self._dom_element, event_name):\nraise ValueError(f\"Element has no '{event_name}' event.\")\nif name in self._on_events:\nreturn self._on_events[name]\n# Create Event instance and wire it to the DOM event.\nev = Event()\nself._on_events[name] = ev\nself._dom_element.addEventListener(event_name, create_proxy(ev.trigger))\nreturn ev\n@property\ndef children(self):\n\"\"\"\n        Return this element's children as an `ElementCollection`.\n        \"\"\"\nreturn ElementCollection.wrap_dom_elements(self._dom_element.children)\n@property\ndef classes(self):\n\"\"\"\n        Return the element's CSS classes as a `set`-like `Classes` object.\n        Supports set operations: `add`, `remove`, `discard`, `clear`.\n        Check membership with `in`, iterate with `for`, get length with `len()`.\n        ```python\n        element.classes.add(\"active\")\n        if \"disabled\" in element.classes:\n            ...\n        ```\n        \"\"\"\nif not hasattr(self, \"_classes\"):\nself._classes = Classes(self)\nreturn self._classes\n@property\ndef style(self):\n\"\"\"\n        Return the element's CSS styles as a `dict`-like `Style` object.\n        Access using `dict`-style syntax with standard\n        [CSS property names (hyphenated)](https://developer.mozilla.org/en-US/docs/Web/CSS/Reference).\n        ```python\n        element.style[\"background-color\"] = \"red\"\n        element.style[\"font-size\"] = \"16px\"\n        del element.style[\"margin\"]\n        ```\n        \"\"\"\nif not hasattr(self, \"_style\"):\nself._style = Style(self)\nreturn self._style\n@property\ndef parent(self):\n\"\"\"\n        Return this element's parent `Element`, or `None`.\n        \"\"\"\nif is_none(self._dom_element.parentElement):\nreturn None\nreturn Element.wrap_dom_element(self._dom_element.parentElement)\ndef append(self, *items):\n\"\"\"\n        Append items to this element's `children`.\n        Accepts `Element` instances, `ElementCollection` instances, lists,\n        tuples, raw DOM elements, and NodeLists.\n        \"\"\"\nfor item in items:\nif isinstance(item, Element):\nself._dom_element.appendChild(item._dom_element)\nelif isinstance(item, ElementCollection):\nfor element in item:\nself._dom_element.appendChild(element._dom_element)\nelif isinstance(item, (list, tuple)):\nfor child in item:\nself.append(child)\nelif hasattr(item, \"tagName\"):\n# Raw DOM element.\nself._dom_element.appendChild(item)\nelif hasattr(item, \"length\"):\n# NodeList or similar iterable.\nfor element in item:\nself._dom_element.appendChild(element)\nelse:\nraise TypeError(f\"Cannot append {type(item).__name__} to element.\")\ndef clone(self, clone_id=None):\n\"\"\"\n        Clone this element and its underlying DOM element.\n        Optionally assign a new `id` to the clone.\n        \"\"\"\nclone = Element.wrap_dom_element(self._dom_element.cloneNode(True))\nclone.id = clone_id\nreturn clone\ndef find(self, selector):\n\"\"\"\n        Find all descendant elements matching the\n        [CSS `selector`](https://developer.mozilla.org/en-US/docs/Web/CSS/Guides/Selectors).\n        Returns an `ElementCollection` (possibly empty).\n        ```python\n        element.find(\"div\")              # All div descendants.\n        element.find(\".my-class\")        # All elements with class.\n        element.find(\"#my-id\")           # Element with id (as collection).\n        element.find(\"div.my-class\")     # All divs with class.\n        ```\n        \"\"\"\nreturn _find_and_wrap(self._dom_element, selector)\ndef show_me(self):\n\"\"\"\n        Scroll this element into view.\n        \"\"\"\nself._dom_element.scrollIntoView()\ndef update(self, classes=None, style=None, **kwargs):\n\"\"\"\n        Update this element's `classes`, `style`, and `attributes`\n        (via arbitrary `**kwargs`).\n        Convenience method for bulk updates.\n        \"\"\"\nif classes:\nif isinstance(classes, str):\nself.classes.add(classes)\nelse:\nfor class_name in classes:\nself.classes.add(class_name)\nif style:\nfor key, value in style.items():\nself.style[key] = value\nfor name, value in kwargs.items():\nsetattr(self, name, value)\n</code></pre>"},{"location":"api/web/#pyscript.web.Element.children","title":"<code>children</code>  <code>property</code>","text":"<p>Return this element's children as an <code>ElementCollection</code>.</p>"},{"location":"api/web/#pyscript.web.Element.classes","title":"<code>classes</code>  <code>property</code>","text":"<p>Return the element's CSS classes as a <code>set</code>-like <code>Classes</code> object.</p> <p>Supports set operations: <code>add</code>, <code>remove</code>, <code>discard</code>, <code>clear</code>. Check membership with <code>in</code>, iterate with <code>for</code>, get length with <code>len()</code>.</p> <pre><code>element.classes.add(\"active\")\nif \"disabled\" in element.classes:\n...\n</code></pre>"},{"location":"api/web/#pyscript.web.Element.style","title":"<code>style</code>  <code>property</code>","text":"<p>Return the element's CSS styles as a <code>dict</code>-like <code>Style</code> object.</p> <p>Access using <code>dict</code>-style syntax with standard CSS property names (hyphenated).</p> <pre><code>element.style[\"background-color\"] = \"red\"\nelement.style[\"font-size\"] = \"16px\"\ndel element.style[\"margin\"]\n</code></pre>"},{"location":"api/web/#pyscript.web.Element.parent","title":"<code>parent</code>  <code>property</code>","text":"<p>Return this element's parent <code>Element</code>, or <code>None</code>.</p>"},{"location":"api/web/#pyscript.web.Element.get_tag_name","title":"<code>get_tag_name()</code>  <code>classmethod</code>","text":"<p>Get the HTML tag name for this class.</p> <p>Classes ending with underscore (e.g. <code>input_</code>) have it removed to get the actual HTML tag name.</p> Source code in <code>pyscript/web.py</code> <pre><code>@classmethod\ndef get_tag_name(cls):\n\"\"\"\n    Get the HTML tag name for this class.\n    Classes ending with underscore (e.g. `input_`) have it removed to get\n    the actual HTML tag name.\n    \"\"\"\nreturn cls.__name__.replace(\"_\", \"\")\n</code></pre>"},{"location":"api/web/#pyscript.web.Element.register_element_classes","title":"<code>register_element_classes(element_classes)</code>  <code>classmethod</code>","text":"<p>Register <code>Element</code> subclasses for tag-based lookup.</p> Source code in <code>pyscript/web.py</code> <pre><code>@classmethod\ndef register_element_classes(cls, element_classes):\n\"\"\"\n    Register `Element` subclasses for tag-based lookup.\n    \"\"\"\nfor element_class in element_classes:\ntag_name = element_class.get_tag_name()\ncls.element_classes_by_tag_name[tag_name] = element_class\n</code></pre>"},{"location":"api/web/#pyscript.web.Element.unregister_element_classes","title":"<code>unregister_element_classes(element_classes)</code>  <code>classmethod</code>","text":"<p>Unregister <code>Element</code> subclasses from tag-based lookup.</p> Source code in <code>pyscript/web.py</code> <pre><code>@classmethod\ndef unregister_element_classes(cls, element_classes):\n\"\"\"\n    Unregister `Element` subclasses from tag-based lookup.\n    \"\"\"\nfor element_class in element_classes:\ntag_name = element_class.get_tag_name()\ncls.element_classes_by_tag_name.pop(tag_name, None)\n</code></pre>"},{"location":"api/web/#pyscript.web.Element.wrap_dom_element","title":"<code>wrap_dom_element(dom_element)</code>  <code>classmethod</code>","text":"<p>Wrap a DOM element in the appropriate <code>Element</code> subclass.</p> <p>Looks up the subclass by tag name. Unknown tags use the base <code>Element</code> class.</p> Source code in <code>pyscript/web.py</code> <pre><code>@classmethod\ndef wrap_dom_element(cls, dom_element):\n\"\"\"\n    Wrap a DOM element in the appropriate `Element` subclass.\n    Looks up the subclass by tag name. Unknown tags use the base `Element`\n    class.\n    \"\"\"\nelement_cls = cls.element_classes_by_tag_name.get(\ndom_element.tagName.lower(), cls\n)\nreturn element_cls(dom_element=dom_element)\n</code></pre>"},{"location":"api/web/#pyscript.web.Element.__init__","title":"<code>__init__(dom_element=None, classes=None, style=None, **kwargs)</code>","text":"<p>Create or wrap a DOM element.</p> <p>If <code>dom_element</code> is <code>None</code>, this creates a new element. Otherwise wraps the provided DOM element. The <code>**kwargs</code> can include HTML attributes and event handlers (names starting with <code>on_</code>).</p> Source code in <code>pyscript/web.py</code> <pre><code>def __init__(self, dom_element=None, classes=None, style=None, **kwargs):\n\"\"\"\n    Create or wrap a DOM element.\n    If `dom_element` is `None`, this creates a new element. Otherwise wraps\n    the provided DOM element. The `**kwargs` can include HTML attributes\n    and event handlers (names starting with `on_`).\n    \"\"\"\n# Create or wrap the DOM element.\nif is_none(dom_element):\nself._dom_element = document.createElement(type(self).get_tag_name())\nelse:\nself._dom_element = dom_element\n# Event handling.\nself._on_events = {}\nself.update(classes=classes, style=style, **kwargs)\n</code></pre>"},{"location":"api/web/#pyscript.web.Element.__eq__","title":"<code>__eq__(obj)</code>","text":"<p>Check equality by comparing underlying DOM elements.</p> Source code in <code>pyscript/web.py</code> <pre><code>def __eq__(self, obj):\n\"\"\"\n    Check equality by comparing underlying DOM elements.\n    \"\"\"\nreturn isinstance(obj, Element) and obj._dom_element == self._dom_element\n</code></pre>"},{"location":"api/web/#pyscript.web.Element.__getitem__","title":"<code>__getitem__(key)</code>","text":"<p>Get an item within this element.</p> <p>Behaviour depends on the key type:</p> <ul> <li>Integer: returns the child at that index.</li> <li>Slice: returns a collection of children in that slice.</li> <li>String: looks up an element by id (with or without '#' prefix).</li> </ul> <pre><code>element[0]          # First child.\nelement[1:3]        # Second and third children.\nelement[\"my-id\"]    # Element with id=\"my-id\" (or None).\nelement[\"#my-id\"]   # Same as above (# is optional).\n</code></pre> Source code in <code>pyscript/web.py</code> <pre><code>def __getitem__(self, key):\n\"\"\"\n    Get an item within this element.\n    Behaviour depends on the key type:\n    - Integer: returns the child at that index.\n    - Slice: returns a collection of children in that slice.\n    - String: looks up an element by id (with or without '#' prefix).\n    ```python\n    element[0]          # First child.\n    element[1:3]        # Second and third children.\n    element[\"my-id\"]    # Element with id=\"my-id\" (or None).\n    element[\"#my-id\"]   # Same as above (# is optional).\n    ```\n    \"\"\"\nif isinstance(key, (int, slice)):\nreturn self.children[key]\nif isinstance(key, str):\nreturn _find_by_id(self._dom_element, key)\nraise TypeError(\nf\"Element indices must be integers, slices, or strings, \"\nf\"not {type(key).__name__}.\"\n)\n</code></pre>"},{"location":"api/web/#pyscript.web.Element.__getattr__","title":"<code>__getattr__(name)</code>","text":"<p>Get an attribute from the element.</p> <p>Attributes starting with <code>on_</code> return <code>Event</code> instances. Other attributes are retrieved from the underlying DOM element.</p> Source code in <code>pyscript/web.py</code> <pre><code>def __getattr__(self, name):\n\"\"\"\n    Get an attribute from the element.\n    Attributes starting with `on_` return `Event` instances. Other\n    attributes are retrieved from the underlying DOM element.\n    \"\"\"\nif name.startswith(\"on_\"):\nreturn self.get_event(name)\ndom_name = self._normalize_attribute_name(name)\nreturn getattr(self._dom_element, dom_name)\n</code></pre>"},{"location":"api/web/#pyscript.web.Element.__setattr__","title":"<code>__setattr__(name, value)</code>","text":"<p>Set an attribute on the element.</p> <p>Private attributes (starting with <code>_</code>) are set on the Python object. Public attributes are set on the underlying DOM element. Attributes starting with <code>on_</code> are treated as events.</p> Source code in <code>pyscript/web.py</code> <pre><code>def __setattr__(self, name, value):\n\"\"\"\n    Set an attribute on the element.\n    Private attributes (starting with `_`) are set on the Python object.\n    Public attributes are set on the underlying DOM element. Attributes\n    starting with `on_` are treated as events.\n    \"\"\"\nif name.startswith(\"_\"):\nsuper().__setattr__(name, value)\nelif name.startswith(\"on_\"):\n# Separate events...\nself.get_event(name).add_listener(value)\nelse:\n# ...from regular attributes.\ndom_name = self._normalize_attribute_name(name)\nsetattr(self._dom_element, dom_name, value)\n</code></pre>"},{"location":"api/web/#pyscript.web.Element.get_event","title":"<code>get_event(name)</code>","text":"<p>Get an <code>Event</code> instance for the specified event name.</p> <p>Event names must start with <code>on_</code> (e.g. <code>on_click</code>). Creates and caches <code>Event</code> instances that are triggered when the DOM event fires.</p> Source code in <code>pyscript/web.py</code> <pre><code>def get_event(self, name):\n\"\"\"\n    Get an `Event` instance for the specified event name.\n    Event names must start with `on_` (e.g. `on_click`). Creates and\n    caches `Event` instances that are triggered when the DOM event fires.\n    \"\"\"\nif not name.startswith(\"on_\"):\nraise ValueError(\"Event names must start with 'on_'.\")\nevent_name = name[3:]  # Remove 'on_' prefix.\nif not hasattr(self._dom_element, event_name):\nraise ValueError(f\"Element has no '{event_name}' event.\")\nif name in self._on_events:\nreturn self._on_events[name]\n# Create Event instance and wire it to the DOM event.\nev = Event()\nself._on_events[name] = ev\nself._dom_element.addEventListener(event_name, create_proxy(ev.trigger))\nreturn ev\n</code></pre>"},{"location":"api/web/#pyscript.web.Element.append","title":"<code>append(*items)</code>","text":"<p>Append items to this element's <code>children</code>.</p> <p>Accepts <code>Element</code> instances, <code>ElementCollection</code> instances, lists, tuples, raw DOM elements, and NodeLists.</p> Source code in <code>pyscript/web.py</code> <pre><code>def append(self, *items):\n\"\"\"\n    Append items to this element's `children`.\n    Accepts `Element` instances, `ElementCollection` instances, lists,\n    tuples, raw DOM elements, and NodeLists.\n    \"\"\"\nfor item in items:\nif isinstance(item, Element):\nself._dom_element.appendChild(item._dom_element)\nelif isinstance(item, ElementCollection):\nfor element in item:\nself._dom_element.appendChild(element._dom_element)\nelif isinstance(item, (list, tuple)):\nfor child in item:\nself.append(child)\nelif hasattr(item, \"tagName\"):\n# Raw DOM element.\nself._dom_element.appendChild(item)\nelif hasattr(item, \"length\"):\n# NodeList or similar iterable.\nfor element in item:\nself._dom_element.appendChild(element)\nelse:\nraise TypeError(f\"Cannot append {type(item).__name__} to element.\")\n</code></pre>"},{"location":"api/web/#pyscript.web.Element.clone","title":"<code>clone(clone_id=None)</code>","text":"<p>Clone this element and its underlying DOM element.</p> <p>Optionally assign a new <code>id</code> to the clone.</p> Source code in <code>pyscript/web.py</code> <pre><code>def clone(self, clone_id=None):\n\"\"\"\n    Clone this element and its underlying DOM element.\n    Optionally assign a new `id` to the clone.\n    \"\"\"\nclone = Element.wrap_dom_element(self._dom_element.cloneNode(True))\nclone.id = clone_id\nreturn clone\n</code></pre>"},{"location":"api/web/#pyscript.web.Element.find","title":"<code>find(selector)</code>","text":"<p>Find all descendant elements matching the CSS <code>selector</code>.</p> <p>Returns an <code>ElementCollection</code> (possibly empty).</p> <pre><code>element.find(\"div\")              # All div descendants.\nelement.find(\".my-class\")        # All elements with class.\nelement.find(\"#my-id\")           # Element with id (as collection).\nelement.find(\"div.my-class\")     # All divs with class.\n</code></pre> Source code in <code>pyscript/web.py</code> <pre><code>def find(self, selector):\n\"\"\"\n    Find all descendant elements matching the\n    [CSS `selector`](https://developer.mozilla.org/en-US/docs/Web/CSS/Guides/Selectors).\n    Returns an `ElementCollection` (possibly empty).\n    ```python\n    element.find(\"div\")              # All div descendants.\n    element.find(\".my-class\")        # All elements with class.\n    element.find(\"#my-id\")           # Element with id (as collection).\n    element.find(\"div.my-class\")     # All divs with class.\n    ```\n    \"\"\"\nreturn _find_and_wrap(self._dom_element, selector)\n</code></pre>"},{"location":"api/web/#pyscript.web.Element.show_me","title":"<code>show_me()</code>","text":"<p>Scroll this element into view.</p> Source code in <code>pyscript/web.py</code> <pre><code>def show_me(self):\n\"\"\"\n    Scroll this element into view.\n    \"\"\"\nself._dom_element.scrollIntoView()\n</code></pre>"},{"location":"api/web/#pyscript.web.Element.update","title":"<code>update(classes=None, style=None, **kwargs)</code>","text":"<p>Update this element's <code>classes</code>, <code>style</code>, and <code>attributes</code> (via arbitrary <code>**kwargs</code>).</p> <p>Convenience method for bulk updates.</p> Source code in <code>pyscript/web.py</code> <pre><code>def update(self, classes=None, style=None, **kwargs):\n\"\"\"\n    Update this element's `classes`, `style`, and `attributes`\n    (via arbitrary `**kwargs`).\n    Convenience method for bulk updates.\n    \"\"\"\nif classes:\nif isinstance(classes, str):\nself.classes.add(classes)\nelse:\nfor class_name in classes:\nself.classes.add(class_name)\nif style:\nfor key, value in style.items():\nself.style[key] = value\nfor name, value in kwargs.items():\nsetattr(self, name, value)\n</code></pre>"},{"location":"api/web/#pyscript.web.ContainerElement","title":"<code>ContainerElement</code>","text":"<p>               Bases: <code>Element</code></p> <p>Base class for elements that can contain other elements.</p> <p>Extends <code>Element</code> with convenient child handling during initialization.</p> <pre><code>from pyscript import web\n# Create with child elements as arguments.\ndiv = web.div(\nweb.h1(\"Title\"),\nweb.p(\"Paragraph 1\"),\nweb.p(\"Paragraph 2\")\n)\n# Or use the children keyword argument.\ndiv = web.div(children=[web.p(\"Child 1\"), web.p(\"Child 2\")])\n# Mix elements and HTML strings.\ndiv = web.div(\nweb.h1(\"Title\"),\n\"&lt;p&gt;HTML content&lt;/p&gt;\",\nweb.button(\"Click me\")\n)\n# Iterate over children.\nfor child in div:\nprint(child.innerHTML)\n</code></pre> Source code in <code>pyscript/web.py</code> <pre><code>class ContainerElement(Element):\n\"\"\"\n    Base class for elements that can contain other elements.\n    Extends `Element` with convenient child handling during initialization.\n    ```python\n    from pyscript import web\n    # Create with child elements as arguments.\n    div = web.div(\n        web.h1(\"Title\"),\n        web.p(\"Paragraph 1\"),\n        web.p(\"Paragraph 2\")\n    )\n    # Or use the children keyword argument.\n    div = web.div(children=[web.p(\"Child 1\"), web.p(\"Child 2\")])\n    # Mix elements and HTML strings.\n    div = web.div(\n        web.h1(\"Title\"),\n        \"&lt;p&gt;HTML content&lt;/p&gt;\",\n        web.button(\"Click me\")\n    )\n    # Iterate over children.\n    for child in div:\n        print(child.innerHTML)\n    ```\n    \"\"\"\ndef __init__(\nself, *args, children=None, dom_element=None, style=None, classes=None, **kwargs\n):\n\"\"\"\n        Create a container element with optional `children`.\n        Children can be passed as positional `*args` or via the `children`\n        keyword argument. String children are inserted as unescaped HTML. The\n        `style`, `classes`, and `**kwargs` are passed to the base `Element`\n        initializer.\n        \"\"\"\nsuper().__init__(\ndom_element=dom_element, style=style, classes=classes, **kwargs\n)\nfor child in list(args) + (children or []):\nif isinstance(child, (Element, ElementCollection)):\nself.append(child)\nelse:\nself._dom_element.insertAdjacentHTML(\"beforeend\", child)\ndef __iter__(self):\nyield from self.children\n</code></pre>"},{"location":"api/web/#pyscript.web.ContainerElement.__init__","title":"<code>__init__(*args, children=None, dom_element=None, style=None, classes=None, **kwargs)</code>","text":"<p>Create a container element with optional <code>children</code>.</p> <p>Children can be passed as positional <code>*args</code> or via the <code>children</code> keyword argument. String children are inserted as unescaped HTML. The <code>style</code>, <code>classes</code>, and <code>**kwargs</code> are passed to the base <code>Element</code> initializer.</p> Source code in <code>pyscript/web.py</code> <pre><code>def __init__(\nself, *args, children=None, dom_element=None, style=None, classes=None, **kwargs\n):\n\"\"\"\n    Create a container element with optional `children`.\n    Children can be passed as positional `*args` or via the `children`\n    keyword argument. String children are inserted as unescaped HTML. The\n    `style`, `classes`, and `**kwargs` are passed to the base `Element`\n    initializer.\n    \"\"\"\nsuper().__init__(\ndom_element=dom_element, style=style, classes=classes, **kwargs\n)\nfor child in list(args) + (children or []):\nif isinstance(child, (Element, ElementCollection)):\nself.append(child)\nelse:\nself._dom_element.insertAdjacentHTML(\"beforeend\", child)\n</code></pre>"},{"location":"api/web/#pyscript.web.ElementCollection","title":"<code>ElementCollection</code>","text":"<p>A collection of Element instances with <code>list</code>-like operations.</p> <p>Supports iteration, indexing, slicing, and finding descendants. For bulk operations, iterate over the collection explicitly or use the <code>update_all</code> method.</p> <pre><code># Get a collection of elements.\nitems = web.page.find(\".item\")\n# Access by index.\nfirst = items[0]\nlast = items[-1]\n# Slice the collection.\nsubset = items[1:3]\n# Look up a specific element by id (returns None if not found).\nspecific = items[\"item-id\"]\n# Iterate over elements.\nfor item in items:\nitem.innerHTML = \"Updated\"\nitem.classes.add(\"processed\")\n# Bulk update all contained elements.\nitems.update_all(innerHTML=\"Hello\", className=\"updated\")\n# Find matches within the collection.\nbuttons = items.find(\"button\")\n# Get the count.\ncount = len(items)\n</code></pre> Source code in <code>pyscript/web.py</code> <pre><code>class ElementCollection:\n\"\"\"\n    A collection of Element instances with `list`-like operations.\n    Supports iteration, indexing, slicing, and finding descendants.\n    For bulk operations, iterate over the collection explicitly or use\n    the `update_all` method.\n    ```python\n    # Get a collection of elements.\n    items = web.page.find(\".item\")\n    # Access by index.\n    first = items[0]\n    last = items[-1]\n    # Slice the collection.\n    subset = items[1:3]\n    # Look up a specific element by id (returns None if not found).\n    specific = items[\"item-id\"]\n    # Iterate over elements.\n    for item in items:\n        item.innerHTML = \"Updated\"\n        item.classes.add(\"processed\")\n    # Bulk update all contained elements.\n    items.update_all(innerHTML=\"Hello\", className=\"updated\")\n    # Find matches within the collection.\n    buttons = items.find(\"button\")\n    # Get the count.\n    count = len(items)\n    ```\n    \"\"\"\n@classmethod\ndef wrap_dom_elements(cls, dom_elements):\n\"\"\"\n        Wrap an iterable of DOM elements in an `ElementCollection`.\n        \"\"\"\nreturn cls(\n[Element.wrap_dom_element(dom_element) for dom_element in dom_elements]\n)\ndef __init__(self, elements):\nself._elements = elements\ndef __eq__(self, obj):\n\"\"\"\n        Check equality by comparing elements.\n        \"\"\"\nreturn isinstance(obj, ElementCollection) and obj._elements == self._elements\ndef __getitem__(self, key):\n\"\"\"\n        Get items from the collection.\n        Behaviour depends on the key type:\n        - Integer: returns the element at that index.\n        - Slice: returns a new collection with elements in that slice.\n        - String: looks up an element by id (with or without '#' prefix).\n        ```python\n        collection[0]          # First element.\n        collection[1:3]        # New collection with 2nd and 3rd elements.\n        collection[\"my-id\"]    # Element with id=\"my-id\" (or None).\n        collection[\"#my-id\"]   # Same as above (# is optional).\n        ```\n        \"\"\"\nif isinstance(key, int):\nreturn self._elements[key]\nif isinstance(key, slice):\nreturn ElementCollection(self._elements[key])\nif isinstance(key, str):\nfor element in self._elements:\nresult = _find_by_id(element._dom_element, key)\nif result:\nreturn result\nreturn None\nraise TypeError(\nf\"Collection indices must be integers, slices, or strings, \"\nf\"not {type(key).__name__}\"\n)\ndef __iter__(self):\nyield from self._elements\ndef __len__(self):\nreturn len(self._elements)\ndef __repr__(self):\nreturn (\nf\"{self.__class__.__name__} (length: {len(self._elements)}) \"\nf\"{self._elements}\"\n)\n@property\ndef elements(self):\n\"\"\"\n        Return the underlying `list` of elements.\n        \"\"\"\nreturn self._elements\ndef find(self, selector):\n\"\"\"\n        Find all descendants matching the\n        [CSS `selector`](https://developer.mozilla.org/en-US/docs/Web/CSS/Guides/Selectors).\n        Searches within all elements in the collection.\n        ```python\n        collection.find(\"div\")           # All div descendants.\n        collection.find(\".my-class\")     # All elements with class.\n        collection.find(\"#my-id\")        # Element with id (as collection).\n        ```\n        \"\"\"\nelements = []\nfor element in self._elements:\nelements.extend(_find_and_wrap(element._dom_element, selector))\nreturn ElementCollection(elements)\ndef update_all(self, **kwargs):\n\"\"\"\n        Explicitly update all elements with the given attributes.\n        ```python\n        collection.update_all(innerHTML=\"Hello\")\n        collection.update_all(className=\"active\", title=\"Updated\")\n        ```\n        \"\"\"\nfor element in self._elements:\nfor name, value in kwargs.items():\nsetattr(element, name, value)\n</code></pre>"},{"location":"api/web/#pyscript.web.ElementCollection.elements","title":"<code>elements</code>  <code>property</code>","text":"<p>Return the underlying <code>list</code> of elements.</p>"},{"location":"api/web/#pyscript.web.ElementCollection.wrap_dom_elements","title":"<code>wrap_dom_elements(dom_elements)</code>  <code>classmethod</code>","text":"<p>Wrap an iterable of DOM elements in an <code>ElementCollection</code>.</p> Source code in <code>pyscript/web.py</code> <pre><code>@classmethod\ndef wrap_dom_elements(cls, dom_elements):\n\"\"\"\n    Wrap an iterable of DOM elements in an `ElementCollection`.\n    \"\"\"\nreturn cls(\n[Element.wrap_dom_element(dom_element) for dom_element in dom_elements]\n)\n</code></pre>"},{"location":"api/web/#pyscript.web.ElementCollection.__eq__","title":"<code>__eq__(obj)</code>","text":"<p>Check equality by comparing elements.</p> Source code in <code>pyscript/web.py</code> <pre><code>def __eq__(self, obj):\n\"\"\"\n    Check equality by comparing elements.\n    \"\"\"\nreturn isinstance(obj, ElementCollection) and obj._elements == self._elements\n</code></pre>"},{"location":"api/web/#pyscript.web.ElementCollection.__getitem__","title":"<code>__getitem__(key)</code>","text":"<p>Get items from the collection.</p> <p>Behaviour depends on the key type:</p> <ul> <li>Integer: returns the element at that index.</li> <li>Slice: returns a new collection with elements in that slice.</li> <li>String: looks up an element by id (with or without '#' prefix).</li> </ul> <pre><code>collection[0]          # First element.\ncollection[1:3]        # New collection with 2nd and 3rd elements.\ncollection[\"my-id\"]    # Element with id=\"my-id\" (or None).\ncollection[\"#my-id\"]   # Same as above (# is optional).\n</code></pre> Source code in <code>pyscript/web.py</code> <pre><code>def __getitem__(self, key):\n\"\"\"\n    Get items from the collection.\n    Behaviour depends on the key type:\n    - Integer: returns the element at that index.\n    - Slice: returns a new collection with elements in that slice.\n    - String: looks up an element by id (with or without '#' prefix).\n    ```python\n    collection[0]          # First element.\n    collection[1:3]        # New collection with 2nd and 3rd elements.\n    collection[\"my-id\"]    # Element with id=\"my-id\" (or None).\n    collection[\"#my-id\"]   # Same as above (# is optional).\n    ```\n    \"\"\"\nif isinstance(key, int):\nreturn self._elements[key]\nif isinstance(key, slice):\nreturn ElementCollection(self._elements[key])\nif isinstance(key, str):\nfor element in self._elements:\nresult = _find_by_id(element._dom_element, key)\nif result:\nreturn result\nreturn None\nraise TypeError(\nf\"Collection indices must be integers, slices, or strings, \"\nf\"not {type(key).__name__}\"\n)\n</code></pre>"},{"location":"api/web/#pyscript.web.ElementCollection.find","title":"<code>find(selector)</code>","text":"<p>Find all descendants matching the CSS <code>selector</code>.</p> <p>Searches within all elements in the collection.</p> <pre><code>collection.find(\"div\")           # All div descendants.\ncollection.find(\".my-class\")     # All elements with class.\ncollection.find(\"#my-id\")        # Element with id (as collection).\n</code></pre> Source code in <code>pyscript/web.py</code> <pre><code>def find(self, selector):\n\"\"\"\n    Find all descendants matching the\n    [CSS `selector`](https://developer.mozilla.org/en-US/docs/Web/CSS/Guides/Selectors).\n    Searches within all elements in the collection.\n    ```python\n    collection.find(\"div\")           # All div descendants.\n    collection.find(\".my-class\")     # All elements with class.\n    collection.find(\"#my-id\")        # Element with id (as collection).\n    ```\n    \"\"\"\nelements = []\nfor element in self._elements:\nelements.extend(_find_and_wrap(element._dom_element, selector))\nreturn ElementCollection(elements)\n</code></pre>"},{"location":"api/web/#pyscript.web.ElementCollection.update_all","title":"<code>update_all(**kwargs)</code>","text":"<p>Explicitly update all elements with the given attributes.</p> <pre><code>collection.update_all(innerHTML=\"Hello\")\ncollection.update_all(className=\"active\", title=\"Updated\")\n</code></pre> Source code in <code>pyscript/web.py</code> <pre><code>def update_all(self, **kwargs):\n\"\"\"\n    Explicitly update all elements with the given attributes.\n    ```python\n    collection.update_all(innerHTML=\"Hello\")\n    collection.update_all(className=\"active\", title=\"Updated\")\n    ```\n    \"\"\"\nfor element in self._elements:\nfor name, value in kwargs.items():\nsetattr(element, name, value)\n</code></pre>"},{"location":"api/web/#pyscript.web.Classes","title":"<code>Classes</code>","text":"<p>               Bases: <code>set</code></p> <p>Behaves like a Python <code>set</code> with changes automatically reflected in the element's <code>classList</code>.</p> <pre><code># Add and remove classes.\nelement.classes.add(\"active\")\nelement.classes.remove(\"inactive\")\nelement.classes.discard(\"maybe-missing\")  # No error if absent.\n# Check membership.\nif \"active\" in element.classes:\nprint(\"Element is active\")\n# Clear all classes.\nelement.classes.clear()\n# Iterate over classes.\nfor cls in element.classes:\nprint(cls)\n</code></pre> Source code in <code>pyscript/web.py</code> <pre><code>class Classes(set):\n\"\"\"\n    Behaves like a Python `set` with changes automatically reflected in the\n    element's `classList`.\n    ```python\n    # Add and remove classes.\n    element.classes.add(\"active\")\n    element.classes.remove(\"inactive\")\n    element.classes.discard(\"maybe-missing\")  # No error if absent.\n    # Check membership.\n    if \"active\" in element.classes:\n        print(\"Element is active\")\n    # Clear all classes.\n    element.classes.clear()\n    # Iterate over classes.\n    for cls in element.classes:\n        print(cls)\n    ```\n    \"\"\"\ndef __init__(self, element):\n\"\"\"Initialise the Classes set for the given element.\"\"\"\nself._class_list = element._dom_element.classList\nsuper().__init__(self._class_list)\ndef _extract_class_names(self, class_name):\n\"\"\"\n        If the class_name contains several class names separated by spaces,\n        split them and return as a list. Otherwise, return the class_name as is\n        in a list.\n        \"\"\"\nreturn (\n[name for name in class_name.split() if name]\nif \" \" in class_name\nelse [class_name]\n)\ndef add(self, class_name):\n\"\"\"Add a class.\"\"\"\nfor name in self._extract_class_names(class_name):\nsuper().add(name)\nself._class_list.add(name)\ndef remove(self, class_name):\n\"\"\"Remove a class.\"\"\"\nfor name in self._extract_class_names(class_name):\nsuper().remove(name)\nself._class_list.remove(name)\ndef discard(self, class_name):\n\"\"\"Remove a class if present.\"\"\"\nfor name in self._extract_class_names(class_name):\nsuper().discard(name)\nif name in self._class_list:\nself._class_list.remove(name)\ndef clear(self):\n\"\"\"Remove all classes.\"\"\"\nsuper().clear()\nwhile self._class_list.length &gt; 0:\nself._class_list.remove(self._class_list.item(0))\n</code></pre>"},{"location":"api/web/#pyscript.web.Classes.__init__","title":"<code>__init__(element)</code>","text":"<p>Initialise the Classes set for the given element.</p> Source code in <code>pyscript/web.py</code> <pre><code>def __init__(self, element):\n\"\"\"Initialise the Classes set for the given element.\"\"\"\nself._class_list = element._dom_element.classList\nsuper().__init__(self._class_list)\n</code></pre>"},{"location":"api/web/#pyscript.web.Classes.add","title":"<code>add(class_name)</code>","text":"<p>Add a class.</p> Source code in <code>pyscript/web.py</code> <pre><code>def add(self, class_name):\n\"\"\"Add a class.\"\"\"\nfor name in self._extract_class_names(class_name):\nsuper().add(name)\nself._class_list.add(name)\n</code></pre>"},{"location":"api/web/#pyscript.web.Classes.remove","title":"<code>remove(class_name)</code>","text":"<p>Remove a class.</p> Source code in <code>pyscript/web.py</code> <pre><code>def remove(self, class_name):\n\"\"\"Remove a class.\"\"\"\nfor name in self._extract_class_names(class_name):\nsuper().remove(name)\nself._class_list.remove(name)\n</code></pre>"},{"location":"api/web/#pyscript.web.Classes.discard","title":"<code>discard(class_name)</code>","text":"<p>Remove a class if present.</p> Source code in <code>pyscript/web.py</code> <pre><code>def discard(self, class_name):\n\"\"\"Remove a class if present.\"\"\"\nfor name in self._extract_class_names(class_name):\nsuper().discard(name)\nif name in self._class_list:\nself._class_list.remove(name)\n</code></pre>"},{"location":"api/web/#pyscript.web.Classes.clear","title":"<code>clear()</code>","text":"<p>Remove all classes.</p> Source code in <code>pyscript/web.py</code> <pre><code>def clear(self):\n\"\"\"Remove all classes.\"\"\"\nsuper().clear()\nwhile self._class_list.length &gt; 0:\nself._class_list.remove(self._class_list.item(0))\n</code></pre>"},{"location":"api/web/#pyscript.web.Style","title":"<code>Style</code>","text":"<p>               Bases: <code>dict</code></p> <p>Behaves like a Python <code>dict</code> with changes automatically reflected in the element's <code>style</code> attribute.</p> <pre><code># Set and get styles using CSS property names (hyphenated).\nelement.style[\"color\"] = \"red\"\nelement.style[\"background-color\"] = \"#f0f0f0\"\nelement.style[\"font-size\"] = \"16px\"\n# Get a style value.\ncolor = element.style[\"color\"]\n# Remove a style.\ndel element.style[\"margin\"]\n# Check if a style is set.\nif \"color\" in element.style:\nprint(f\"Color is {element.style['color']}\")\n</code></pre> Source code in <code>pyscript/web.py</code> <pre><code>class Style(dict):\n\"\"\"\n    Behaves like a Python `dict` with changes automatically reflected in the\n    element's `style` attribute.\n    ```python\n    # Set and get styles using CSS property names (hyphenated).\n    element.style[\"color\"] = \"red\"\n    element.style[\"background-color\"] = \"#f0f0f0\"\n    element.style[\"font-size\"] = \"16px\"\n    # Get a style value.\n    color = element.style[\"color\"]\n    # Remove a style.\n    del element.style[\"margin\"]\n    # Check if a style is set.\n    if \"color\" in element.style:\n        print(f\"Color is {element.style['color']}\")\n    ```\n    \"\"\"\ndef __init__(self, element):\n\"\"\"Initialise the Style dict for the given element.\"\"\"\nself._style = element._dom_element.style\nsuper().__init__()\ndef __setitem__(self, key, value):\n\"\"\"Set a style property.\"\"\"\nsuper().__setitem__(key, value)\nself._style.setProperty(key, str(value))\ndef __delitem__(self, key):\n\"\"\"Remove a style property.\"\"\"\nsuper().__delitem__(key)\nself._style.removeProperty(key)\n</code></pre>"},{"location":"api/web/#pyscript.web.Style.__init__","title":"<code>__init__(element)</code>","text":"<p>Initialise the Style dict for the given element.</p> Source code in <code>pyscript/web.py</code> <pre><code>def __init__(self, element):\n\"\"\"Initialise the Style dict for the given element.\"\"\"\nself._style = element._dom_element.style\nsuper().__init__()\n</code></pre>"},{"location":"api/web/#pyscript.web.Style.__setitem__","title":"<code>__setitem__(key, value)</code>","text":"<p>Set a style property.</p> Source code in <code>pyscript/web.py</code> <pre><code>def __setitem__(self, key, value):\n\"\"\"Set a style property.\"\"\"\nsuper().__setitem__(key, value)\nself._style.setProperty(key, str(value))\n</code></pre>"},{"location":"api/web/#pyscript.web.Style.__delitem__","title":"<code>__delitem__(key)</code>","text":"<p>Remove a style property.</p> Source code in <code>pyscript/web.py</code> <pre><code>def __delitem__(self, key):\n\"\"\"Remove a style property.\"\"\"\nsuper().__delitem__(key)\nself._style.removeProperty(key)\n</code></pre>"},{"location":"api/web/#pyscript.web.HasOptions","title":"<code>HasOptions</code>","text":"<p>Mixin for elements with options (<code>datalist</code>, <code>optgroup</code>, <code>select</code>).</p> <p>Provides an <code>options</code> property that returns an <code>Options</code> instance. Used in conjunction with the <code>Options</code> class.</p> <pre><code># Get a select element and work with its options.\nselect = web.page[\"my-select\"]\n# Add options.\nselect.options.add(value=\"1\", html=\"Option 1\")\nselect.options.add(value=\"2\", html=\"Option 2\", selected=True)\n# Get the selected option.\nselected = select.options.selected\n# Iterate over options.\nfor option in select.options:\nprint(f\"{option.value}: {option.innerHTML}\")\n# Clear all options.\nselect.options.clear()\n</code></pre> Source code in <code>pyscript/web.py</code> <pre><code>class HasOptions:\n\"\"\"\n    Mixin for elements with options (`datalist`, `optgroup`, `select`).\n    Provides an `options` property that returns an `Options` instance. Used\n    in conjunction with the `Options` class.\n    ```python\n    # Get a select element and work with its options.\n    select = web.page[\"my-select\"]\n    # Add options.\n    select.options.add(value=\"1\", html=\"Option 1\")\n    select.options.add(value=\"2\", html=\"Option 2\", selected=True)\n    # Get the selected option.\n    selected = select.options.selected\n    # Iterate over options.\n    for option in select.options:\n        print(f\"{option.value}: {option.innerHTML}\")\n    # Clear all options.\n    select.options.clear()\n    ```\n    \"\"\"\n@property\ndef options(self):\n\"\"\"Return this element's options as an `Options` instance.\"\"\"\nif not hasattr(self, \"_options\"):\nself._options = Options(self)\nreturn self._options\n</code></pre>"},{"location":"api/web/#pyscript.web.HasOptions.options","title":"<code>options</code>  <code>property</code>","text":"<p>Return this element's options as an <code>Options</code> instance.</p>"},{"location":"api/web/#pyscript.web.Options","title":"<code>Options</code>","text":"<p>Interface to the options of a <code>datalist</code>, <code>optgroup</code>, or <code>select</code> element.</p> <p>Supports adding, removing, and accessing option elements. Used in conjunction with the <code>HasOptions</code> mixin.</p> <pre><code># Add options to a select element.\nselect.options.add(value=\"1\", html=\"Option 1\")\nselect.options.add(value=\"2\", html=\"Option 2\", selected=True)\n# Insert option at specific position.\nselect.options.add(value=\"1.5\", html=\"Option 1.5\", before=1)\n# Access options by index.\nfirst_option = select.options[0]\n# Get the selected option.\nselected = select.options.selected\nprint(f\"Selected: {selected.value}\")\n# Iterate over all options.\nfor option in select.options:\nprint(option.innerHTML)\n# Remove option by index.\nselect.options.remove(0)\n# Clear all options.\nselect.options.clear()\n</code></pre> Source code in <code>pyscript/web.py</code> <pre><code>class Options:\n\"\"\"\n    Interface to the options of a `datalist`, `optgroup`, or `select` element.\n    Supports adding, removing, and accessing option elements. Used in\n    conjunction with the `HasOptions` mixin.\n    ```python\n    # Add options to a select element.\n    select.options.add(value=\"1\", html=\"Option 1\")\n    select.options.add(value=\"2\", html=\"Option 2\", selected=True)\n    # Insert option at specific position.\n    select.options.add(value=\"1.5\", html=\"Option 1.5\", before=1)\n    # Access options by index.\n    first_option = select.options[0]\n    # Get the selected option.\n    selected = select.options.selected\n    print(f\"Selected: {selected.value}\")\n    # Iterate over all options.\n    for option in select.options:\n        print(option.innerHTML)\n    # Remove option by index.\n    select.options.remove(0)\n    # Clear all options.\n    select.options.clear()\n    ```\n    \"\"\"\ndef __init__(self, element):\nself._element = element\ndef __getitem__(self, key):\nreturn self.options[key]\ndef __iter__(self):\nyield from self.options\ndef __len__(self):\nreturn len(self.options)\ndef __repr__(self):\nreturn f\"{self.__class__.__name__} (length: {len(self)}) \" f\"{self.options}\"\n@property\ndef options(self):\n\"\"\"\n        Return the list of option elements.\n        \"\"\"\nreturn [Element.wrap_dom_element(o) for o in self._element._dom_element.options]\n@property\ndef selected(self):\n\"\"\"\n        Return the currently selected option.\n        \"\"\"\nreturn self.options[self._element._dom_element.selectedIndex]\ndef add(self, value=None, html=None, text=None, before=None, **kwargs):\n\"\"\"\n        Add a new option to the element.\n        Can specify `value`, `html` content, and `text`. The `before` parameter can\n        be an `Element` or index to insert before. The `**kwargs` are additional\n        arbitrary attributes for the new option element.\n        \"\"\"\nif value:\nkwargs[\"value\"] = value\nif html:\nkwargs[\"innerHTML\"] = html\nif text:\nkwargs[\"text\"] = text\n# The `option` element class is dynamically created below.\nnew_option = option(**kwargs)  # noqa: F821\nif before and isinstance(before, Element):\nbefore = before._dom_element\nself._element._dom_element.add(new_option._dom_element, before)\ndef clear(self):\n\"\"\"\n        Remove all options.\n        \"\"\"\nself._element._dom_element.length = 0\ndef remove(self, index):\n\"\"\"\n        Remove the option at the specified `index`.\n        \"\"\"\nself._element._dom_element.remove(index)\n</code></pre>"},{"location":"api/web/#pyscript.web.Options.options","title":"<code>options</code>  <code>property</code>","text":"<p>Return the list of option elements.</p>"},{"location":"api/web/#pyscript.web.Options.selected","title":"<code>selected</code>  <code>property</code>","text":"<p>Return the currently selected option.</p>"},{"location":"api/web/#pyscript.web.Options.add","title":"<code>add(value=None, html=None, text=None, before=None, **kwargs)</code>","text":"<p>Add a new option to the element.</p> <p>Can specify <code>value</code>, <code>html</code> content, and <code>text</code>. The <code>before</code> parameter can be an <code>Element</code> or index to insert before. The <code>**kwargs</code> are additional arbitrary attributes for the new option element.</p> Source code in <code>pyscript/web.py</code> <pre><code>def add(self, value=None, html=None, text=None, before=None, **kwargs):\n\"\"\"\n    Add a new option to the element.\n    Can specify `value`, `html` content, and `text`. The `before` parameter can\n    be an `Element` or index to insert before. The `**kwargs` are additional\n    arbitrary attributes for the new option element.\n    \"\"\"\nif value:\nkwargs[\"value\"] = value\nif html:\nkwargs[\"innerHTML\"] = html\nif text:\nkwargs[\"text\"] = text\n# The `option` element class is dynamically created below.\nnew_option = option(**kwargs)  # noqa: F821\nif before and isinstance(before, Element):\nbefore = before._dom_element\nself._element._dom_element.add(new_option._dom_element, before)\n</code></pre>"},{"location":"api/web/#pyscript.web.Options.clear","title":"<code>clear()</code>","text":"<p>Remove all options.</p> Source code in <code>pyscript/web.py</code> <pre><code>def clear(self):\n\"\"\"\n    Remove all options.\n    \"\"\"\nself._element._dom_element.length = 0\n</code></pre>"},{"location":"api/web/#pyscript.web.Options.remove","title":"<code>remove(index)</code>","text":"<p>Remove the option at the specified <code>index</code>.</p> Source code in <code>pyscript/web.py</code> <pre><code>def remove(self, index):\n\"\"\"\n    Remove the option at the specified `index`.\n    \"\"\"\nself._element._dom_element.remove(index)\n</code></pre>"},{"location":"api/web/#pyscript.web.Page","title":"<code>Page</code>","text":"<p>Represents the current web page.</p> <p>Provides access to the document's <code>html</code>, <code>head</code>, and <code>body</code> elements, plus convenience methods for finding elements and appending to the body.</p> <pre><code>from pyscript import web\n# Access page structure.\nweb.page.html  # The &lt;html&gt; element.\nweb.page.head  # The &lt;head&gt; element.\nweb.page.body  # The &lt;body&gt; element.\n# Get and set page title.\nweb.page.title = \"New Title\"\nprint(web.page.title)\n# Find elements by CSS selector.\ndivs = web.page.find(\"div\")\nitems = web.page.find(\".item-class\")\n# Look up element by id.\nelement = web.page[\"my-id\"]\nelement = web.page[\"#my-id\"]  # The \"#\" prefix is optional.\n# Append to the body (shortcut for page.body.append).\nweb.page.append(web.div(\"Hello\"))\n</code></pre> Source code in <code>pyscript/web.py</code> <pre><code>class Page:\n\"\"\"\n    Represents the current web page.\n    Provides access to the document's `html`, `head`, and `body` elements,\n    plus convenience methods for finding elements and appending to the body.\n    ```python\n    from pyscript import web\n    # Access page structure.\n    web.page.html  # The &lt;html&gt; element.\n    web.page.head  # The &lt;head&gt; element.\n    web.page.body  # The &lt;body&gt; element.\n    # Get and set page title.\n    web.page.title = \"New Title\"\n    print(web.page.title)\n    # Find elements by CSS selector.\n    divs = web.page.find(\"div\")\n    items = web.page.find(\".item-class\")\n    # Look up element by id.\n    element = web.page[\"my-id\"]\n    element = web.page[\"#my-id\"]  # The \"#\" prefix is optional.\n    # Append to the body (shortcut for page.body.append).\n    web.page.append(web.div(\"Hello\"))\n    ```\n    \"\"\"\ndef __init__(self):\nself.html = Element.wrap_dom_element(document.documentElement)\nself.body = Element.wrap_dom_element(document.body)\nself.head = Element.wrap_dom_element(document.head)\ndef __getitem__(self, key):\n\"\"\"\n        Look up an element by id.\n        The '#' prefix is optional and will be stripped if present.\n        Returns None if no element with that id exists.\n        ```python\n        page[\"my-id\"]      # Element with id=\"my-id\" (or None)\n        page[\"#my-id\"]     # Same as above (# is optional)\n        ```\n        \"\"\"\nreturn _find_by_id(document, key)\n@property\ndef title(self):\n\"\"\"\n        Get the page `title`.\n        \"\"\"\nreturn document.title\n@title.setter\ndef title(self, value):\n\"\"\"\n        Set the page `title`.\n        \"\"\"\ndocument.title = value\ndef append(self, *items):\n\"\"\"\n        Append items to the page `body`.\n        Shortcut for `page.body.append(*items)`.\n        \"\"\"\nself.body.append(*items)\ndef find(self, selector):\n\"\"\"\n        Find all elements matching the\n        [CSS `selector`](https://developer.mozilla.org/en-US/docs/Web/CSS/Guides/Selectors).\n        Returns an `ElementCollection` of matching elements.\n        ```python\n        page.find(\"div\")              # All divs on the page\n        page.find(\".my-class\")        # All elements with class\n        page.find(\"#my-id\")           # Element with id (as collection)\n        page.find(\"div.my-class\")     # All divs with class\n        ```\n        \"\"\"\nreturn _find_and_wrap(document, selector)\n</code></pre>"},{"location":"api/web/#pyscript.web.Page.title","title":"<code>title</code>  <code>property</code> <code>writable</code>","text":"<p>Get the page <code>title</code>.</p>"},{"location":"api/web/#pyscript.web.Page.__getitem__","title":"<code>__getitem__(key)</code>","text":"<p>Look up an element by id.</p> <p>The '#' prefix is optional and will be stripped if present. Returns None if no element with that id exists.</p> <pre><code>page[\"my-id\"]      # Element with id=\"my-id\" (or None)\npage[\"#my-id\"]     # Same as above (# is optional)\n</code></pre> Source code in <code>pyscript/web.py</code> <pre><code>def __getitem__(self, key):\n\"\"\"\n    Look up an element by id.\n    The '#' prefix is optional and will be stripped if present.\n    Returns None if no element with that id exists.\n    ```python\n    page[\"my-id\"]      # Element with id=\"my-id\" (or None)\n    page[\"#my-id\"]     # Same as above (# is optional)\n    ```\n    \"\"\"\nreturn _find_by_id(document, key)\n</code></pre>"},{"location":"api/web/#pyscript.web.Page.append","title":"<code>append(*items)</code>","text":"<p>Append items to the page <code>body</code>.</p> <p>Shortcut for <code>page.body.append(*items)</code>.</p> Source code in <code>pyscript/web.py</code> <pre><code>def append(self, *items):\n\"\"\"\n    Append items to the page `body`.\n    Shortcut for `page.body.append(*items)`.\n    \"\"\"\nself.body.append(*items)\n</code></pre>"},{"location":"api/web/#pyscript.web.Page.find","title":"<code>find(selector)</code>","text":"<p>Find all elements matching the CSS <code>selector</code>.</p> <p>Returns an <code>ElementCollection</code> of matching elements.</p> <pre><code>page.find(\"div\")              # All divs on the page\npage.find(\".my-class\")        # All elements with class\npage.find(\"#my-id\")           # Element with id (as collection)\npage.find(\"div.my-class\")     # All divs with class\n</code></pre> Source code in <code>pyscript/web.py</code> <pre><code>def find(self, selector):\n\"\"\"\n    Find all elements matching the\n    [CSS `selector`](https://developer.mozilla.org/en-US/docs/Web/CSS/Guides/Selectors).\n    Returns an `ElementCollection` of matching elements.\n    ```python\n    page.find(\"div\")              # All divs on the page\n    page.find(\".my-class\")        # All elements with class\n    page.find(\"#my-id\")           # Element with id (as collection)\n    page.find(\"div.my-class\")     # All divs with class\n    ```\n    \"\"\"\nreturn _find_and_wrap(document, selector)\n</code></pre>"},{"location":"api/web/#pyscript.web.canvas","title":"<code>canvas</code>","text":"<p>               Bases: <code>ContainerElement</code></p> <p>A bespoke HTML canvas element with Pythonic drawing and download capabilities.</p> Source code in <code>pyscript/web.py</code> <pre><code>class canvas(ContainerElement):\n\"\"\"\n    A bespoke\n    [HTML canvas element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas)\n    with Pythonic drawing and download capabilities.\n    \"\"\"\ndef download(self, filename=\"snapped.png\"):\n\"\"\"\n        Download the canvas content as an image file.\n        Creates a temporary download link and triggers it.\n        \"\"\"\n# The `a` element class is dynamically created below.\ndownload_link = a(  # noqa: F821\ndownload=filename, href=self._dom_element.toDataURL()\n)\nself.append(download_link)\ndownload_link._dom_element.click()\ndef draw(self, what, width=None, height=None):\n\"\"\"\n        Draw a 2d image source (`what`) onto the canvas. Optionally scale to\n        `width` and `height`.\n        Accepts canvas image sources: `HTMLImageElement`, `SVGImageElement`,\n        `HTMLVideoElement`, `HTMLCanvasElement`, `ImageBitmap`,\n        `OffscreenCanvas`, or `VideoFrame`.\n        \"\"\"\nif isinstance(what, Element):\nwhat = what._dom_element\nctx = self._dom_element.getContext(\"2d\")\nif width or height:\nctx.drawImage(what, 0, 0, width, height)\nelse:\nctx.drawImage(what, 0, 0)\n</code></pre>"},{"location":"api/web/#pyscript.web.canvas.download","title":"<code>download(filename='snapped.png')</code>","text":"<p>Download the canvas content as an image file.</p> <p>Creates a temporary download link and triggers it.</p> Source code in <code>pyscript/web.py</code> <pre><code>def download(self, filename=\"snapped.png\"):\n\"\"\"\n    Download the canvas content as an image file.\n    Creates a temporary download link and triggers it.\n    \"\"\"\n# The `a` element class is dynamically created below.\ndownload_link = a(  # noqa: F821\ndownload=filename, href=self._dom_element.toDataURL()\n)\nself.append(download_link)\ndownload_link._dom_element.click()\n</code></pre>"},{"location":"api/web/#pyscript.web.canvas.draw","title":"<code>draw(what, width=None, height=None)</code>","text":"<p>Draw a 2d image source (<code>what</code>) onto the canvas. Optionally scale to <code>width</code> and <code>height</code>.</p> <p>Accepts canvas image sources: <code>HTMLImageElement</code>, <code>SVGImageElement</code>, <code>HTMLVideoElement</code>, <code>HTMLCanvasElement</code>, <code>ImageBitmap</code>, <code>OffscreenCanvas</code>, or <code>VideoFrame</code>.</p> Source code in <code>pyscript/web.py</code> <pre><code>def draw(self, what, width=None, height=None):\n\"\"\"\n    Draw a 2d image source (`what`) onto the canvas. Optionally scale to\n    `width` and `height`.\n    Accepts canvas image sources: `HTMLImageElement`, `SVGImageElement`,\n    `HTMLVideoElement`, `HTMLCanvasElement`, `ImageBitmap`,\n    `OffscreenCanvas`, or `VideoFrame`.\n    \"\"\"\nif isinstance(what, Element):\nwhat = what._dom_element\nctx = self._dom_element.getContext(\"2d\")\nif width or height:\nctx.drawImage(what, 0, 0, width, height)\nelse:\nctx.drawImage(what, 0, 0)\n</code></pre>"},{"location":"api/web/#pyscript.web.video","title":"<code>video</code>","text":"<p>               Bases: <code>ContainerElement</code></p> <p>A bespoke HTML video element with Pythonic snapshot capability (to render an image to a canvas).</p> Source code in <code>pyscript/web.py</code> <pre><code>class video(ContainerElement):\n\"\"\"\n    A bespoke\n    [HTML video element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video)\n    with Pythonic snapshot capability (to render an image to a canvas).\n    \"\"\"\ndef snap(self, to=None, width=None, height=None):\n\"\"\"\n        Capture a video frame `to` a canvas element. Optionally scale to\n        `width` and `height`.\n        If no canvas is provided, this will create one. The to parameter\n        can be a canvas Element, raw DOM canvas, or CSS selector string.\n        \"\"\"\nwidth = width if width else self.videoWidth\nheight = height if height else self.videoHeight\nif is_none(to):\nto = canvas(width=width, height=height)\nelif isinstance(to, Element):\nif to.tag != \"canvas\":\nraise TypeError(\"Element to snap to must be a canvas.\")\nelif getattr(to, \"tagName\", \"\") == \"CANVAS\":\nto = canvas(dom_element=to)\nelif isinstance(to, str):\nnodelist = document.querySelectorAll(to)\nif nodelist.length == 0:\nraise TypeError(f\"No element with selector {to} to snap to.\")\nif nodelist[0].tagName != \"CANVAS\":\nraise TypeError(\"Element to snap to must be a canvas.\")\nto = canvas(dom_element=nodelist[0])\nto.draw(self, width, height)\nreturn to\n</code></pre>"},{"location":"api/web/#pyscript.web.video.snap","title":"<code>snap(to=None, width=None, height=None)</code>","text":"<p>Capture a video frame <code>to</code> a canvas element. Optionally scale to <code>width</code> and <code>height</code>.</p> <p>If no canvas is provided, this will create one. The to parameter can be a canvas Element, raw DOM canvas, or CSS selector string.</p> Source code in <code>pyscript/web.py</code> <pre><code>def snap(self, to=None, width=None, height=None):\n\"\"\"\n    Capture a video frame `to` a canvas element. Optionally scale to\n    `width` and `height`.\n    If no canvas is provided, this will create one. The to parameter\n    can be a canvas Element, raw DOM canvas, or CSS selector string.\n    \"\"\"\nwidth = width if width else self.videoWidth\nheight = height if height else self.videoHeight\nif is_none(to):\nto = canvas(width=width, height=height)\nelif isinstance(to, Element):\nif to.tag != \"canvas\":\nraise TypeError(\"Element to snap to must be a canvas.\")\nelif getattr(to, \"tagName\", \"\") == \"CANVAS\":\nto = canvas(dom_element=to)\nelif isinstance(to, str):\nnodelist = document.querySelectorAll(to)\nif nodelist.length == 0:\nraise TypeError(f\"No element with selector {to} to snap to.\")\nif nodelist[0].tagName != \"CANVAS\":\nraise TypeError(\"Element to snap to must be a canvas.\")\nto = canvas(dom_element=nodelist[0])\nto.draw(self, width, height)\nreturn to\n</code></pre>"},{"location":"api/websocket/","title":"<code>pyscript.websocket</code>","text":"<p>This module provides a Pythonic wrapper around the browser's WebSocket API, enabling two-way communication with WebSocket servers.</p> <p>Use this for real-time applications:</p> <ul> <li>Pythonic interface to browser WebSockets.</li> <li>Automatic handling of async event handlers.</li> <li>Support for receiving text (<code>str</code>) and binary (<code>memoryview</code>) data.</li> <li>Support for sending text (<code>str</code>) and binary (<code>bytes</code> and <code>bytearray</code>) data.</li> <li>Compatible with Pyodide and MicroPython.</li> <li>Works in webworker contexts.</li> <li>Naming deliberately follows the JavaScript WebSocket API closely for   familiarity.</li> </ul> <p>See the Python docs for an explanation of memoryview.</p> <pre><code>from pyscript import WebSocket\ndef on_open(event):\nprint(\"Connected!\")\nws.send(\"Hello server\")\ndef on_message(event):\nprint(f\"Received: {event.data}\")\ndef on_close(event):\nprint(\"Connection closed\")\nws = WebSocket(url=\"ws://localhost:8080/\")\nws.onopen = on_open\nws.onmessage = on_message\nws.onclose = on_close\n</code></pre>"},{"location":"api/websocket/#pyscript.websocket.WebSocketEvent","title":"<code>WebSocketEvent</code>","text":"<p>A read-only wrapper for WebSocket event objects.</p> <p>This class wraps browser WebSocket events and provides convenient access to event properties. It handles the conversion of binary data from JavaScript typed arrays to Python bytes-like objects.</p> <p>The most commonly used property is <code>event.data</code>, which contains the message data for \"message\" events.</p> <pre><code>def on_message(event):  # The event is a WebSocketEvent instance.\n# For text messages.\nif isinstance(event.data, str):\nprint(f\"Text: {event.data}\")\nelse:\n# For binary messages.\nprint(f\"Binary: {len(event.data)} bytes\")\n</code></pre> Source code in <code>pyscript/websocket.py</code> <pre><code>class WebSocketEvent:\n\"\"\"\n    A read-only wrapper for\n    [WebSocket event objects](https://developer.mozilla.org/en-US/docs/Web/API/MessageEvent).\n    This class wraps browser WebSocket events and provides convenient access\n    to event properties. It handles the conversion of binary data from\n    JavaScript typed arrays to Python bytes-like objects.\n    The most commonly used property is `event.data`, which contains the\n    message data for \"message\" events.\n    ```python\n    def on_message(event):  # The event is a WebSocketEvent instance.\n        # For text messages.\n        if isinstance(event.data, str):\n            print(f\"Text: {event.data}\")\n        else:\n            # For binary messages.\n            print(f\"Binary: {len(event.data)} bytes\")\n    ```\n    \"\"\"\ndef __init__(self, event):\n\"\"\"\n        Create a WebSocketEvent wrapper from an underlying JavaScript\n        `event`.\n        \"\"\"\nself._event = event\ndef __getattr__(self, attr):\n\"\"\"\n        Get an attribute `attr` from the underlying event object.\n        Handles special conversion of binary data from JavaScript typed\n        arrays to Python `memoryview` objects.\n        \"\"\"\nvalue = getattr(self._event, attr)\nif attr == \"data\" and not isinstance(value, str):\nif hasattr(value, \"to_py\"):\n# Pyodide - convert JavaScript typed array to Python.\nreturn value.to_py()\nelse:\n# MicroPython - manually convert JS ArrayBuffer.\nreturn memoryview(as_bytearray(value))\nreturn value\n</code></pre>"},{"location":"api/websocket/#pyscript.websocket.WebSocketEvent.__init__","title":"<code>__init__(event)</code>","text":"<p>Create a WebSocketEvent wrapper from an underlying JavaScript <code>event</code>.</p> Source code in <code>pyscript/websocket.py</code> <pre><code>def __init__(self, event):\n\"\"\"\n    Create a WebSocketEvent wrapper from an underlying JavaScript\n    `event`.\n    \"\"\"\nself._event = event\n</code></pre>"},{"location":"api/websocket/#pyscript.websocket.WebSocketEvent.__getattr__","title":"<code>__getattr__(attr)</code>","text":"<p>Get an attribute <code>attr</code> from the underlying event object.</p> <p>Handles special conversion of binary data from JavaScript typed arrays to Python <code>memoryview</code> objects.</p> Source code in <code>pyscript/websocket.py</code> <pre><code>def __getattr__(self, attr):\n\"\"\"\n    Get an attribute `attr` from the underlying event object.\n    Handles special conversion of binary data from JavaScript typed\n    arrays to Python `memoryview` objects.\n    \"\"\"\nvalue = getattr(self._event, attr)\nif attr == \"data\" and not isinstance(value, str):\nif hasattr(value, \"to_py\"):\n# Pyodide - convert JavaScript typed array to Python.\nreturn value.to_py()\nelse:\n# MicroPython - manually convert JS ArrayBuffer.\nreturn memoryview(as_bytearray(value))\nreturn value\n</code></pre>"},{"location":"api/websocket/#pyscript.websocket.WebSocket","title":"<code>WebSocket</code>","text":"<p>This class provides a Python-friendly interface to WebSocket connections, handling communication with WebSocket servers. It supports both text and binary data transmission.</p> <p>Access the underlying WebSocket methods and properties directly if needed. However, the wrapper provides a more Pythonic API. If you need to work with the raw JavaScript WebSocket instance, you can access it via the <code>_js_websocket</code> attribute.</p> <p>Using textual (<code>str</code>) data:</p> <pre><code>from pyscript import WebSocket\n# Create WebSocket with handlers as arguments.\ndef handle_message(event):\nprint(f\"Got: {event.data}\")\nws = WebSocket(\nurl=\"ws://echo.websocket.org/\",\nonmessage=handle_message\n)\n# Or assign handlers after creation.\ndef handle_open(event):\nws.send(\"Hello!\")\nws.onopen = handle_open\n</code></pre> <p>Using binary (<code>memoryview</code>) data:</p> <pre><code>def handle_message(event):\nif isinstance(event.data, str):\nprint(f\"Text: {event.data}\")\nelse:\n# Binary data as memoryview.\nprint(f\"Binary: {len(event.data)} bytes\")\nws = WebSocket(url=\"ws://example.com/\", onmessage=handle_message)\n# Send binary data.\ndata = bytearray([0x01, 0x02, 0x03])\nws.send(data)\n</code></pre> <p>Read more about Python's <code>memoryview</code> here.</p> Source code in <code>pyscript/websocket.py</code> <pre><code>class WebSocket:\n\"\"\"\n    This class provides a Python-friendly interface to WebSocket connections,\n    handling communication with WebSocket servers. It supports both text and\n    binary data transmission.\n    Access the underlying WebSocket methods and properties directly if needed.\n    However, the wrapper provides a more Pythonic API. If you need to work\n    with the raw JavaScript WebSocket instance, you can access it via the\n    `_js_websocket` attribute.\n    Using textual (`str`) data:\n    ```python\n    from pyscript import WebSocket\n    # Create WebSocket with handlers as arguments.\n    def handle_message(event):\n        print(f\"Got: {event.data}\")\n    ws = WebSocket(\n        url=\"ws://echo.websocket.org/\",\n        onmessage=handle_message\n    )\n    # Or assign handlers after creation.\n    def handle_open(event):\n        ws.send(\"Hello!\")\n    ws.onopen = handle_open\n    ```\n    Using binary (`memoryview`) data:\n    ```python\n    def handle_message(event):\n        if isinstance(event.data, str):\n            print(f\"Text: {event.data}\")\n        else:\n            # Binary data as memoryview.\n            print(f\"Binary: {len(event.data)} bytes\")\n    ws = WebSocket(url=\"ws://example.com/\", onmessage=handle_message)\n    # Send binary data.\n    data = bytearray([0x01, 0x02, 0x03])\n    ws.send(data)\n    ```\n    Read more about Python's\n    [`memoryview` here](https://docs.python.org/3/library/stdtypes.html#memoryview).\n    \"\"\"\n# WebSocket ready state constants.\nCONNECTING = 0\nOPEN = 1\nCLOSING = 2\nCLOSED = 3\ndef __init__(self, url, protocols=None, **handlers):\n\"\"\"\n        Create a new WebSocket connection from the given `url` (`ws://` or\n        `wss://`). Optionally specify `protocols` (a string or a list of\n        protocol strings) and event handlers (`onopen`, `onmessage`, etc.) as\n        keyword arguments.\n        These arguments and naming conventions mirror those of the\n        [underlying JavaScript WebSocket API](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket)\n        for familiarity.\n        If you need access to the underlying JavaScript WebSocket instance,\n        you can get it via the `_js_websocket` attribute.\n        ```python\n        # Basic connection.\n        ws = WebSocket(url=\"ws://localhost:8080/\")\n        # With protocol.\n        ws = WebSocket(\n            url=\"wss://example.com/socket\",\n            protocols=\"chat\"\n        )\n        # With handlers.\n        ws = WebSocket(\n            url=\"ws://localhost:8080/\",\n            onopen=lambda e: print(\"Connected\"),\n            onmessage=lambda e: print(e.data)\n        )\n        ```\n        \"\"\"\n# Create underlying JavaScript WebSocket.\nif protocols:\njs_websocket = js.WebSocket.new(url, protocols)\nelse:\njs_websocket = js.WebSocket.new(url)\n# Set binary type to arraybuffer for easier Python handling.\njs_websocket.binaryType = \"arraybuffer\"\n# Store the underlying WebSocket.\n# Use object.__setattr__ to bypass our custom __setattr__.\nobject.__setattr__(self, \"_js_websocket\", js_websocket)\n# Attach any event handlers passed as keyword arguments.\nfor handler_name, handler in handlers.items():\nsetattr(self, handler_name, handler)\ndef __getattr__(self, attr):\n\"\"\"\n        Get an attribute `attr` from the underlying WebSocket.\n        This allows transparent access to WebSocket properties like\n        `readyState`, `url`, `bufferedAmount`, etc.\n        \"\"\"\nreturn getattr(self._js_websocket, attr)\ndef __setattr__(self, attr, value):\n\"\"\"\n        Set an attribute `attr` on the WebSocket to the given `value`.\n        Event handler attributes (`onopen`, `onmessage`, etc.) are specially\n        handled to create proper proxies. Other attributes are set on the\n        underlying WebSocket directly.\n        \"\"\"\nif attr in [\"onclose\", \"onerror\", \"onmessage\", \"onopen\"]:\n_attach_event_handler(self._js_websocket, attr, value)\nelse:\nsetattr(self._js_websocket, attr, value)\ndef send(self, data):\n\"\"\"\n        Send `data` through the WebSocket.\n        Accepts both text (`str`) and binary data (`bytes`, `bytearray`, etc.).\n        Binary data is automatically converted to a JavaScript `Uint8Array`.\n        ```python\n        # Send text.\n        ws.send(\"Hello server!\")\n        # Send binary.\n        ws.send(bytes([1, 2, 3, 4]))\n        ws.send(bytearray([5, 6, 7, 8]))\n        ```\n        !!! warning\n            The WebSocket **must be in the OPEN state to send data**.\n        \"\"\"\nif isinstance(data, str):\nself._js_websocket.send(data)\nelse:\nbuffer = js.Uint8Array.new(len(data))\nfor index, byte_value in enumerate(data):\nbuffer[index] = byte_value\nself._js_websocket.send(buffer)\ndef close(self, code=None, reason=None):\n\"\"\"\n        Close the WebSocket connection. Optionally specify a `code` (`int`)\n        and a `reason` (`str`) for closing the connection.\n        ```python\n        # Normal close.\n        ws.close()\n        # Close with code and reason.\n        ws.close(code=1000, reason=\"Task completed\")\n        ```\n        Usage and values for `code` and `reasons`\n        [are explained here](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/close).\n        \"\"\"\nif code and reason:\nself._js_websocket.close(code, reason)\nelif code:\nself._js_websocket.close(code)\nelse:\nself._js_websocket.close()\n</code></pre>"},{"location":"api/websocket/#pyscript.websocket.WebSocket.__init__","title":"<code>__init__(url, protocols=None, **handlers)</code>","text":"<p>Create a new WebSocket connection from the given <code>url</code> (<code>ws://</code> or <code>wss://</code>). Optionally specify <code>protocols</code> (a string or a list of protocol strings) and event handlers (<code>onopen</code>, <code>onmessage</code>, etc.) as keyword arguments.</p> <p>These arguments and naming conventions mirror those of the underlying JavaScript WebSocket API for familiarity.</p> <p>If you need access to the underlying JavaScript WebSocket instance, you can get it via the <code>_js_websocket</code> attribute.</p> <pre><code># Basic connection.\nws = WebSocket(url=\"ws://localhost:8080/\")\n# With protocol.\nws = WebSocket(\nurl=\"wss://example.com/socket\",\nprotocols=\"chat\"\n)\n# With handlers.\nws = WebSocket(\nurl=\"ws://localhost:8080/\",\nonopen=lambda e: print(\"Connected\"),\nonmessage=lambda e: print(e.data)\n)\n</code></pre> Source code in <code>pyscript/websocket.py</code> <pre><code>def __init__(self, url, protocols=None, **handlers):\n\"\"\"\n    Create a new WebSocket connection from the given `url` (`ws://` or\n    `wss://`). Optionally specify `protocols` (a string or a list of\n    protocol strings) and event handlers (`onopen`, `onmessage`, etc.) as\n    keyword arguments.\n    These arguments and naming conventions mirror those of the\n    [underlying JavaScript WebSocket API](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket)\n    for familiarity.\n    If you need access to the underlying JavaScript WebSocket instance,\n    you can get it via the `_js_websocket` attribute.\n    ```python\n    # Basic connection.\n    ws = WebSocket(url=\"ws://localhost:8080/\")\n    # With protocol.\n    ws = WebSocket(\n        url=\"wss://example.com/socket\",\n        protocols=\"chat\"\n    )\n    # With handlers.\n    ws = WebSocket(\n        url=\"ws://localhost:8080/\",\n        onopen=lambda e: print(\"Connected\"),\n        onmessage=lambda e: print(e.data)\n    )\n    ```\n    \"\"\"\n# Create underlying JavaScript WebSocket.\nif protocols:\njs_websocket = js.WebSocket.new(url, protocols)\nelse:\njs_websocket = js.WebSocket.new(url)\n# Set binary type to arraybuffer for easier Python handling.\njs_websocket.binaryType = \"arraybuffer\"\n# Store the underlying WebSocket.\n# Use object.__setattr__ to bypass our custom __setattr__.\nobject.__setattr__(self, \"_js_websocket\", js_websocket)\n# Attach any event handlers passed as keyword arguments.\nfor handler_name, handler in handlers.items():\nsetattr(self, handler_name, handler)\n</code></pre>"},{"location":"api/websocket/#pyscript.websocket.WebSocket.__getattr__","title":"<code>__getattr__(attr)</code>","text":"<p>Get an attribute <code>attr</code> from the underlying WebSocket.</p> <p>This allows transparent access to WebSocket properties like <code>readyState</code>, <code>url</code>, <code>bufferedAmount</code>, etc.</p> Source code in <code>pyscript/websocket.py</code> <pre><code>def __getattr__(self, attr):\n\"\"\"\n    Get an attribute `attr` from the underlying WebSocket.\n    This allows transparent access to WebSocket properties like\n    `readyState`, `url`, `bufferedAmount`, etc.\n    \"\"\"\nreturn getattr(self._js_websocket, attr)\n</code></pre>"},{"location":"api/websocket/#pyscript.websocket.WebSocket.__setattr__","title":"<code>__setattr__(attr, value)</code>","text":"<p>Set an attribute <code>attr</code> on the WebSocket to the given <code>value</code>.</p> <p>Event handler attributes (<code>onopen</code>, <code>onmessage</code>, etc.) are specially handled to create proper proxies. Other attributes are set on the underlying WebSocket directly.</p> Source code in <code>pyscript/websocket.py</code> <pre><code>def __setattr__(self, attr, value):\n\"\"\"\n    Set an attribute `attr` on the WebSocket to the given `value`.\n    Event handler attributes (`onopen`, `onmessage`, etc.) are specially\n    handled to create proper proxies. Other attributes are set on the\n    underlying WebSocket directly.\n    \"\"\"\nif attr in [\"onclose\", \"onerror\", \"onmessage\", \"onopen\"]:\n_attach_event_handler(self._js_websocket, attr, value)\nelse:\nsetattr(self._js_websocket, attr, value)\n</code></pre>"},{"location":"api/websocket/#pyscript.websocket.WebSocket.send","title":"<code>send(data)</code>","text":"<p>Send <code>data</code> through the WebSocket.</p> <p>Accepts both text (<code>str</code>) and binary data (<code>bytes</code>, <code>bytearray</code>, etc.). Binary data is automatically converted to a JavaScript <code>Uint8Array</code>.</p> <pre><code># Send text.\nws.send(\"Hello server!\")\n# Send binary.\nws.send(bytes([1, 2, 3, 4]))\nws.send(bytearray([5, 6, 7, 8]))\n</code></pre> <p>Warning</p> <p>The WebSocket must be in the OPEN state to send data.</p> Source code in <code>pyscript/websocket.py</code> <pre><code>def send(self, data):\n\"\"\"\n    Send `data` through the WebSocket.\n    Accepts both text (`str`) and binary data (`bytes`, `bytearray`, etc.).\n    Binary data is automatically converted to a JavaScript `Uint8Array`.\n    ```python\n    # Send text.\n    ws.send(\"Hello server!\")\n    # Send binary.\n    ws.send(bytes([1, 2, 3, 4]))\n    ws.send(bytearray([5, 6, 7, 8]))\n    ```\n    !!! warning\n        The WebSocket **must be in the OPEN state to send data**.\n    \"\"\"\nif isinstance(data, str):\nself._js_websocket.send(data)\nelse:\nbuffer = js.Uint8Array.new(len(data))\nfor index, byte_value in enumerate(data):\nbuffer[index] = byte_value\nself._js_websocket.send(buffer)\n</code></pre>"},{"location":"api/websocket/#pyscript.websocket.WebSocket.close","title":"<code>close(code=None, reason=None)</code>","text":"<p>Close the WebSocket connection. Optionally specify a <code>code</code> (<code>int</code>) and a <code>reason</code> (<code>str</code>) for closing the connection.</p> <pre><code># Normal close.\nws.close()\n# Close with code and reason.\nws.close(code=1000, reason=\"Task completed\")\n</code></pre> <p>Usage and values for <code>code</code> and <code>reasons</code> are explained here.</p> Source code in <code>pyscript/websocket.py</code> <pre><code>def close(self, code=None, reason=None):\n\"\"\"\n    Close the WebSocket connection. Optionally specify a `code` (`int`)\n    and a `reason` (`str`) for closing the connection.\n    ```python\n    # Normal close.\n    ws.close()\n    # Close with code and reason.\n    ws.close(code=1000, reason=\"Task completed\")\n    ```\n    Usage and values for `code` and `reasons`\n    [are explained here](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/close).\n    \"\"\"\nif code and reason:\nself._js_websocket.close(code, reason)\nelif code:\nself._js_websocket.close(code)\nelse:\nself._js_websocket.close()\n</code></pre>"},{"location":"api/workers/","title":"<code>pyscript.workers</code>","text":"<p>This module provides access to named web workers defined in <code>&lt;script&gt;</code> tags, and utilities for dynamically creating workers from Python code.</p> <p>Named workers are Python web workers defined in HTML with a <code>name</code> attribute that can be referenced from the main thread or other workers. This module provides the <code>workers</code> object for accessing named workers and the <code>create_named_worker()</code> function for dynamically creating them.</p> <p>Accessing named workers:</p> <pre><code>&lt;!-- Define a named worker --&gt;\n&lt;script type=\"py\" worker name=\"calculator\"&gt;\ndef add(a, b):\nreturn a + b\n__export__ = [\"add\"]\n&lt;/script&gt;\n&lt;!-- Access from main thread --&gt;\n&lt;script type=\"mpy\"&gt;\nfrom pyscript import workers\ncalc = await workers[\"calculator\"]\nresult = await calc.add(5, 3)\nprint(result)  # 8\n&lt;/script&gt;\n</code></pre> <p>Dynamically creating named workers:</p> <pre><code>from pyscript import create_named_worker\n# Create a worker from a Python file.\nworker = await create_named_worker(\nsrc=\"./background_tasks.py\",\nname=\"task-processor\"\n)\n# Use the worker's exported functions.\nresult = await worker.process_data([1, 2, 3, 4, 5])\nprint(result)\n</code></pre> <p>Key features: - Access (<code>await</code>) named workers via dictionary-like syntax. - Dynamically create workers from Python. - Cross-interpreter support (Pyodide and MicroPython).</p> <p>Worker access is asynchronous - you must <code>await workers[name]</code> to get a reference to the worker. This is because workers may not be ready immediately at startup.</p>"},{"location":"api/workers/#pyscript.workers.workers","title":"<code>workers = _ReadOnlyWorkersProxy()</code>  <code>module-attribute</code>","text":"<p>Global proxy for accessing named web workers.</p>"},{"location":"api/workers/#pyscript.workers.create_named_worker","title":"<code>create_named_worker(src, name, config=None, type='py')</code>  <code>async</code>","text":"<p>Dynamically create a web worker with a <code>src</code> Python file, a unique <code>name</code> and optional <code>config</code> (dict or JSON string) and <code>type</code> (<code>py</code> for Pyodide or <code>mpy</code> for MicroPython, the default is <code>py</code>).</p> <p>This function creates a new web worker by injecting a <code>&lt;script&gt;</code> tag into the document. The worker will be accessible via the <code>workers</code> proxy once it's ready.</p> <p>It returns a promise that resolves to the worker reference when ready.</p> <pre><code>from pyscript import create_named_worker\n# Create a Pyodide worker.\nworker = await create_named_worker(\nsrc=\"./my_worker.py\",\nname=\"background-worker\"\n)\n# Use the worker.\nresult = await worker.process_data()\n# Create with standard PyScript configuration.\nworker = await create_named_worker(\nsrc=\"./processor.py\",\nname=\"data-processor\",\nconfig={\"packages\": [\"numpy\", \"pandas\"]}\n)\n# Use MicroPython instead.\nworker = await create_named_worker(\nsrc=\"./lightweight_worker.py\",\nname=\"micro-worker\",\ntype=\"mpy\"\n)\n</code></pre> <p>Info</p> <p>The worker script should define <code>__export__</code> to specify which functions or objects are accessible from the main thread.</p> Source code in <code>pyscript/workers.py</code> <pre><code>async def create_named_worker(src, name, config=None, type=\"py\"):\n\"\"\"\n    Dynamically create a web worker with a `src` Python file, a unique\n    `name` and optional `config` (dict or JSON string) and `type` (`py`\n    for Pyodide or `mpy` for MicroPython, the default is `py`).\n    This function creates a new web worker by injecting a `&lt;script&gt;` tag into\n    the document. The worker will be accessible via the `workers` proxy once\n    it's ready.\n    It returns a promise that resolves to the worker reference when ready.\n    ```python\n    from pyscript import create_named_worker\n    # Create a Pyodide worker.\n    worker = await create_named_worker(\n        src=\"./my_worker.py\",\n        name=\"background-worker\"\n    )\n    # Use the worker.\n    result = await worker.process_data()\n    # Create with standard PyScript configuration.\n    worker = await create_named_worker(\n        src=\"./processor.py\",\n        name=\"data-processor\",\n        config={\"packages\": [\"numpy\", \"pandas\"]}\n    )\n    # Use MicroPython instead.\n    worker = await create_named_worker(\n        src=\"./lightweight_worker.py\",\n        name=\"micro-worker\",\n        type=\"mpy\"\n    )\n    ```\n    !!! info\n        **The worker script should define** `__export__` to specify which\n        functions or objects are accessible from the main thread.\n    \"\"\"\n# Create script element for the worker.\nscript = js.document.createElement(\"script\")\nscript.type = type\nscript.src = src\n# Mark as a worker with a name.\nscript.setAttribute(\"worker\", \"\")\nscript.setAttribute(\"name\", name)\n# Add configuration if provided.\nif config:\nif isinstance(config, str):\nconfig_str = config\nelse:\nconfig_str = json.dumps(config)\nscript.setAttribute(\"config\", config_str)\n# Inject the script into the document and await the result.\njs.document.body.append(script)\nreturn await workers[name]\n</code></pre>"},{"location":"example-apps/overview/","title":"PyScript Example Applications","text":"<p>This directory contains complete, working example applications demonstrating PyScript features and capabilities. Each example accompanies and is embedded within a specific section of the PyScript documentation.</p> <p>These applications show idiomatic PyScript patterns and best practices. Use them as starting points for your own projects or learning resources for understanding how PyScript works.</p>"},{"location":"example-apps/overview/#running-the-examples","title":"Running the examples","text":"<p>Each example is self-contained with its own <code>index.html</code> file. To run an application locally with Python (we'll use the \"Pirate Translator\" as an example):</p> <pre><code># Navigate to the example directory.\ncd example_apps/pirate-translator\n\n# Serve with any web server.\npython -m http.server 8000\n# Visit http://localhost:8000 in your browser.\n</code></pre> <p>Sometimes an example uses web-workers, and these need the server to respond with special headers. The  <code>mini-coi</code> command (which uses node.js under the hood) does the right thing for you:</p> <pre><code># Navigate to the worker-related project.\ncd example_apps/prime-worker\n\n# Serve the app with the correct headers.\nnpx mini-coi .\n\n# Visit http://localhost:8080/ in your browser.\n</code></pre> <p>All examples use the latest PyScript release referenced in this version of the docs. Check each example's <code>index.html</code> for the reference to the specific version of PyScript in use.</p>"},{"location":"example-apps/overview/#available-examples","title":"Available examples","text":""},{"location":"example-apps/overview/#beginning-pyscript","title":"Beginning PyScript","text":"<p>Pirate Translator (Polyglot) - A simple text transformation application that demonstrates basic PyScript concepts: writing Python in HTML, handling user input, and manipulating the DOM. This is the first example new users encounter.</p> <p>Run the app |  View the code on GitHub | Beginning PyScript</p>"},{"location":"example-apps/overview/#dom-manipulation","title":"DOM manipulation","text":"<p>Task Board (<code>pyscript.web</code>) - A task management application using <code>pyscript.web</code>, PyScript's idiomatic API for DOM manipulation. Shows how to create, modify, and remove elements using Pythonic patterns along with element access, creating elements with Python functions, event handlers, dynamic content updates.</p> <p>Run the app |  View the code on GitHub | The DOM</p> <p>Task Board (FFI) - The same task management application using the Foreign Function Interface (FFI) instead of <code>pyscript.web</code>. Demonstrates direct JavaScript interoperability for cases where <code>pyscript.web</code> isn't sufficient along with direct JavaScript object access, <code>ffi.create_proxy</code> for event handlers, working with JavaScript APIs, when to use FFI vs <code>pyscript.web</code>.</p> <p>Run the app |  View the code on GitHub | The DOM | The FFI</p>"},{"location":"example-apps/overview/#events","title":"Events","text":"<p>Colour Picker - An interactive colour picker demonstrating event handling patterns. Shows how to respond to user interactions and update the interface based on input. Specific use of event handlers via <code>pyscript.web</code>, handling multiple input types (sliders, text), real-time updates, colour manipulation.</p> <p>Run the app |  View the code on GitHub | Events</p>"},{"location":"example-apps/overview/#display","title":"Display","text":"<p>Display Demo - A comprehensive demonstration of PyScript's <code>display()</code> capabilities including basic types and HTML, custom <code>_repr_html_()</code> methods for objects, displaying Pandas DataFrames as formatted tables, creating Matplotlib plots (single and subplots), incremental UI updates with <code>async</code>, appending vs replacing content. This is how to present data and visualisations in the browser with PyScript.</p> <p>Run the app |  View the code on GitHub | Display</p>"},{"location":"example-apps/overview/#workers","title":"Workers","text":"<p>Prime Workers - A computationally intensive application that finds prime numbers using workers to keep the interface responsive. Includes both MicroPython and Pyodide implementations with an optional NumPy comparison. Specifically, this code shows how to use web workers for background computation, MicroPython vsPyodide performance, worker-main thread communication, and responsive UI during computation.</p> <p>Run the app |  View the code on GitHub | Workers</p>"},{"location":"example-apps/overview/#filesystem","title":"Filesystem","text":"<p>Warning</p> <p>This example application only works on Chrome based browsers.</p> <p>Note Taker - A simple note-taking application that saves and loads data to/from the user's local filesystem. Shows file operations and data persistence patterns via file-related I/O with <code>open()</code>, reading and writing files, virtual filesystem concepts, mounting local filesystems, permissions and user approvals, data persistence via the local filesystem mounted to locations on the virtual filesystem.</p> <p>Run the app |  View the code on GitHub | Filesystems</p>"},{"location":"example-apps/overview/#media-devices","title":"Media devices","text":"<p>Photobooth - A webcam application demonstrating media device access. Captures photos from the user's camera using the PyScript media API. Demonstrates camera access with <code>pyscript.media</code>, requesting user permissions, capturing still frames, canvas manipulation.</p> <p>Run the app |  View the code on GitHub | Media</p>"},{"location":"example-apps/overview/#pygame","title":"PyGame","text":"<p>Bouncing Ball - A simple game demonstrating PyGame-CE support in PyScript. Shows the classic bouncing ball with collision detection running entirely in the browser. This shows idiomatic PyGame-CE integration with PyScript, game loop with <code>await asyncio.sleep()</code>, loading assets, basic game physics.</p> <p>Run the app |  View the code on GitHub | PyGame Support</p>"},{"location":"example-apps/overview/#best-practices-demonstrated","title":"Best practices demonstrated","text":"<p>All examples follow PyScript best practices:</p> <p>Idiomatic patterns - Prefer <code>pyscript.web</code> over FFI unless FFI is specifically needed (task-board-ffi allows you to compare and contrast these approaches).</p> <p>Clear code - Comprehensive comments explaining intent, meaningful variable names, simple and direct implementations.</p> <p>Proper structure - Separate concerns, use workers for heavy computation, handle errors gracefully.</p> <p>Modern PyScript - Use current APIs and patterns, avoid deprecated features, follow the latest recommendations.</p>"},{"location":"example-apps/overview/#contributing-examples","title":"Contributing examples","text":"<p>If you've built something useful with PyScript and think it would make a good example, consider contributing it. Good example applications:</p> <ul> <li>Demonstrate specific PyScript features clearly.</li> <li>Are self-contained and easy to understand.</li> <li>Follow the established structure and style.</li> <li>Include comprehensive documentation.</li> </ul>"},{"location":"example-apps/overview/#whats-next","title":"What's next","text":"<p>After exploring these examples, consult the PyScript user guide for comprehensive documentation on all features. The guide provides deeper explanations of concepts demonstrated in these examples.</p> <p>Visit pyscript.net for additional resources, community examples, and the latest PyScript news.</p> <p>Join the PyScript Discord to discuss examples, get help, and share your own creations with the community.</p>"},{"location":"example-apps/bouncing-ball/info/","title":"Bouncing Ball","text":"<p>Run the app |  View the code on GitHub</p> <p>A simple PyGame-CE demonstration running in the browser with PyScript. Based on the PyGame-CE quickstart tutorial.</p>"},{"location":"example-apps/bouncing-ball/info/#what-it-demonstrates","title":"What it demonstrates","text":"<ul> <li>Running PyGame-CE in the browser with the <code>py-game</code> script type.</li> <li>Using <code>await asyncio.sleep()</code> for frame timing in the browser.</li> <li>Loading game assets through PyScript configuration.</li> <li>Basic game loop with collision detection.</li> </ul>"},{"location":"example-apps/bouncing-ball/info/#how-it-works","title":"How it works","text":"<p>The game initialises a pygame display, loads a ball image, and runs an infinite game loop. Each frame, it updates the ball position, checks for wall collisions (reversing speed on impact), renders the scene, and yields control to the browser with <code>await asyncio.sleep(1/60)</code>.</p> <p>The <code>await</code> at the top level works because PyScript provides an async context. This wouldn't run in standard Python without wrapping in an async function.</p>"},{"location":"example-apps/colour-picker/info/","title":"Interactive Colour Picker","text":"<p>Run the app |  View the code on GitHub </p> <p>A colour picker application demonstrating various event handling patterns in PyScript.</p>"},{"location":"example-apps/colour-picker/info/#what-it-demonstrates","title":"What it demonstrates","text":"<ul> <li>Multiple event types with <code>input</code> events (RGB sliders update in real-time),  <code>change</code> events (number inputs and hex input) and <code>click</code> events (preset buttons and history colours).</li> <li>Stacked decorators with a single function handling multiple sliders with   <code>@when</code> stacked three times.</li> <li>Custom events via the <code>colour_changed</code> Event for decoupling colour updates   from app history and to show how to separate concerns in your application.</li> <li>Working with form inputs of different types:<ul> <li>Range sliders, number inputs, text inputs.</li> <li>Synchronising values across different input types.</li> <li>Validating and clamping values.</li> </ul> </li> <li>Dynamic UI updates:<ul> <li>Updating display colour.</li> <li>Maintaining colour history.</li> <li>Creating history elements dynamically.</li> </ul> </li> </ul>"},{"location":"example-apps/colour-picker/info/#features","title":"Features","text":"<ul> <li>Adjust colours using RGB sliders.</li> <li>Enter RGB values directly with number inputs.</li> <li>Enter hex colour codes.</li> <li>Quick selection from preset colours.</li> <li>Colour history (last 10 colours).</li> <li>Click history to restore colours.</li> <li>Real-time colour display with hex code.</li> </ul>"},{"location":"example-apps/colour-picker/info/#files","title":"Files","text":"<ul> <li><code>index.html</code> - Page structure and styling.</li> <li><code>main.py</code> - Event handling logic demonstrating various patterns.</li> </ul>"},{"location":"example-apps/colour-picker/info/#how-it-works","title":"How it works","text":""},{"location":"example-apps/colour-picker/info/#stacking-decorators","title":"Stacking decorators","text":"<pre><code>@when(\"input\", \"#red-slider\")\n@when(\"input\", \"#green-slider\")\n@when(\"input\", \"#blue-slider\")\ndef handle_slider_change(event):\n# Single function handles all three sliders.\npass\n</code></pre>"},{"location":"example-apps/colour-picker/info/#custom-events-for-decoupling","title":"Custom events for decoupling","text":"<pre><code># Define custom event.\ncolour_changed = Event()\n# Trigger it when colour updates.\ncolour_changed.trigger(hex_colour)\n# Handle it separately.\n@when(colour_changed)\ndef handle_colour_changed(hex_colour):\nadd_to_history(hex_colour)\n</code></pre>"},{"location":"example-apps/colour-picker/info/#working-with-form-inputs","title":"Working with form inputs","text":"<pre><code>@when(\"input\", \"#red-slider\")\ndef handle_slider_change(event):\n# Get value from slider.\nvalue = int(event.target.value)\n# Update display.\nupdate_display(value)\n</code></pre>"},{"location":"example-apps/display-demo/info/","title":"Display Demo","text":"<p>Run the app |  View the code on GitHub</p> <p>A comprehensive demonstration of PyScript's <code>display()</code> function and its various capabilities including Pandas DataFrames and Matplotlib plots.</p>"},{"location":"example-apps/display-demo/info/#what-it-demonstrates","title":"What it demonstrates","text":"<p>Rather a lot! Most of the common <code>display()</code> patterns are covered:</p> <ul> <li>Basic types:<ul> <li>Strings, numbers, booleans, lists, dictionaries.</li> <li>Automatic HTML escaping for safety.</li> </ul> </li> <li>HTML content:<ul> <li>Using <code>HTML()</code> to render unescaped HTML.</li> <li>Creating styled content boxes.</li> <li>Building rich interfaces.</li> </ul> </li> <li>Custom objects:<ul> <li>Implementing <code>_repr_html_()</code> for custom rendering.</li> <li>Creating reusable display components.</li> <li>Table generation with custom styling.</li> </ul> </li> <li>Multiple values:<ul> <li>Displaying several values in one call.</li> <li>Appending vs. replacing content.</li> </ul> </li> <li>Incremental updates:<ul> <li>Building UIs progressively.</li> <li>Showing status updates with delays.</li> <li>Creating loading sequences.</li> </ul> </li> <li>Pandas DataFrames:<ul> <li>Displaying tabular data with Pandas.</li> <li>Automatic HTML table rendering.</li> <li>Computing summary statistics.</li> </ul> </li> <li>Matplotlib plots:<ul> <li>Creating line plots, scatter plots.</li> <li>Multiple subplots in a single figure.</li> <li>Customising axes, labels, and styling.</li> </ul> </li> </ul>"},{"location":"example-apps/display-demo/info/#features","title":"Features","text":"<p>Nine interactive panels. Once PyScript has loaded they reveal how <code>display()</code> can be used to handle:</p> <ol> <li>Basic Types - Standard Python objects.</li> <li>HTML Content - Rich formatted content.</li> <li>Custom Objects - Classes with custom display logic.</li> <li>Multiple Values - Batch display operations.</li> <li>Data Cards - Styled metric cards using custom classes.</li> <li>Incremental Updates - Progressive UI building with async.</li> <li>Pandas DataFrame - Tabular data with Pandas.</li> <li>Matplotlib Plot - Single plot with sine wave.</li> <li>Multiple Plots - Four subplots showing different functions.</li> </ol>"},{"location":"example-apps/display-demo/info/#files","title":"Files","text":"<ul> <li><code>index.html</code> - Page structure, styling, and PyScript configuration.</li> <li><code>main.py</code> - Display demonstrations with custom classes, DataFrames,   and plots.</li> </ul>"},{"location":"example-apps/display-demo/info/#how-it-works","title":"How it works","text":""},{"location":"example-apps/display-demo/info/#custom-display-representations","title":"Custom display representations","text":"<pre><code>class MetricCard:\n\"\"\"\n    A metric card with custom HTML rendering.\n    \"\"\"\ndef __init__(self, label, value, colour):\nself.label = label\nself.value = value\nself.colour = colour\ndef _repr_html_(self):\n\"\"\"\n        Return custom HTML.\n        \"\"\"\nreturn f\"&lt;div class='card'&gt;{self.label}: {self.value}&lt;/div&gt;\"\n# Displays with custom HTML.\ndisplay(MetricCard(\"Users\", \"1,234\", \"#667eea\"))\n</code></pre>"},{"location":"example-apps/display-demo/info/#pandas-dataframes","title":"Pandas DataFrames","text":"<pre><code>import pandas as pd\ndata = {\n'Product': ['Laptop', 'Mouse', 'Keyboard'],\n'Price': [999.99, 24.99, 79.99],\n'Stock': [15, 87, 43]\n}\ndf = pd.DataFrame(data)\n# Displays as formatted HTML table.\ndisplay(df, target=\"output\")\n</code></pre>"},{"location":"example-apps/display-demo/info/#matplotlib-plots","title":"Matplotlib plots","text":"<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\nx = np.linspace(0, 10, 100)\ny = np.sin(x)\nfig, ax = plt.subplots(figsize=(8, 4))\nax.plot(x, y, 'b-', linewidth=2)\nax.set_xlabel('X axis')\nax.set_ylabel('Y axis')\nax.set_title('Sine Wave')\nax.grid(True)\n# Displays plot as image.\ndisplay(fig, target=\"output\")\nplt.close(fig)\n</code></pre>"},{"location":"example-apps/display-demo/info/#incremental-building","title":"Incremental building","text":"<pre><code>async def build_ui():\n\"\"\"\n    Build UI progressively.\n    \"\"\"\ndisplay(\"Step 1\", target=\"output\", append=False)\nawait asyncio.sleep(1)\ndisplay(\"Step 2\", target=\"output\")\nawait asyncio.sleep(1)\ndisplay(\"Complete!\", target=\"output\")\n</code></pre>"},{"location":"example-apps/note-taker/info/","title":"Note Taker","text":"<p>Run the app |  View the code on GitHub</p> <p>A simple note-taking application demonstrating local filesystem access.</p>"},{"location":"example-apps/note-taker/info/#what-it-demonstrates","title":"What it demonstrates","text":"<ul> <li>Mounting a local directory on user interaction.</li> <li>Writing files to the mounted directory.</li> <li>Syncing changes to persist them locally.</li> <li>Proper error handling.</li> </ul>"},{"location":"example-apps/note-taker/info/#how-it-works","title":"How it works","text":"<p>Click \"Select Folder\" to mount a local directory. The browser will prompt you to choose a folder. Once mounted, you can type notes and save them to your chosen folder.</p> <p>The key pattern:</p> <pre><code># Mount (user selects folder).\nawait fs.mount(\"/notes\")\n# Write files.\nwith open(\"/notes/my-note.txt\", \"w\") as f:\nf.write(note_text)\n# Sync to persist changes.\nawait fs.sync(\"/notes\")\n</code></pre>"},{"location":"example-apps/note-taker/info/#browser-support","title":"Browser support","text":"<p>This only works in Chromium-based browsers (Chrome, Edge, Brave, Vivaldi). Firefox and Safari don't support the File System Access API yet.</p>"},{"location":"example-apps/photobooth/info/","title":"Photobooth","text":"<p>Run the app |  View the code on GitHub </p> <p>A simple webcam application demonstrating media device access and still frame capture.</p>"},{"location":"example-apps/photobooth/info/#what-it-demonstrates","title":"What it demonstrates","text":"<ul> <li>Requesting camera access with <code>Device.request_stream()</code>.</li> <li>Displaying live video in a video element.</li> <li>Capturing still frames from video using canvas.</li> <li>Proper error handling for permission denial.</li> </ul>"},{"location":"example-apps/photobooth/info/#how-it-works","title":"How it works","text":"<p>Click \"Start Camera\" to request webcam access. Once granted, the live video feed appears. Click \"Capture Photo\" to grab the current frame and display it as a still image on the canvas.</p> <p>The key technique is using the canvas <code>drawImage()</code> method to copy the current video frame:</p> <pre><code># Get the canvas context.\nctx = canvas.getContext(\"2d\")\n# Draw the current video frame.\nctx.drawImage(video, 0, 0, width, height)\n</code></pre>"},{"location":"example-apps/photobooth/info/#browser-support","title":"Browser support","text":"<p>This requires a browser with webcam support and HTTPS (or localhost). The user must grant camera permission when prompted.</p>"},{"location":"example-apps/pirate-translator/info/","title":"Pirate Translator \ud83e\udd9c \ud83d\udcac \ud83c\uddec\ud83c\udde7 \u27a1\ufe0f \ud83c\udff4\u200d\u2620\ufe0f","text":"<p>Run the app |  View the code on GitHub </p> <p>A simple PyScript application that translates English text into Pirate speak.</p>"},{"location":"example-apps/pirate-translator/info/#what-it-demonstrates","title":"What it demonstrates","text":"<ul> <li>Basic PyScript application structure (HTML, Python, configuration).</li> <li>Using <code>pyscript.web</code> to interact with page elements.</li> <li>Event handling with the <code>@when</code> decorator.</li> <li>Installing and using third-party Python packages (arrr).</li> </ul>"},{"location":"example-apps/pirate-translator/info/#files","title":"Files","text":"<ul> <li><code>index.html</code> - The web page to display.</li> <li><code>main.py</code> - Python code that handles the translation.</li> <li><code>pyscript.json</code> - Configuration specifying required packages.</li> </ul>"},{"location":"example-apps/pirate-translator/info/#how-it-works","title":"How it works","text":"<ol> <li>User types English text into an input field.</li> <li>User clicks the \"Translate\" button.</li> <li>The <code>@when</code> decorator connects the button's click event to <code>translate_english</code>.</li> <li>Function retrieves the input text using <code>web.page[\"english\"]</code>.</li> <li>Text is translated using the <code>arrr</code> library.</li> <li>Result is displayed in the output div using <code>web.page[\"output\"]</code>.</li> </ol>"},{"location":"example-apps/prime-worker/info/","title":"Prime Number Calculator with Workers","text":"<p>Run the app |  View the code on GitHub </p> <p>A demonstration of PyScript workers showing how to keep the main thread responsive whilst performing heavy computation in a background worker.</p> <ol> <li>Enter a number (10 to 100,000).</li> <li>Click \"Find Primes\".</li> <li>Watch the green heartbeat - it never stops pulsing.</li> <li>See primes appear in real-time.</li> </ol> <p>Try interacting with the page whilst it's computing - everything stays smooth because the main thread is never blocked.</p>"},{"location":"example-apps/prime-worker/info/#what-it-demonstrates","title":"What it demonstrates","text":"<ul> <li>Worker architecture:<ul> <li>Main thread: MicroPython (lightweight, fast startup, responsive UI).</li> <li>Worker thread: Pyodide with numpy (heavy computation, numerical libraries).</li> <li>A clear separation of concerns.</li> </ul> </li> <li>Key patterns:<ul> <li>Starting a worker from the main thread.</li> <li>Calling worker methods with <code>await</code>.</li> <li>Sending incremental results back via callbacks.</li> <li>Using <code>pyscript.sync</code> to expose functions between threads.</li> <li>Keeping the main thread responsive during computation.</li> </ul> </li> <li>Visual feedback:<ul> <li>Animated \"heartbeat\" proves main thread never blocks.</li> <li>Real-time display of primes as they're found.</li> <li>Status updates showing worker progress.</li> </ul> </li> </ul>"},{"location":"example-apps/prime-worker/info/#features","title":"Features","text":"<ul> <li>MicroPython on main thread:<ul> <li>Fast startup (no heavy packages to load).</li> <li>Lightweight (perfect for UI interactions).</li> <li>Stays responsive (no blocking operations).</li> </ul> </li> <li>Pyodide in worker:<ul> <li>Full Python with scientific libraries (numpy).</li> <li>Heavy computation off the main thread.</li> <li>Can use the full Python ecosystem.</li> </ul> </li> <li>Best of both worlds:<ul> <li>Fast, responsive UI.</li> <li>Powerful computation when needed.</li> <li>Users never see a frozen interface.</li> </ul> </li> </ul>"},{"location":"example-apps/prime-worker/info/#files","title":"Files","text":"<ul> <li><code>index.html</code> - Page structure and styling.</li> <li><code>main.py</code> - Main thread logic (MicroPython).</li> <li><code>worker.py</code> - Worker thread logic (Pyodide with numpy).</li> <li><code>worker-config.json</code> - Worker configuration (numpy package).</li> </ul>"},{"location":"example-apps/prime-worker/info/#how-it-works","title":"How it works","text":""},{"location":"example-apps/prime-worker/info/#main-thread-micropython","title":"Main thread (MicroPython)","text":"<p>The main thread handles the user interface:</p> <ol> <li>Gets reference to the worker via <code>pyscript.workers</code>.</li> <li>Registers a callback function (<code>handle_prime</code>) via <code>pyscript.sync</code>.</li> <li>Calls the worker's <code>find_primes()</code> method when the button is clicked.</li> <li>Receives prime numbers via the callback and updates the display.</li> <li>Stays responsive throughout (watch the pulsing green dot).</li> </ol>"},{"location":"example-apps/prime-worker/info/#worker-thread-pyodide","title":"Worker thread (Pyodide)","text":"<p>The worker does the heavy lifting:</p> <ol> <li>Exposes <code>find_primes()</code> method via <code>@sync</code> decorator.</li> <li>Uses numpy's efficient array operations for the Sieve of Eratosthenes.</li> <li>Calls back to the main thread's <code>handle_prime()</code> for each prime found.</li> <li>Sends results in batches with small delays to keep UI smooth.</li> <li>Returns a summary when complete.</li> </ol>"},{"location":"example-apps/prime-worker/info/#starting-the-worker","title":"Starting the worker","text":"<pre><code># Main thread gets reference to worker defined in HTML.\nfrom pyscript import workers\nworker = await workers.py  # Name from script tag's type.\n</code></pre>"},{"location":"example-apps/prime-worker/info/#calling-worker-methods","title":"Calling worker methods","text":"<pre><code># Main thread calls worker method (must be decorated with @sync).\nresult = await worker.find_primes(10000)\n</code></pre>"},{"location":"example-apps/prime-worker/info/#worker-exposing-methods","title":"Worker exposing methods","text":"<pre><code># Worker exposes method to main thread.\nfrom pyscript import sync\n@sync\nasync def find_primes(limit):\n# Do computation.\nreturn result\n</code></pre>"},{"location":"example-apps/prime-worker/info/#callbacks-from-worker-to-main","title":"Callbacks from worker to main","text":"<pre><code># Main thread registers callback.\nfrom pyscript import sync\nasync def handle_prime(prime):\nprint(f\"Got prime: {prime}\")\nsync.handle_prime = handle_prime\n</code></pre> <pre><code># Worker calls back to main thread.\nhandle_prime = await sync.handle_prime\nawait handle_prime(42)\n</code></pre>"},{"location":"example-apps/task-board-ffi/info/","title":"Task Board - FFI Version","text":"<p>Run the app |  View the code on GitHub</p> <p>The same task management application as the pyscript.web version, but implemented using the FFI (foreign function interface) with direct JavaScript API calls.</p>"},{"location":"example-apps/task-board-ffi/info/#what-it-demonstrates","title":"What it demonstrates","text":"<ul> <li>Finding elements using the native <code>document.getElementById()</code> and   <code>document.querySelectorAll()</code> functions.</li> <li>Creating elements with <code>document.createElement()</code>.</li> <li>Modifying attributes by setting properties like <code>textContent</code>,   <code>className</code>, <code>checked</code> on JSProxy objects.</li> <li>Working with classes via <code>classList.add()</code>,   <code>classList.remove()</code> (i.e. native APIs).</li> <li>Collections by iterating over NodeLists from <code>querySelectorAll()</code>.</li> <li>Event handling with the <code>@when</code> decorator with CSS selectors.</li> </ul>"},{"location":"example-apps/task-board-ffi/info/#features","title":"Features","text":"<p>This is the exact same application as the pyscript.web version, but implemented using JavaScript APIs directly. Key differences:</p>"},{"location":"example-apps/task-board-ffi/info/#files","title":"Files","text":"<ul> <li><code>index.html</code> - Page structure and styling (same as the <code>pyscript.web</code>   version).</li> <li><code>main.py</code> - Application logic using the FFI.</li> </ul>"},{"location":"example-apps/task-board-ffi/info/#how-it-works","title":"How it works","text":"<p>Both versions of the app work just fine! The <code>pyscript.web</code> version is more Pythonic and concise, whilst the FFI version gives you direct access to JavaScript APIs. Choose based on your preference and familiarity with web development.</p> <p>We've tried to compare and contrast the two approaches below:</p>"},{"location":"example-apps/task-board-ffi/info/#finding-elements","title":"Finding elements","text":"<p>pyscript.web:</p> <pre><code>web.page[\"tasks\"]\n</code></pre> <p>FFI:</p> <pre><code>document.getElementById(\"tasks\")\n</code></pre>"},{"location":"example-apps/task-board-ffi/info/#creating-elements","title":"Creating elements","text":"<p>pyscript.web:</p> <pre><code>task_div = web.div(\ncheckbox,\ntask_text,\ndelete_btn,\nclasses=[\"task\", priority]\n)\n</code></pre> <p>FFI:</p> <pre><code>task_div = document.createElement(\"div\")\ntask_div.className = f\"task {priority}\"\ntask_div.appendChild(checkbox)\ntask_div.appendChild(task_text)\ntask_div.appendChild(delete_btn)\n</code></pre>"},{"location":"example-apps/task-board-ffi/info/#working-with-classes","title":"Working with classes","text":"<p>pyscript.web:</p> <pre><code>element.classes.add(\"selected\")\n</code></pre> <p>FFI:</p> <pre><code>element.classList.add(\"selected\")\n</code></pre>"},{"location":"example-apps/task-board-ffi/info/#setting-content","title":"Setting content","text":"<p>pyscript.web:</p> <pre><code>element.innerHTML = \"text\"\n</code></pre> <p>FFI:</p> <pre><code>element.textContent = \"text\"\n</code></pre> <p>or</p> <pre><code>element.innerHTML = \"text\"\n</code></pre>"},{"location":"example-apps/task-board-web/info/","title":"Task Board - pyscript.web Version","text":"<p>Run the app |  View the code on GitHub </p> <p>A task management application demonstrating the Pythonic <code>pyscript.web</code> interface for DOM manipulation.</p>"},{"location":"example-apps/task-board-web/info/#what-it-demonstrates","title":"What it demonstrates","text":"<ul> <li>Finding elements with <code>web.page[\"id\"]</code> and <code>web.page.find()</code>.</li> <li>Creating elements using <code>web.div()</code>, <code>web.button()</code>, etc.</li> <li>Modifying attributes by setting <code>innerHTML</code>, <code>value</code>, <code>dataset</code>.</li> <li>Working with classes with <code>classes.add()</code>, <code>classes.remove()</code>.</li> <li>Collections via iterating over elements with <code>.find()</code>.</li> <li>Event handling using the <code>@when</code> decorator with web elements.</li> </ul>"},{"location":"example-apps/task-board-web/info/#features","title":"Features","text":"<ul> <li>Add tasks with text descriptions.</li> <li>Set priority levels (high, medium, low) with visual indicators.</li> <li>Mark tasks as complete with checkboxes.</li> <li>Filter tasks by status (all, active, completed).</li> <li>Delete tasks.</li> <li>Visual feedback with colours and styles.</li> </ul>"},{"location":"example-apps/task-board-web/info/#files","title":"Files","text":"<ul> <li><code>index.html</code> - Page structure and styling.</li> <li><code>main.py</code> - Application logic using pyscript.web.</li> </ul>"},{"location":"example-apps/task-board-web/info/#how-it-works","title":"How it works","text":"<p>All DOM manipulation uses <code>pyscript.web</code>'s Pythonic interface:</p> <ul> <li>Elements accessed via <code>web.page[\"id\"]</code> (dictionary-style).</li> <li>Classes managed with set operations (<code>add</code>, <code>remove</code>).</li> <li>Elements created with function calls (<code>web.div()</code>).</li> <li>Events handled with <code>@when</code> decorator.</li> </ul>"},{"location":"example-apps/task-board-web/info/#compare-with-ffi-version","title":"Compare with FFI version","text":"<p>See the FFI version of this same application to compare the Pythonic approach with direct JavaScript API calls.</p>"},{"location":"user-guide/","title":"The PyScript User Guide","text":"<p>Info</p> <p>This guide provides technical guidance and in-depth exploration of the PyScript platform.</p> <p>We assume you already have Python or web development experience. If you're new to PyScript, start with our beginner's guide to learn the fundamentals through a hands-on example.</p> <p>Once you're comfortable with the basics, return here to explore PyScript's full capabilities in detail.</p>"},{"location":"user-guide/#what-youll-learn","title":"What you'll learn","text":"<p>This user guide will teach you how to:</p> <p>Build interactive web applications with Python - Create rich user interfaces, handle events, manipulate the DOM, and respond to user input using idiomatic Python code.</p> <p>Leverage Python's ecosystem in the browser - Use popular libraries like NumPy, Pandas, Matplotlib, and thousands more from PyPI directly in your web applications.</p> <p>Access browser capabilities from Python - Capture photos and video, record audio, read and write files, store data locally, and integrate with web APIs.</p> <p>Create fast, responsive applications - Use web workers to run Python code in background threads, keeping your user interface smooth even during heavy computation.</p> <p>Deploy Python applications anywhere - Share your work with a simple URL, no server-side Python required. Your applications run entirely in the user's browser.</p> <p>Understand PyScript's architecture - Learn how PyScript bridges Python and JavaScript, when to use Pyodide vs. MicroPython, and how to optimise your applications for performance.</p>"},{"location":"user-guide/#core-concepts","title":"Core concepts","text":"<p>PyScript brings together two powerful ecosystems: Python and the web. Understanding a few key concepts will help you get the most from the platform:</p> <p>The FFI (Foreign Function Interface) - This is how Python and JavaScript communicate. The FFI automatically translates between Python and JavaScript objects, letting you use browser APIs directly from Python code.</p> <p>Pyodide vs. MicroPython - PyScript supports two Python interpreters. Pyodide is full CPython compiled to WebAssembly, giving you access to the entire Python ecosystem. MicroPython is smaller and faster to load, making it ideal for mobile devices or when you don't need heavy libraries.</p> <p>The <code>pyscript</code> namespace - This is PyScript's Pythonic API for working with the web. It includes modules like <code>pyscript.web</code> for DOM manipulation, <code>pyscript.display</code> for showing output, and decorators like <code>@when</code> for handling events.</p> <p>Web workers - Background threads that let you run Python code without blocking the user interface. Essential for data processing, simulations, or any CPU-intensive work.</p>"},{"location":"user-guide/#example-applications","title":"Example applications","text":"<p>Throughout this guide, you'll find working examples that demonstrate PyScript's features. All examples are complete, runnable applications that you can explore, modify, and learn from.</p> <p>You'll find the example applications organised by app name. Each example includes all the files you need (<code>index.html</code>, Python code, configuration etc...) plus an <code>info.md</code> explaining what it demonstrates and how it works.</p> <p>The source code for all the example apps can be found in our GIT repository online.</p>"},{"location":"user-guide/#get-involved","title":"Get involved","text":"<p>PyScript is an open source project with a welcoming, vibrant community.</p> <p>Join the conversation - Our Discord server is the heart of the PyScript community. You'll find core developers, experienced contributors, and fellow learners ready to help. It's the best place to ask questions, share your projects, and discuss ideas.</p> <p>Contribute to PyScript - Whether you're fixing documentation, reporting bugs, or adding features, contributions are welcome. Visit PyScript's GitHub organisation to get started.</p> <p>Share your work - Built something interesting with PyScript? We love to recognise and celebrate community projects. Share your work on Discord or get in touch if you'd like your project featured in our examples.</p> <p>Note</p> <p>We welcome constructive feedback on these docs. Found something unclear? Have a suggestion? Please let us know.</p>"},{"location":"user-guide/#ready-to-dive-in","title":"Ready to dive in?","text":"<p>Start with What is PyScript? to understand the platform's philosophy and capabilities, or jump straight to working with the DOM if you're eager to start coding.</p> <p>Welcome to PyScript!</p>"},{"location":"user-guide/architecture/","title":"Architecture","text":"<p>Understanding how PyScript works helps you build better applications and debug problems when they arise. This guide explains PyScript's architecture, lifecycle, and the interpreters that power your Python code in the browser.</p> <p>You don't need to master these details to use PyScript effectively, but knowing the fundamentals helps you understand what's happening behind the scenes.</p>"},{"location":"user-guide/architecture/#the-foundation-polyscript","title":"The foundation: PolyScript","text":"<p>PyScript is built on PolyScript, a small kernel that bootstraps interpreters and provides core capabilities. PolyScript handles script evaluation, event processing, and worker management - the low-level machinery that makes everything work.</p> <p>Most PyScript users never interact with PolyScript directly. PyScript wraps PolyScript with convenient features, helper functions, and powerful capabilities that make Python in the browser accessible and practical. PolyScript provides the foundation. PyScript provides the usable platform.</p> <p>You might encounter PolyScript if you debug interpreter loading issues, investigate event handling problems, or explore advanced customisation. But for typical application development, you can safely ignore PolyScript's existence.</p>"},{"location":"user-guide/architecture/#worker-coordination-coincident","title":"Worker coordination: Coincident","text":"<p>PyScript uses Coincident to coordinate interactions between the main thread and web workers. This library handles the complexity of cross-thread communication, SharedArrayBuffer management, and memory coordination.</p> <p>Like PolyScript, Coincident operates behind the scenes. You use the clean <code>pyscript.workers</code> API without worrying about the underlying coordination mechanisms. Coincident makes worker communication feel simple and natural, hiding the difficult parts.</p> <p>If you encounter worker-related issues - functions not being callable across threads, arguments not being passed correctly, or memory leaks - these might originate in Coincident. Such problems are rare, but knowing this layer exists helps when debugging unusual worker behaviour.</p>"},{"location":"user-guide/architecture/#the-pyscript-stack","title":"The PyScript stack","text":"<p>Understanding how components layer together helps you think about where your code fits:</p> <p></p> <p>At the foundation are Python interpreters compiled to WebAssembly - either Pyodide or MicroPython. These evaluate your code and interact with the browser through the Foreign Function Interface.</p> <p>The PyScript layer sits above the interpreters, consisting of two parts. PolyScript provides the kernel that bootstraps everything and handles core capabilities. PyScript and its plugins sit atop PolyScript, providing the easy-to-use Python platform you actually interact with.</p> <p>Your application code runs at the top of the stack, either directly or through frameworks and libraries you've chosen. Everything happens inside your browser tab - a sandboxed computing environment isolated from both the server and the user's operating system.</p> <p>Info</p> <p>PyScript runs entirely in the browser. It doesn't execute on a server in the cloud. It doesn't use Python installed on the user's operating system. Everything happens in the browser tab, and nowhere else.</p>"},{"location":"user-guide/architecture/#application-lifecycle","title":"Application lifecycle","text":"<p>Understanding the lifecycle helps you think about timing and order of operations in your applications. Here's how PyScript unfolds:</p> <p>The browser loads your HTML page. When it encounters the PyScript script tag, PyScript loads as a JavaScript module. Module loading is non-blocking, so the page continues loading whilst PyScript initialises.</p> <p>Once loaded, PyScript discovers Python code on the page, evaluates any configuration, downloads the required interpreter, and sets up the interpreter's environment. This setup includes loading plugins, packages, files, and JavaScript modules specified in your configuration.</p> <p>PyScript then makes built-in helper objects and functions available through the <code>pyscript</code> module. Only after this completes does the interpreter evaluate your Python code.</p> <p>When the interpreter is ready, PyScript dispatches a <code>py:ready</code> event for Pyodide or <code>mpy:ready</code> for MicroPython. After all scripts finish evaluating, a <code>py:done</code> event signals completion.</p> <p>This lifecycle applies to both the main thread and workers. Workers have completely separate environments - different configuration, different interpreters, different package sets. Think of each worker as a separate subprocess inside your browser tab.</p>"},{"location":"user-guide/architecture/#choosing-interpreters","title":"Choosing interpreters","text":"<p>PyScript supports two Python interpreters compiled to WebAssembly. Each offers different trade-offs, and you should choose based on your application's needs.</p>"},{"location":"user-guide/architecture/#pyodide","title":"Pyodide","text":"<p>Pyodide is CPython compiled to WebAssembly. It provides full Python compatibility with access to the standard library and many third-party packages.</p> <p></p> <p>Pyodide's strengths include package installation from PyPI using micropip, extensive documentation and community support, and pre-built versions of popular data science packages like numpy, scipy, and pandas. The active community produces excellent documentation and tutorials.</p> <p>Use Pyodide when you need full Python compatibility, access to packages from PyPI, or weighty computing libraries. The trade-off is larger file size and slower initial load compared to MicroPython.</p> <p>Warning</p> <p>Some packages with C extensions work in Pyodide, others don't. Pyodide can install packages with C extensions that have been compiled to WebAssembly. Packages not compiled for WebAssembly cause \"pure Python wheel\" errors. See Pyodide's FAQ for details.</p> <p>If you want to check if a package works with PyScript, check out this handy website for more information.</p>"},{"location":"user-guide/architecture/#micropython","title":"MicroPython","text":"<p>MicroPython is a lean Python implementation designed for constrained environments. It includes a subset of the standard library and focuses on efficiency.</p> <p></p> <p>MicroPython's key advantage is size. Compressed for delivery, it's only about 170KB - smaller than many images on the web. This makes it ideal for mobile devices with slower connections and less powerful hardware.</p> <p>Use MicroPython when you need fast startup, small file size, or want to minimise network transfer. It works especially well for user interface code, simple scripting, or applications on mobile devices. The trade-off is no package installation - you only get the standard library subset MicroPython provides, or code you directly copy into the PyScript environment via <code>files</code> based configuration.</p>"},{"location":"user-guide/architecture/#cross-interpreter-compatibility","title":"Cross-interpreter compatibility","text":"<p>Both interpreters implement almost the same Foreign Function Interface for Python-JavaScript interaction. PyScript's unified <code>pyscript.ffi</code> namespace works consistently across both interpreters, making it relatively straightforward to migrate between them.</p> <p>However, code using packages from PyPI only works in Pyodide. Code relying on full standard library features may behave differently or fail in MicroPython. Test thoroughly if you switch interpreters.</p>"},{"location":"user-guide/architecture/#understanding-webassembly-compilation","title":"Understanding WebAssembly compilation","text":"<p>Both interpreters use Emscripten, a compiler toolchain built on LLVM, to compile C to WebAssembly. Emscripten provides more than just compilation - it supplies APIs for operating system-level features in the browser environment.</p> <p>Through Emscripten, interpreters access a sandboxed filesystem (not the user's actual filesystem), standard input/output streams, and network capabilities. These features work within the browser's security sandbox, providing familiar Python programming patterns whilst maintaining web security.</p> <p>This is why you can use <code>open()</code> to read files, <code>print()</code> to write output, and <code>import</code> modules - Emscripten bridges the gap between Python's expectations and the browser's capabilities.</p>"},{"location":"user-guide/architecture/#whats-next","title":"What's next","text":"<p>Now that you understand PyScript's architecture, these related topics provide more context:</p> <p>Workers - Configure Python code to run in background threads with the same configuration options.</p> <p>Filesystem - Learn more about the virtual filesystem and how the <code>files</code> option works.</p> <p>FFI - Understand how JavaScript modules integrate with Python through the foreign function interface.</p> <p>Media - Capture photos and video with the camera or  record audio with your microphone.</p>"},{"location":"user-guide/configuration/","title":"Configuration","text":"<p>The browser tab in which your PyScript based web page is displayed is a very secure sandboxed computing environment for running your Python code.</p> <p>This is also the case for web workers running Python. Despite being associated with a single web page, workers are completely separate from each other (except for some very limited and clearly defined means of interacting, which PyScript looks after for you).</p> <p>We need to tell PyScript how we want such Python environments to be configured. This works in the same way for both the main thread and for web workers. Such configuration ensures we get the expected resources ready before our Python code is evaluated (resources such as arbitrary data files and third party Python packages).</p>"},{"location":"user-guide/configuration/#toml-or-json","title":"TOML or JSON","text":"<p>Configuration can be expressed in two formats:</p> <ul> <li>TOML is the configuration file format preferred by   folks in the Python community.</li> <li>JSON is a data format most often used   by folks in the web community.</li> </ul> <p>Since PyScript is the marriage of Python and the web, and we respect the traditions of both technical cultures, we support both formats.</p> <p>However, because JSON is built into all browsers by default and TOML requires an additional download of a specialist parser before PyScript can work, the use of JSON is more efficient from a performance point of view.</p> <p>The following two configurations are equivalent, and simply tell PyScript to ensure the packages arrr and numberwang are installed from PyPI (the Python Packaging Index):</p> Configuration via TOML.<pre><code>packages = [\"arrr\", \"numberwang\" ]\n</code></pre> Configuration via JSON.<pre><code>{\n\"packages\": [\"arrr\", \"numberwang\"]\n}\n</code></pre>"},{"location":"user-guide/configuration/#file-or-inline","title":"File or inline","text":"<p>The recommended way to write configuration is via a separate file and then reference it as a URL from the tag used to specify the Python code:</p> Reference a configuration file.<pre><code>&lt;script type=\"py\" src=\"main.py\" config=\"pyscript.json\"&gt;&lt;/script&gt;\n</code></pre> <p>The name of the file doesn't matter, so long as it's either JSON or TOML.</p> <p>If you use JSON, you can make it the value of the <code>config</code> attribute:</p> JSON as the value of the config attribute.<pre><code>&lt;script type=\"py\" src=\"main.py\" config='{\"packages\":[\"arrr\", \"numberwang\"]}'&gt;&lt;/script&gt;\n</code></pre> <p>For historical and convenience reasons we still support the inline specification of configuration information for <code>py</code> and <code>mpy</code> type scripts via a single <code>&lt;py-config&gt;</code> or <code>&lt;mpy-config&gt;</code> tag in your HTML document:</p> Inline configuration via the &lt;py-config&gt; tag.<pre><code>&lt;py-config&gt;\n{\n    \"packages\": [\"arrr\", \"numberwang\" ]\n}\n&lt;/py-config&gt;\n</code></pre> <p>Warning</p> <p>Should you use <code>&lt;py-config&gt;</code> or <code>&lt;mpy-config&gt;</code>, there must be only one of these tags on the page per interpreter.</p> <p>Additionally, <code>&lt;py-config&gt;</code> only works for <code>py</code>/<code>mpy</code> type scripts and is not used with <code>py-game</code> or <code>py-editor</code>. For these use the config attribute method.</p> <p>Warning</p> <p>Starting from PyScript 2025.10.1 the config guards against incompatible or unavailable packages relating to the current Pyodide version.</p> <p>There is an ongoing effort to make choosing packages in Pyodide far more helpful than it has ever been, but right now be aware that if a non-existent package for a specific Pyodide version cannot be found, an error will be thrown.</p>"},{"location":"user-guide/configuration/#options","title":"Options","text":"<p>There are only a few core options (<code>interpreter</code>, <code>files</code>, <code>packages</code>, <code>js_modules</code>, <code>debug</code>, <code>sync_main_only</code>) and some experimental flags: (<code>experimental_create_proxy</code>) that can be used in the configuration of PyScript, (<code>experimental_ffi_timeout</code>) to help with worker related performance, and (<code>experimental_remote_packages</code>) which allows remotely hosted packages. The user is also free to define arbitrary additional configuration options that plugins or an app may require for their own reasons.</p> <p>Info</p> <p>You can always access the current configuration as a read-only Python dict via the <code>pyscript.config</code> object.</p>"},{"location":"user-guide/configuration/#interpreter","title":"Interpreter","text":"<p>The <code>interpreter</code> option pins the Python interpreter to the version of the specified value. This is useful for testing (does my code work on a specific version of Pyodide?), or to ensure the precise combination of PyScript version and interpreter version are pinned to known values.</p> <p>The value of the <code>interpreter</code> option should be a valid version number for the Python interpreter you are configuring, or a fully qualified URL to a custom version of the interpreter.</p> <p>The following two examples are equivalent:</p> Specify the interpreter version in TOML.<pre><code>interpreter = \"0.29.0\"\n</code></pre> Specify the interpreter version in JSON.<pre><code>{\n\"interpreter\": \"0.29.0\"\n}\n</code></pre> <p>The following JSON fragment uses a fully qualified URL to point to the same version of Pyodide as specified in the previous examples:</p> Specify the interpreter via a fully qualified URL.<pre><code>{\n\"interpreter\": \"https://cdn.jsdelivr.net/pyodide/v0.29.0/full/pyodide.mjs\"\n}\n</code></pre>"},{"location":"user-guide/configuration/#files","title":"Files","text":"<p>The <code>files</code> option fetches arbitrary content from URLs onto the virtual filesystem available to Python, and emulated by the browser. Just map a valid URL to a destination filesystem path on the in-browser virtual filesystem. You can find out more about the in-browser virtual filesystem in the section about PyScript and filesystems.</p> <p>The following JSON and TOML are equivalent:</p> Fetch files onto the filesystem with JSON.<pre><code>{\n\"files\": {\n\"https://example.com/data.csv\": \"./data.csv\",\n\"./code.py\": \"./subdir/code.py\"\n}\n}\n</code></pre> Fetch files onto the filesystem with TOML.<pre><code>[files]\n\"https://example.com/data.csv\" = \"./data.csv\"\n\"./code.py\" = \"./subdir/code.py\"\n</code></pre> <p>If you make the target an empty string, the final \"filename\" part of the source URL becomes the destination filename, in the root of the filesystem, to which the content is copied. As a result, the <code>data.csv</code> entry from the previous examples could be equivalently re-written as:</p> JSON implied filename in the root directory.<pre><code>{\n\"files\": {\n\"https://example.com/data.csv\": \"\",\n\"./code.py\": \"./subdir/code.py\"\n}\n}\n</code></pre> TOML implied filename in the root directory.<pre><code>[files]\n\"https://example.com/data.csv\" = \"\"\n\"./code.py\" = \"./subdir/code.py\"\n</code></pre> <p>If the source part of the configuration is either a <code>.zip</code> or <code>.tar.gz</code> file and its destination is a folder path followed by a star (e.g. <code>/*</code> or <code>./dest/*</code>), then PyScript will extract the referenced archive automatically into the target directory in the browser's built in file system.</p> <p>Warning</p> <p>PyScript expects all file destinations to be unique.</p> <p>If there is a duplication PyScript will raise an exception to help you find the problem.</p> <p>Warning</p> <p>Use absolute destination URLs instead of CORS / redirect URLs.</p> <p>For example, <code>https://github.com/pyscript/ltk/raw/refs/heads/main/ltk/jquery.py</code> redirects to <code>https://raw.githubusercontent.com/pyscript/ltk/refs/heads/main/ltk/jquery.py</code>. </p> <p>Use the latter.</p> <p>For most people, most of the time, the simple URL to filename mapping, described above, will be sufficient. Yet certain situations may require more flexibility.</p> <p>Sometimes many resources are needed to be fetched from a single location and copied into the same directory on the file system. To aid readability and reduce repetition, the <code>files</code> option comes with a mini templating language that allows reusable placeholders to be defined between curly brackets (<code>{</code> and <code>}</code>). When these placeholders are encountered in the <code>files</code> configuration, their name is replaced with their associated value.</p> <p>Attention</p> <p>Valid placeholder names are always enclosed between curly brackets (<code>{</code> and <code>}</code>), like this: <code>{FROM}</code>, <code>{TO}</code> and <code>{DATA SOURCE}</code> (capitalized names help identify placeholders when reading code ~ although this isn't strictly necessary).</p> <p>Any number of placeholders can be defined and used anywhere within URLs and paths that map source to destination.</p> <p>The following JSON and TOML are equivalent:</p> Using the template language in JSON.<pre><code>{\n\"files\": {\n\"{DOMAIN}\": \"https://my-server.com\",\n\"{PATH}\": \"a/path\",\n\"{VERSION}\": \"1.2.3\",\n\"{FROM}\": \"{DOMAIN}/{PATH}/{VERSION}\",\n\"{TO}\": \"./my_module\",\n\"{FROM}/__init__.py\": \"{TO}/__init__.py\",\n\"{FROM}/foo.py\": \"{TO}/foo.py\",\n\"{FROM}/bar.py\": \"{TO}/bar.py\",\n\"{FROM}/baz.py\": \"{TO}/baz.py\",\n}\n}\n</code></pre> Using the template language in TOML.<pre><code>[files]\n\"{DOMAIN}\" = \"https://my-server.com\"\n\"{PATH}\" = \"a/path\"\n\"{VERSION}\" = \"1.2.3\"\n\"{FROM}\" = \"{DOMAIN}/{PATH}/{VERSION}\"\n\"{TO}\" = \"./my_module\"\n\"{FROM}/__init__.py\" = \"{TO}/__init__.py\"\n\"{FROM}/foo.py\" = \"{TO}/foo.py\"\n\"{FROM}/bar.py\" = \"{TO}/bar.py\"\n\"{FROM}/baz.py\" = \"{TO}/baz.py\"\n</code></pre> <p>The <code>{DOMAIN}</code>, <code>{PATH}</code>, and <code>{VERSION}</code> placeholders are used to create a further <code>{FROM}</code> placeholder. The <code>{TO}</code> placeholder is also defined to point to a common sub-directory on the file system. The final four entries use <code>{FROM}</code> and <code>{TO}</code> to copy over four files (<code>__init__.py</code>, <code>foo.py</code>, <code>bar.py</code> and <code>baz.py</code>) from the same source to a common destination directory.</p> <p>For convenience, if the destination is just a directory (it ends with <code>/</code>) then PyScript automatically uses the filename part of the source URL as the filename in the destination directory.</p> <p>For example, the end of the previous config file could be:</p> Automatic use of the source filename into a destination directory.<pre><code>\"{TO}\" = \"./my_module/\"\n\"{FROM}/__init__.py\" = \"{TO}\"\n\"{FROM}/foo.py\" = \"{TO}\"\n\"{FROM}/bar.py\" = \"{TO}\"\n\"{FROM}/baz.py\" = \"{TO}\"\n</code></pre>"},{"location":"user-guide/configuration/#packages","title":"Packages","text":"<p>The <code>packages</code> option lists Python packages to be installed onto the Python path.</p> <p>Info</p> <p>Pyodide uses a utility called <code>micropip</code> to install packages from PyPI.</p> <p>Because <code>micropip</code> is a Pyodide-only feature, and MicroPython doesn't support code packaged on PyPI, the <code>packages</code> option only works with packages hosted on PyPI when using Pyodide.</p> <p>MicroPython's equivalent utility, <code>mip</code>, uses a separate repository of available packages called <code>micropython-lib</code>. When you use the <code>packages</code> option with MicroPython, it is this repository (not PyPI) that is used to find available packages. Many of the packages in <code>micropython-lib</code> are for microcontroller based activities and may not work with the web assembly port of MicroPython.</p> <p>If you need pure Python modules for MicroPython, you have two further options:</p> <ol> <li>Use the files option to manually copy the source code for a    package onto the file system.</li> <li>Use a URL referencing a MicroPython friendly package instead of PyPI    package name.</li> </ol> <p>The following two examples are equivalent:</p> A packages list in TOML.<pre><code>packages = [\"arrr\", \"numberwang\", \"snowballstemmer&gt;=2.2.0\" ]\n</code></pre> A packages list in JSON.<pre><code>{\n\"packages\": [\"arrr\", \"numberwang\", \"snowballstemmer&gt;=2.2.0\" ]\n}\n</code></pre> <p>When using Pyodide, the names in the list of <code>packages</code> can be any of the following valid forms:</p> <ul> <li>A name of a package on PyPI: <code>\"snowballstemmer\"</code></li> <li>A name for a package on PyPI with additional constraints:   <code>\"snowballstemmer&gt;=2.2.0\"</code></li> <li>An arbitrary URL to a Python package: <code>\"https://.../package.whl\"</code></li> <li>A file copied onto the browser based file system: <code>\"emfs://.../package.whl\"</code></li> </ul>"},{"location":"user-guide/configuration/#package-support","title":"Package Support","text":"<p>We have created a handy website that tracks which third party packages in PyPI are supported by PyScript. You can also use this site to report if a package you're trying to use is supported or not.</p> <p>The website's help section explains more.</p>"},{"location":"user-guide/configuration/#package-cache","title":"Package Cache","text":"<p>For performance reasons, PyScript caches packages so that a delay resulting from downloading the packages is only noticable on first load - after which, PyScript will fall back on packages previously downloaded and held in the browser's local cache.</p> <p>The behaviour of caching can be configured via the <code>packages_cache</code> setting. If this setting is not used, PyScript will cache packages. Otherwise, override PyScript's behaviour by setting <code>packages_cache</code> to one of these two values:</p> <ul> <li><code>never</code> - PyScript will not cache packages.</li> <li><code>passthrough</code> - this only works with Pyodide (see this wiki),   and will cause Pyodide to download packages in a parallel manner rather than   the default linear fashion. However, these packages will not be cached.</li> </ul>"},{"location":"user-guide/configuration/#plugins","title":"Plugins","text":"<p>The <code>plugins</code> option allows user to either augment, or exclude, the list of plugins imported out of the box from core during bootstrap.</p> <p>While augmenting requires some knowledge about core internals, excluding some plugin might be desired to avoid such plugin behavior and, in edge cases, reduce the amount of network requests to bootstrap PyScript.</p> <p>It is possible to check the list of plugins we offer by default, where each key is used as plugin name and could be also disabled using the <code>!pugin-name</code> convention, here an example:</p> Specify plugins in TOML<pre><code>plugins = [\"custom_plugin\", \"!error\"]\n</code></pre> Specify plugins in JSON<pre><code>{\n\"plugins\": [\"custom_plugin\", \"!error\"]\n}\n</code></pre> <p>Info</p> <p>The <code>\"!error\"</code> syntax is a way to turn off a plugin built into PyScript that is enabled by default.</p> <p>It is possible to turn off other plugins too using the very same convention.</p> <p>Warning</p> <p>Please note <code>plugins</code> are currently a core only feature. If you need any extra functionality out of the box, <code>files</code> or <code>js_modules</code> are the current way to provide more features without needing to file a PR in <code>core</code> PyScript.</p>"},{"location":"user-guide/configuration/#javascript-modules","title":"JavaScript modules","text":"<p>It's easy to import and use JavaScript modules in your Python code. This section of the docs examines the configuration needed to make this work. How to make use of JavaScript is dealt with elsewhere.</p> <p>We need to tell PyScript about the JavaScript modules you want to use. This is the purpose of the <code>js_modules</code> related configuration fields.</p> <p>There are two fields:</p> <ul> <li><code>js_modules.main</code> defines JavaScript modules loaded in the context of the   main thread of the browser. Helpfully, it is also possible to interact with   such modules from the context of workers. Sometimes such modules also   need CSS files to work, and these can also be specified.</li> <li><code>js_modules.worker</code> defines JavaScript modules loaded into the context of   the web worker. Such modules must not expect <code>document</code> or <code>window</code>   references (if this is the case, you must load them via <code>js_modules.main</code> and   use them from the worker). However, if the JavaScript module could work   without such references, then performance is better if defined on a worker.   Because CSS is meaningless in the context of a worker, it is not possible to   specify such files in a worker context.</li> </ul> <p>Once specified, your JavaScript modules will be available under the <code>pyscript.js_modules.*</code> namespace.</p> <p>To specify such modules, simply provide a list of source/module name pairs.</p> <p>For example, to use the excellent Leaflet JavaScript module for creating interactive maps you'd add the following lines:</p> JavaScript main thread modules defined in TOML.<pre><code>[js_modules.main]\n\"https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet-src.esm.js\" = \"leaflet\"\n\"https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css\" = \"leaflet\" # CSS\n</code></pre> JavaScript main thread modules defined in JSON.<pre><code>{\n\"js_modules\": {\n\"main\": {\n\"https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet-src.esm.js\": \"leaflet\",\n\"https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css\": \"leaflet\"\n}\n}\n}\n</code></pre> <p>Info</p> <p>Notice how the second line references the required CSS needed for the JavaScript module to work correctly.</p> <p>The CSS file MUST target the very same name as the JavaScript module to which it is related.</p> <p>Warning</p> <p>Since the Leaflet module expects to manipulate the DOM and have access to <code>document</code> and <code>window</code> references, it must only be added via the <code>js_modules.main</code> setting (as shown) and cannot be added in a worker context.</p> <p>At this point Python code running on either the main thread or in a worker will have access to the JavaScript module like this:</p> Making use of a JavaScript module from within Python.<pre><code>from pyscript.js_modules import leaflet as L\nmap = L.map(\"map\")\n# etc....\n</code></pre> <p>Some JavaScript modules (such as html-escaper) don't require access to the DOM and, for efficiency reasons, can be included in the worker context:</p> A JavaScript worker module defined in TOML.<pre><code>[js_modules.worker]\n\"https://cdn.jsdelivr.net/npm/html-escaper\" = \"html_escaper\"\n</code></pre> A JavaScript worker module defined in JSON.<pre><code>{\n\"js_modules\": {\n\"worker\": {\n\"https://cdn.jsdelivr.net/npm/html-escaper\": \"html_escaper\"\n}\n}\n}\n</code></pre> <p>However, <code>from pyscript.js_modules import html_escaper</code> would then only work within the context of Python code running on a worker.</p>"},{"location":"user-guide/configuration/#sync_main_only","title":"sync_main_only","text":"<p>Sometimes you just want to start an expensive computation on a web worker without the need for the worker to interact with the main thread. You're simply awaiting the result of a method exposed from a worker.</p> <p>This has the advantage of not requiring the use of <code>SharedArrayBuffer</code> and associated CORS related header configuration.</p> <p>If the <code>sync_main_only</code> flag is set, then interactions between the main thread and workers are limited to one way calls from the main thread to methods exposed by the workers.</p> Setting the sync_main_only flag in TOML.<pre><code>sync_main_only = true\n</code></pre> Setting the sync_main_only flag in JSON.<pre><code>{\n\"sync_main_only\": true\n}\n</code></pre> <p>If <code>sync_main_only</code> is set, the following caveats apply:</p> <ul> <li>It is not possible to manipulate the DOM or do anything meaningful on the   main thread from a worker. This is because Atomics cannot guarantee   sync-like locks between a worker and the main thread.</li> <li>Only a worker's <code>pyscript.sync</code> methods are exposed, and they can only be   awaited from the main thread.</li> <li>The worker can only <code>await</code> main thread references one after the other, so   developer experience is degraded when one needs to interact with the   main thread.</li> </ul>"},{"location":"user-guide/configuration/#experimental_create_proxy","title":"experimental_create_proxy","text":"<p>Knowing when to use the <code>pyscript.ffi.create_proxy</code> method when using Pyodide can be confusing at the best of times and full of technical \"magic\".</p> <p>This experimental flag, when set to <code>\"auto\"</code> will cause PyScript to try to automatically handle such situations, and should \"just work\".</p> Using the experimental_create_proxy flag in TOML.<pre><code>experimental_create_proxy = \"auto\"\n</code></pre> Using the experimental_create_proxy flag in JSON.<pre><code>{\n\"experimental_create_proxy\": \"auto\"\n}\n</code></pre> <p>Warning</p> <p>This feature is experimental and only needs to be used with Pyodide.</p> <p>Should you encounter problems (such as problematic memory leaks) when using this flag with Pyodide, please don't hesitate to raise an issue with a reproducable example, and we'll investigate.</p>"},{"location":"user-guide/configuration/#experimental_ffi_timeout","title":"experimental_ffi_timeout","text":"<p>When bootstrapping a worker, the worker is told to use a cache for round-trip operations (for example, <code>window.my_object.foo.bar.baz</code> causes a round-trip to the main thread for each dot <code>.</code> in this chain of references). By caching the dotted references performance can be improved by reducing the number of round trips PyScript makes.</p> <p>However, not everything can be cached (those APIs or objects with side-effects won't work; for example DOM element based APIs etc).</p> <p>The <code>experimental_ffi_timeout</code> setting defines the maximum lifetime of that cache. If it's less than 0 (the default), there is no cache whatsoever. Zero means to clean up the cache on the next iteration of the event loop. A positive number is the maximum number of milliseconds the cache will be kept alive.</p> <p>In this experimental phase, we suggest trying <code>0</code>, <code>30</code> or a value that won't likely bypass the browser rendering of 60fps. Of course, <code>1000</code> (i.e. a second) would be a fun, if greedy, experiment.</p>"},{"location":"user-guide/configuration/#experimental_remote_packages","title":"experimental_remote_packages","text":"<p>Specially designed to allow custom pure Python packages, it is possible to specify a remote <code>.toml</code> or <code>.json</code> configuration file within the list of packages:</p> Using the experimental_remote_packages flag in TOML.<pre><code>experimental_remote_packages = true\npackages = ['numpy', 'https://remote.host.com/my_package/v1/config.toml']\n</code></pre> <p>The remote config is basically a subset of any other PyScript config with the only exception that its <code>name</code> field must specify the package name, which will then be used to import such package via regular imports:</p> A remote config example<pre><code>name = \"my_package\"\n# a remote config can include packages, even remote ones\npackages = ['matplotlib']\n# files are resolved relatively to this config URL\n[files]\n\"./__init__.py\" = \"\"\n\"./sub/module.py\" = \"\"\n\"./main.py\" = \"\"\n</code></pre> <p>The bootstrap will take care of fetching and preparing the remote package so that all the code will need to do is: <code>from my_package import util</code>.</p>"},{"location":"user-guide/configuration/#debug","title":"debug","text":"<p>When using Pyodide, if the <code>debug</code> setting is set to <code>true</code>, then Pyodide will run in debug mode. See Pyodide's documentation for details of what this entails.</p>"},{"location":"user-guide/configuration/#custom","title":"Custom","text":"<p>Sometimes plugins or apps need bespoke configuration options.</p> <p>So long as you don't cause a name collision with the built-in option names then you are free to use any valid data structure that works with both TOML and JSON to express your configuration needs.</p> <p>Access the current configuration via <code>pyscript.config</code>, a Python <code>dict</code> representing the configuration:</p> Reading the current configuration.<pre><code>from pyscript import config\n# It's just a dict.\nprint(config.get(\"files\"))\n</code></pre> <p>Note</p> <p>Changing the <code>config</code> dictionary at runtime doesn't change the actual configuration.</p>"},{"location":"user-guide/configuration/#practical-example","title":"Practical example","text":"<p>Here's a complete example showing common configuration options:</p> pyscript.json - A typical configuration.<pre><code>{\n\"packages\": [\n\"numpy\",\n\"matplotlib\"\n],\n\"files\": {\n\"https://example.com/data.csv\": \"./data.csv\",\n\"./utils.py\": \"./lib/utils.py\"\n},\n\"js_modules\": {\n\"main\": {\n\"https://cdn.jsdelivr.net/npm/chart.js\": \"chartjs\"\n}\n}\n}\n</code></pre> index.html - Using the configuration.<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=\"utf-8\" /&gt;\n&lt;title&gt;My PyScript App&lt;/title&gt;\n&lt;link rel=\"stylesheet\" href=\"https://pyscript.net/releases/2026.1.1/core.css\"&gt;\n&lt;script type=\"module\" src=\"https://pyscript.net/releases/2026.1.1/core.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;Data Analysis&lt;/h1&gt;\n&lt;div id=\"output\"&gt;&lt;/div&gt;\n&lt;script type=\"py\" src=\"./main.py\" config=\"./pyscript.json\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> main.py - Using the configured resources.<pre><code>import numpy as np\nfrom pyscript import display\n# Use installed packages.\ndata = np.array([1, 2, 3, 4, 5])\ndisplay(f\"Mean: {data.mean()}\")\n# Read configured files.\nwith open(\"data.csv\") as f:\ndisplay(f\"Data: {f.read()[:100]}\")\n# Use JavaScript modules.\nfrom pyscript.js_modules import chartjs\ndisplay(\"Chart.js loaded!\")\n</code></pre>"},{"location":"user-guide/configuration/#whats-next","title":"What's next","text":"<p>Now that you understand configuration, explore these related topics:</p> <p>DOM Interaction - Learn how to create and manipulate elements for more control than <code>display()</code> provides.</p> <p>Events - Make your displayed content interactive by handling user events.</p> <p>Architecture guide - provides technical details about how PyScript implements workers using PolyScript and Coincident if you're interested in the underlying mechanisms.</p> <p>Workers - Configure Python code to run in background threads with the same configuration options.</p> <p>Filesystem - Learn more about the virtual filesystem and how the <code>files</code> option works.</p> <p>FFI - Understand how JavaScript modules integrate with Python through the foreign function interface.</p>"},{"location":"user-guide/display/","title":"Display","text":"<p>The <code>display()</code> function is how to show Python objects, text, HTML, images, and rich content in your web page. It introspects objects to determine the best way to render them, supporting everything from simple strings to matplotlib plots.</p> <p>Heavily inspired by IPython's rich display system.</p> <p>Think of <code>display()</code> as Python's <code>print()</code> for the web - but with superpowers.</p>"},{"location":"user-guide/display/#basic-usage","title":"Basic usage","text":"<p>The simplest use is displaying text:</p> Simple Python objects via display()<pre><code>from pyscript import display\ndisplay(\"Hello, World!\")\ndisplay(\"Multiple\", \"values\", \"at\", \"once\")\n</code></pre> <p>By default, <code>display()</code> outputs to the current script's location in the page. Each call appends content unless you specify otherwise.</p>"},{"location":"user-guide/display/#display-targets","title":"Display targets","text":"<p>Control where content appears using the <code>target</code> parameter:</p> Specify where to display things.<pre><code>from pyscript import display\n# Display in a specific element by ID.\ndisplay(\"Hello\", target=\"output-div\")\n# The '#' prefix is optional (and ignored if present).\ndisplay(\"Hello\", target=\"#output-div\")\n</code></pre>"},{"location":"user-guide/display/#replacing-vs-appending","title":"Replacing vs. appending","text":"<p>By default, <code>display()</code> appends content. Use <code>append=False</code> to replace existing content:</p> Append or replace.<pre><code>from pyscript import display\n# Replace any existing content.\ndisplay(\"New content\", target=\"output-div\", append=False)\n# Append to existing content (default behaviour).\ndisplay(\"More content\", target=\"output-div\", append=True)\n</code></pre>"},{"location":"user-guide/display/#displaying-different-types","title":"Displaying different types","text":""},{"location":"user-guide/display/#strings","title":"Strings","text":"<p>Plain strings are automatically HTML-escaped for safety:</p> Strings are escaped.<pre><code>from pyscript import display\n# This is safe - HTML tags are escaped.\ndisplay(\"&lt;script&gt;alert('XSS')&lt;/script&gt;\")\n# Displays: &amp;lt;script&amp;gt;alert('XSS')&amp;lt;/script&amp;gt;\n</code></pre>"},{"location":"user-guide/display/#html-content","title":"HTML content","text":"<p>To display unescaped HTML, wrap it in the <code>HTML</code> class:</p> The HTML class unescapes (handle with care!)<pre><code>from pyscript import HTML, display\n# Render actual HTML.\ndisplay(HTML(\"&lt;h1&gt;Hello, World!&lt;/h1&gt;\"))\ndisplay(HTML(\"&lt;p&gt;This is &lt;strong&gt;bold&lt;/strong&gt; text.&lt;/p&gt;\"))\n</code></pre> <p>Warning</p> <p>Only use <code>HTML()</code> with content you trust. Never use it with user-provided data as it can create security vulnerabilities.</p>"},{"location":"user-guide/display/#python-objects","title":"Python objects","text":"<p>Most Python objects display using their <code>__repr__()</code> method:</p> Default behaviour via __repr__().<pre><code>from pyscript import display\n# Numbers.\ndisplay(42)\ndisplay(3.14159)\n# Lists and dictionaries.\ndisplay([1, 2, 3, 4, 5])\ndisplay({\"name\": \"Alice\", \"age\": 30})\n# Custom objects.\nclass Person:\ndef __init__(self, name):\nself.name = name\ndef __repr__(self):\nreturn f\"Person(name='{self.name}')\"\ndisplay(Person(\"Bob\"))\n</code></pre>"},{"location":"user-guide/display/#images","title":"Images","text":"<p>Display images from various sources:</p> Image handling.<pre><code>from pyscript import display\n# From a URL (using HTML).\nfrom pyscript import HTML\ndisplay(HTML('&lt;img src=\"https://example.com/image.png\"&gt;'))\n# From matplotlib (if you have it configured).\nimport matplotlib.pyplot as plt\nfig, ax = plt.subplots()\nax.plot([1, 2, 3, 4], [1, 4, 2, 3])\ndisplay(fig)\n</code></pre> <p>PyScript automatically detects matplotlib figures and renders them as PNG images.</p>"},{"location":"user-guide/display/#rich-display-system","title":"Rich display system","text":"<p>As has already been mentioned, PyScript's display system is inspired by IPython's rich display system. Objects can implement special methods to control how they're rendered.</p>"},{"location":"user-guide/display/#representation-methods","title":"Representation methods","text":"<p>Objects are checked for these methods in order of preference:</p> <ol> <li><code>_repr_mimebundle_()</code> - Returns multiple format options.</li> <li><code>_repr_png_()</code> - Returns PNG image data.</li> <li><code>_repr_jpeg_()</code> - Returns JPEG image data.</li> <li><code>_repr_svg_()</code> - Returns SVG graphics.</li> <li><code>_repr_html_()</code> - Returns HTML content.</li> <li><code>_repr_json_()</code> - Returns JSON data.</li> <li><code>__repr__()</code> - Returns plain text representation.</li> </ol>"},{"location":"user-guide/display/#custom-display-for-your-objects","title":"Custom display for your objects","text":"<p>Create objects that display beautifully:</p> Custom HTML rendering.<pre><code>from pyscript import display\nclass ColourSwatch:\n\"\"\"\n    A colour swatch that displays as a coloured box.\n    \"\"\"\ndef __init__(self, colour, name):\nself.colour = colour\nself.name = name\ndef _repr_html_(self):\nreturn f\"\"\"\n        &lt;div style=\"display: inline-block; margin: 5px;\"&gt;\n            &lt;div style=\"width: 100px; height: 100px; \n                        background-color: {self.colour};\n                        border: 2px solid #333;\n                        border-radius: 8px;\"&gt;\n            &lt;/div&gt;\n            &lt;div style=\"text-align: center; margin-top: 5px;\"&gt;\n{self.name}\n            &lt;/div&gt;\n        &lt;/div&gt;\n        \"\"\"\n# These display as visual colour swatches.\ndisplay(ColourSwatch(\"#FF0000\", \"Red\"))\ndisplay(ColourSwatch(\"#00FF00\", \"Green\"))\ndisplay(ColourSwatch(\"#0000FF\", \"Blue\"))\n</code></pre>"},{"location":"user-guide/display/#multiple-format-support","title":"Multiple format support","text":"<p>Provide multiple representations for maximum compatibility:</p> Define rendering via mime-type.<pre><code>from pyscript import display\nclass DataTable:\n\"\"\"\n    A table that can display as HTML or plain text.\n    \"\"\"\ndef __init__(self, data):\nself.data = data\ndef _repr_mimebundle_(self):\n\"\"\"\n        Return multiple formats.\n        \"\"\"\nhtml = \"&lt;table border='1'&gt;\"\nfor row in self.data:\nhtml += \"&lt;tr&gt;\"\nfor cell in row:\nhtml += f\"&lt;td&gt;{cell}&lt;/td&gt;\"\nhtml += \"&lt;/tr&gt;\"\nhtml += \"&lt;/table&gt;\"\ntext = \"\\n\".join([\"\\t\".join(str(c) for c in row) \nfor row in self.data])\nreturn {\n\"text/html\": html,\n\"text/plain\": text\n}\ntable = DataTable([\n[\"Name\", \"Age\", \"City\"],\n[\"Alice\", 30, \"London\"],\n[\"Bob\", 25, \"Paris\"]\n])\ndisplay(table)\n</code></pre>"},{"location":"user-guide/display/#working-with-scripts","title":"Working with scripts","text":""},{"location":"user-guide/display/#script-tag-output","title":"Script tag output","text":"<p>When PyScript runs a <code>&lt;script type=\"mpy\"&gt;</code> tag, <code>display()</code> outputs to that script's location by default:</p> Output at the &lt;script&gt;'s location in the DOM.<pre><code>&lt;div&gt;\n&lt;h2&gt;Output appears here:&lt;/h2&gt;\n&lt;script type=\"mpy\"&gt;\nfrom pyscript import display\ndisplay(\"Hello from the script!\")\n&lt;/script&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"user-guide/display/#targeting-specific-elements","title":"Targeting specific elements","text":"<p>Use the <code>target</code> attribute on your script tag to send output elsewhere:</p> Specify an output target.<pre><code>&lt;div id=\"results\"&gt;&lt;/div&gt;\n&lt;script type=\"mpy\" target=\"results\"&gt;\nfrom pyscript import display\n# This goes to #results, not the script's location.\ndisplay(\"Output in the results div!\")\n&lt;/script&gt;\n</code></pre>"},{"location":"user-guide/display/#example-data-visualisation-dashboard","title":"Example: Data visualisation dashboard","text":"<p>Here's a complete example showing various display capabilities:</p> <p>View the complete source code.</p> <p>This example demonstrates:</p> <ul> <li>Displaying different data types.</li> <li>Creating custom display representations.</li> <li>Building UIs with <code>HTML()</code> (but prefer to use <code>pyscript.web</code> for this).</li> <li>Updating content dynamically.</li> <li>Using display targets effectively.</li> </ul>"},{"location":"user-guide/display/#best-practices","title":"Best practices","text":""},{"location":"user-guide/display/#security","title":"Security","text":"<p>Never use <code>HTML()</code> with untrusted content:</p> This is dangerous!<pre><code># DANGEROUS - don't do this!\nuser_input = \"&lt;script&gt;alert('XSS')&lt;/script&gt;\"\ndisplay(HTML(user_input))\n# SAFE - plain strings are escaped automatically.\ndisplay(user_input)\n</code></pre>"},{"location":"user-guide/display/#performance","title":"Performance","text":"<p>For frequent or rapid updates:</p> <ul> <li>Use <code>append=False</code> to replace content rather than accumulating it.</li> <li>For interactive UIs, use <code>pyscript.web</code> to manipulate elements directly   rather than repeatedly calling <code>display()</code>.</li> <li>When you need fine control over the DOM, <code>display()</code> is for output,   not UI building.</li> </ul>"},{"location":"user-guide/display/#organisation","title":"Organisation","text":"<p>Keep display logic close to your data:</p> _repr_ logic on a class.<pre><code>class Report:\ndef __init__(self, data):\nself.data = data\ndef _repr_html_(self):\n\"\"\"\n        Encapsulate display logic in the class.\n        \"\"\"\nreturn f\"&lt;div class='report'&gt;{self.data}&lt;/div&gt;\"\n# Clean usage.\nreport = Report({\"sales\": 1000})\ndisplay(report)\n</code></pre>"},{"location":"user-guide/display/#whats-next","title":"What's next","text":"<p>Now that you understand how to display content, explore these related topics:</p> <p>Configuration - Configure how your scripts load and when event handlers are attached.</p> <p>DOM Interaction - Learn how to create and manipulate elements for more control than <code>display()</code> provides.</p> <p>Events - Make your displayed content interactive by handling user events.</p> <p>Workers - Display content from background threads (requires explicit <code>target</code> parameter).</p>"},{"location":"user-guide/dom/","title":"The DOM","text":"<p>The DOM (document object model) is a tree-like data structure representing the web page displayed by the browser. PyScript interacts with the DOM to change the user interface and react to things happening in the browser.</p> <p>PyScript provides two ways to work with the DOM:</p> <ol> <li>The <code>pyscript.web</code> module - A Pythonic interface that feels    natural to Python developers. This is the recommended approach for    most tasks.</li> <li>The FFI (foreign function interface) - Direct access to    JavaScript APIs for advanced use cases or when you need complete    control.</li> </ol> <p>Both approaches are powerful and can accomplish the same goals. We'll explore each one, starting with the Pythonic <code>pyscript.web</code> module.</p> <p>Tip</p> <p>New to PyScript? Start with <code>pyscript.web</code>. It's designed to feel natural if you know Python, and it handles many common tasks more Pythonically than direct JavaScript API calls.</p> <p>The FFI becomes useful when you need to integrate specific JavaScript libraries or when you're already familiar with web development in JavaScript.</p>"},{"location":"user-guide/dom/#quick-start-pyscriptweb","title":"Quick start: <code>pyscript.web</code>","text":"<p>The <code>pyscript.web</code> module provides an idiomatic Python interface to the DOM. It wraps the FFI in a way that feels natural to Python developers, with familiar patterns like dictionary-style access, set-like class management, and Pythonic method names.</p>"},{"location":"user-guide/dom/#finding-elements","title":"Finding elements","text":"<p>The <code>page</code> object represents your web page. Use it to find elements by their ID or with CSS selectors:</p> Referencing elements via the page object.<pre><code>from pyscript import web\n# Get an element by ID (returns single Element or None).\nheader = web.page[\"header-id\"]\nheader = web.page[\"#header-id\"]  # The \"#\" prefix is optional.\n# Find by CSS selector (returns an ElementCollection).\ndivs = web.page.find(\"div\")\nbuttons = web.page.find(\".button-class\")\nitems = web.page.find(\"#list .item\")\n# Access page structure.\nweb.page.body.append(some_element)\nweb.page.title = \"New Page Title\"\n</code></pre> <p>CSS selectors work exactly like they do in CSS or JavaScript's <code>querySelector</code>. If you can select it in CSS, you can find it with <code>pyscript.web</code>.</p>"},{"location":"user-guide/dom/#creating-elements","title":"Creating elements","text":"<p>Create new HTML elements using simple Python classes. Element names correspond to HTML tags, and are lower-case to match web conventions. Compose elements together in a declarative style:</p> Declaratively creating elements on the page.<pre><code>from pyscript import web\n# Create simple elements.\ndiv = web.div(\"Hello, World!\")\nparagraph = web.p(\"Some text\", id=\"my-para\", classes=[\"intro\"])\n# Compose elements together.\ncontainer = web.div(\nweb.h1(\"My Task List\"),\nweb.p(\"Keep track of your work\"),\nweb.ul(\nweb.li(\"First task\"),\nweb.li(\"Second task\"),\nweb.li(\"Third task\")\n),\nid=\"task-container\",\nclasses=[\"panel\", \"primary\"]\n)\n# Add to the page.\nweb.page.body.append(container)\n</code></pre> <p>The first (unnamed) arguments to an element become its children. Named arguments like <code>id</code>, <code>classes</code>, and <code>style</code> set HTML attributes.</p> <p>You can also create elements imperatively:</p> Imperatively created elements on the web page.<pre><code>from pyscript import web\n# Create an empty div.\nmy_div = web.div(id=\"my-container\")\n# Add content and styling.\nmy_div.innerHTML = \"&lt;p&gt;Hello!&lt;/p&gt;\"\nmy_div.classes.add(\"active\")\nmy_div.style[\"background-color\"] = \"lightblue\"\n# Create a paragraph and add it.\nmy_p = web.p(\"This is a paragraph.\")\nmy_div.append(my_p)\n</code></pre>"},{"location":"user-guide/dom/#modifying-content-and-attributes","title":"Modifying content and attributes","text":"<p>Once you have an element, you can modify its content and attributes using idiomatic Python:</p> Modifying an element.<pre><code>from pyscript import web\nelement = web.page[\"my-element\"]\n# Update content.\nelement.innerHTML = \"&lt;b&gt;Bold text&lt;/b&gt;\"\nelement.textContent = \"Plain text\"\n# Update attributes.\nelement.id = \"new-id\"\nelement.title = \"Tooltip text\"\n# Bulk update with convenience method.\nelement.update(\nclasses=[\"active\", \"highlighted\"],\nstyle={\"color\": \"red\", \"font-size\": \"16px\"},\ntitle=\"Updated tooltip\"\n)\n</code></pre>"},{"location":"user-guide/dom/#working-with-classes-and-styles","title":"Working with classes and styles","text":"<p>Element classes behave like a Python <code>set</code>, and styles behave like a Python <code>dict</code>:</p> CSS classes are a Python set, CSS styles a Python dict.<pre><code>from pyscript import web\nelement = web.page[\"my-button\"]\n# Classes work like sets.\nelement.classes.add(\"active\")\nelement.classes.add(\"highlighted\")\nelement.classes.remove(\"hidden\")\nelement.classes.discard(\"maybe-not-there\")  # No error if missing.\n# Check membership.\nif \"active\" in element.classes:\nprint(\"Element is active\")\n# Clear all classes.\nelement.classes.clear()\n# Styles work like dictionaries.\nelement.style[\"color\"] = \"red\"\nelement.style[\"background-color\"] = \"#f0f0f0\"\nelement.style[\"font-size\"] = \"16px\"\n# Remove a style.\ndel element.style[\"margin\"]\n# Check if style is set.\nif \"color\" in element.style:\nprint(f\"Colour is {element.style['color']}\")\n</code></pre>"},{"location":"user-guide/dom/#working-with-collections","title":"Working with collections","text":"<p>When you find multiple elements, you get an <code>ElementCollection</code> that you can iterate over, slice, or update in bulk:</p> Working with ElementCollections.<pre><code>from pyscript import web\n# Find multiple elements (returns an ElementCollection).\nitems = web.page.find(\".list-item\")\n# Iterate over collection.\nfor item in items:\nitem.innerHTML = \"Updated\"\nitem.classes.add(\"processed\")\n# Bulk update all elements.\nitems.update_all(\ninnerHTML=\"New content\",\nclasses=[\"updated-item\"]\n)\n# Index and slice collections.\nfirst = items[0]\nlast = items[-1]\nsubset = items[1:3]\n# Get an element by ID within the collection.\nspecial = items[\"special-id\"]\n# Find descendants within the collection.\nsubitems = items.find(\".sub-item\")\n</code></pre>"},{"location":"user-guide/dom/#managing-select-elements","title":"Managing select elements","text":"<p>The <code>select</code> element contains a list of <code>option</code> instances from which you select. When rendered on a web page, it looks like this:</p> <p>Choose an option:  Option 1 Option 2 Option 3 <p></p> <p>The <code>options</code> property of <code>select</code> elements provides convenient methods for managing such options:</p> Elements with options (e.g. &lt;select&gt;).<pre><code>from pyscript import web\n# Get an existing select element.\nselect = web.page[\"my-select\"]\n# Add options.\nselect.options.add(value=\"1\", html=\"Option 1\")\nselect.options.add(value=\"2\", html=\"Option 2\", selected=True)\n# Get the selected option.\nselected = select.options.selected\nprint(f\"Selected: {selected.value}\")\n# Iterate over options.\nfor option in select.options:\nprint(f\"{option.value}: {option.innerHTML}\")\n# Clear all options.\nselect.options.clear()\n# Remove specific option by index.\nselect.options.remove(0)\n</code></pre> <p>This also works for <code>datalist</code> and <code>optgroup</code> elements, that also require lists of options to function.</p>"},{"location":"user-guide/dom/#event-handling-with-pyscriptweb","title":"Event handling with pyscript.web","text":"<p>The <code>@when</code> decorator works seamlessly with <code>pyscript.web</code> elements:</p> @when working with Element instances.<pre><code>from pyscript import when, web\n# Create a button.\nbutton = web.button(\"Click me\", id=\"my-button\")\nweb.page.body.append(button)\n# Attach event handler with decorator.\n@when(\"click\", button)\ndef handle_click(event):\nprint(\"Button clicked!\")\n# Or attach during creation.\ndef another_handler(event):\nprint(\"Another handler\")\nbutton2 = web.button(\"Click too\", on_click=another_handler)\n</code></pre> <p>Learn more about event handling in the events guide.</p>"},{"location":"user-guide/dom/#direct-dom-access","title":"Direct DOM access","text":"<p>When needed, you can access the underlying DOM element directly:</p> Use _dom_element to get the underlying JavaScript Element.<pre><code>from pyscript import web\nelement = web.page[\"my-element\"]\n# Most DOM methods are accessible directly.\nelement.scrollIntoView()\nelement.focus()\nelement.blur()\n# Convenience method for scrolling.\nelement.show_me()  # Calls scrollIntoView().\n# Access the raw underlying DOM element for special cases.\ndom_element = element._dom_element\n</code></pre> <p>Info</p> <p>For complete API documentation of <code>pyscript.web</code>, including all available element types and methods, see the API reference.</p>"},{"location":"user-guide/dom/#example-task-board-with-pyscriptweb","title":"Example: Task board with pyscript.web","text":"<p>Let's look at a complete example that demonstrates these concepts. This task board application lets users add tasks, mark them complete, filter by priority, and delete tasks:</p> <p>View the complete source code.</p> <p>Notice how the code uses Pythonic patterns throughout: dictionary-style access for elements, set operations for classes, and familiar Python syntax for creating and modifying elements.</p>"},{"location":"user-guide/dom/#the-ffi-javascript-interoperability","title":"The FFI: JavaScript interoperability","text":"<p>The foreign function interface (FFI) gives Python direct access to all the standard web capabilities and features, including the browser's built-in web APIs.</p> <p>This is available via the <code>pyscript.window</code> and <code>pyscript.document</code> objects, which are proxies for JavaScript's <code>globalThis</code> and <code>document</code> objects:</p> Complete JavaScript access via the FFI.<pre><code>from pyscript import window, document\n# Access browser APIs.\nhostname = window.location.hostname\ncurrent_url = window.location.href\n# Find and manipulate DOM elements.\nmy_element = document.querySelector(\"#my-id\")\nmy_element.innerText = \"Hello from Python!\"\n# Query all matching elements.\nparagraphs = document.querySelectorAll(\"p\")\nfor p in paragraphs:\np.style.color = \"blue\"\n</code></pre>"},{"location":"user-guide/dom/#proxy-objects","title":"Proxy objects","text":"<p>The FFI creates proxy objects in Python that are linked to actual objects in JavaScript. These proxy objects look and behave like Python objects but have related JavaScript objects associated with them \"in the background\" and automatically managed for you by the FFI.</p> <p>This means the API defined in JavaScript remains the same in Python, so any browser-based JavaScript APIs or third-party JavaScript libraries that expose objects in the web page's <code>globalThis</code> will have exactly the same API in Python as in JavaScript.</p>"},{"location":"user-guide/dom/#type-conversions","title":"Type conversions","text":"<p>The FFI automatically transforms Python and JavaScript objects into their equivalent in the other language:</p> Python JavaScript <code>True</code>, <code>False</code> <code>true</code>, <code>false</code> <code>None</code> <code>null</code> or <code>undefined</code> <code>int</code>, <code>float</code> <code>number</code> <code>str</code> <code>string</code> <code>list</code> <code>Array</code> <code>dict</code> <code>Object</code> <p>For example, a JavaScript array <code>[\"hello\", 1, 2, 3]</code> becomes a Python list <code>[\"hello\", 1, 2, 3]</code>, and vice versa.</p>"},{"location":"user-guide/dom/#javascript-class-instantiation","title":"JavaScript class instantiation","text":"<p>Instantiating JavaScript classes requires special handling because Python and JavaScript do it differently:</p> Use .new() to instantiate JavaScript classes.<pre><code>from pyscript import window\n# To instantiate a JavaScript class, call its .new() method.\nmy_obj = window.MyJavaScriptClass.new(\"some value\")\n# This is equivalent to JavaScript: new MyJavaScriptClass(\"some value\")\n</code></pre> <p>The <code>.new()</code> method is required because Python and JavaScript handle class instantiation very differently. By explicitly calling <code>.new()</code>, PyScript signals and honours this difference.</p> <p>Info</p> <p>For more technical details about JavaScript class instantiation, see the FAQ.</p>"},{"location":"user-guide/dom/#lower-level-ffi-features","title":"Lower-level FFI features","text":"<p>Advanced users who need lower-level access to FFI features can use functions in the <code>pyscript.ffi</code> namespace, available in both Pyodide and MicroPython. These functions are documented in the API reference.</p> <p>For deep technical details about how the FFI works, see the FFI technical guide.</p>"},{"location":"user-guide/dom/#example-task-board-with-ffi","title":"Example: Task board with FFI","text":"<p>Here's the same task board application implemented using the FFI and direct JavaScript APIs instead of <code>pyscript.web</code>:</p> <p>View the complete source code.</p> <p>Compare this implementation with the <code>pyscript.web</code> version above. Notice how the FFI version uses JavaScript method names like <code>querySelector</code> and <code>createElement</code>, whilst the <code>pyscript.web</code> version uses Pythonic patterns.</p>"},{"location":"user-guide/dom/#working-with-javascript-libraries","title":"Working with JavaScript libraries","text":"<p>There are three ways JavaScript code typically appears in web pages. Understanding these helps you integrate JavaScript libraries into your PyScript applications.</p>"},{"location":"user-guide/dom/#standard-javascript-modules-recommended","title":"Standard JavaScript modules (recommended)","text":"<p>Modern JavaScript uses ES6 modules with <code>import</code> and <code>export</code> statements. This is the best way to integrate JavaScript:</p> pyscript.toml - Configure JavaScript modules<pre><code>[js_modules.main]\n\"https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet-src.esm.js\" = \"leaflet\"\n</code></pre> <p>Then import the module in your Python code:</p> main.py - Use the JavaScript module<pre><code>from pyscript.js_modules import leaflet as L\nmap = L.map(\"map\")\n# Use the library...\n</code></pre> <p>That's it! PyScript handles loading the module and making it available in Python.</p> <p>Tip</p> <p>This is the recommended approach. Most modern JavaScript libraries provide ES6 module builds that work perfectly with this method.</p>"},{"location":"user-guide/dom/#javascript-as-a-global-reference-legacy","title":"JavaScript as a global reference (legacy)","text":"<p>Older JavaScript code may add objects directly to the global <code>window</code> object via a <code>&lt;script&gt;</code> tag:</p> HTML with global JavaScript<pre><code>&lt;!doctype html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;!-- This adds an 'html' object to the global scope. --&gt;\n&lt;script src=\"https://cdn.jsdelivr.net/npm/html-escaper@3.0.3/index.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;!-- Your content --&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>Access these global objects via the <code>window</code> object in Python:</p> main.py - Access global JavaScript<pre><code>from pyscript import window, document\n# The window object is the global context.\nhtml = window.html\n# Use the object normally.\nescaped = html.escape(\"&lt;&gt;\")\ndocument.body.append(escaped)\n</code></pre>"},{"location":"user-guide/dom/#umd-modules-legacy","title":"UMD modules (legacy)","text":"<p>The Universal Module Definition (UMD) is an outdated, non-standard way to create JavaScript modules. If you encounter UMD modules, you have two options:</p> <p>Option 1: Use esm.run - This service automatically converts UMD modules to standard ES6 modules:</p> pyscript.toml - Use esm.run to convert UMD<pre><code>[js_modules.main]\n\"https://esm.run/html-escaper\" = \"html_escaper\"\n</code></pre> <p>Option 2: Create a wrapper - If esm.run doesn't work, wrap the module yourself:</p> index.html - Load the UMD module globally<pre><code>&lt;script src=\"https://cdn.jsdelivr.net/npm/html-escaper@3.0.3/index.js\"&gt;&lt;/script&gt;\n</code></pre> wrapper.js - Wrap it as a standard module<pre><code>// Get utilities from the global scope.\nconst { escape, unescape } = globalThis.html;\n// Export as a standard module.\nexport { escape, unescape };\n</code></pre> pyscript.toml - Reference your wrapper<pre><code>[js_modules.main]\n\"./wrapper.js\" = \"html_escaper\"\n</code></pre> main.py - Use it normally<pre><code>from pyscript.js_modules import html_escaper\nescaped = html_escaper.escape(\"&lt;&gt;\")\n</code></pre>"},{"location":"user-guide/dom/#your-own-javascript-code","title":"Your own JavaScript code","text":"<p>Write your own JavaScript as standard ES6 modules by using <code>export</code>:</p> code.js - Your JavaScript module<pre><code>/*\nSimple JavaScript functions for example purposes.\n*/\nexport function hello(name) {\nreturn \"Hello \" + name;\n}\nexport function fibonacci(n) {\nif (n == 1) return 0;\nif (n == 2) return 1;\nreturn fibonacci(n - 1) + fibonacci(n - 2);\n}\n</code></pre> <p>Reference it in your configuration:</p> pyscript.toml<pre><code>[js_modules.main]\n\"code.js\" = \"code\"\n</code></pre> <p>Use it from Python:</p> main.py<pre><code>from pyscript.js_modules import code\ngreeting = code.hello(\"Chris\")\nprint(greeting)\nresult = code.fibonacci(12)\nprint(result)\n</code></pre> <p>For more details on configuring JavaScript modules, see the configuration guide.</p>"},{"location":"user-guide/dom/#when-to-use-which-approach","title":"When to use which approach","text":"<p>Both <code>pyscript.web</code> and the FFI are powerful tools. Here's when to use each:</p>"},{"location":"user-guide/dom/#use-pyscriptweb-when","title":"Use pyscript.web when:","text":"<ul> <li>You're comfortable with Python - The API feels natural to Python   developers, with Pythonic naming and patterns.</li> <li>You're building from scratch - Creating new elements and   composing interfaces is elegant and concise.</li> <li>You value readability - The code is self-documenting and easy to   understand.</li> <li>You're teaching or learning - The interface is easier to   explain and understand to Python learners.</li> </ul>"},{"location":"user-guide/dom/#use-the-ffi-when","title":"Use the FFI when:","text":"<ul> <li>You're integrating JavaScript libraries - Direct access to   JavaScript APIs means no translation layer.</li> <li>You're porting existing JavaScript code - The API is identical,   making translation straightforward.</li> <li>You need a specific browser API - Some browser features don't   have <code>pyscript</code> based wrappers (yet!).</li> <li>You're already familiar with web development - If you know   JavaScript, the FFI feels natural.</li> </ul> <p>Tip</p> <p>You can mix both approaches in the same application. Use <code>pyscript.web</code> for most tasks and drop down to the FFI when needed. They work together seamlessly.</p>"},{"location":"user-guide/dom/#whats-next","title":"What's next","text":"<p>Now that you understand DOM manipulation, explore these related topics:</p> <p>Events - Learn how to respond to user actions and browser events with the <code>@when</code> decorator and event handlers.</p> <p>Display - Discover how to show Python objects, images, charts, and rich content on your page with the <code>display()</code> function.</p> <p>Configuration - Configure your Python environment, specify packages, and customise PyScript's behaviour.</p> <p>Workers - Run Python code in background threads for responsive applications.</p>"},{"location":"user-guide/editor/","title":"Python Editor","text":"<p>PyScript includes a built-in code editor for creating interactive Python coding environments in web pages. Based on CodeMirror, the editor provides syntax highlighting, a run button, and the ability to edit and execute code directly in the browser.</p> <p>This guide explains how to use the Python editor for tutorials, demonstrations, and interactive coding experiences.</p> <p>Warning</p> <p>The Python editor is under active development. Future versions may include refinements and changes based on community feedback. The core functionality described here is stable, but details may evolve.</p>"},{"location":"user-guide/editor/#basic-usage","title":"Basic usage","text":"<p>Create an editor by setting the script type to <code>py-editor</code> for Pyodide or <code>mpy-editor</code> for MicroPython:</p> A simple editor example.<pre><code>&lt;script type=\"py-editor\"&gt;\nimport sys\nprint(sys.version)\n&lt;/script&gt;\n</code></pre> <p>This creates a visual code editor with syntax highlighting and a run button. The code inside the tag becomes the initial editor content. Users can modify the code and click run to execute it.</p> <p></p> <p>The interpreter loads only when the user clicks run, not when the page loads. This keeps initial page load fast, downloading the Python runtime only when needed.</p>"},{"location":"user-guide/editor/#independent-environments","title":"Independent environments","text":"<p>Each editor runs in its own isolated environment by default. Variables and state don't leak between editors:</p> Independent editor environments.<pre><code>&lt;script type=\"py-editor\"&gt;\nimport sys\nprint(sys.version)\n&lt;/script&gt;\n&lt;script type=\"mpy-editor\"&gt;\nimport sys\nprint(sys.version)\na = 42\nprint(a)\n&lt;/script&gt;\n</code></pre> <p>The first editor uses Pyodide, the second uses MicroPython. Each has completely separate state. The variable <code>a</code> in the second editor doesn't exist in the first.</p>"},{"location":"user-guide/editor/#shared-environments","title":"Shared environments","text":"<p>Editors can share state by using the same interpreter and <code>env</code> attribute:</p> Shared editor environments.<pre><code>&lt;script type=\"mpy-editor\" env=\"shared\"&gt;\nif 'a' not in globals():\na = 1\nelse:\na += 1\nprint(a)\n&lt;/script&gt;\n&lt;script type=\"mpy-editor\" env=\"shared\"&gt;\n# Accesses 'a' from the first editor.\nprint(a * 2)\n&lt;/script&gt;\n</code></pre> <p>Both editors share the <code>\"shared\"</code> environment. Variables defined in one editor are accessible in the other. Run the first editor, then the second, and you'll see the second editor can access the first editor's variables.</p> <p>The interpreter type and environment name appear in the top right corner of each editor, showing which environment it belongs to.</p>"},{"location":"user-guide/editor/#setup-editors","title":"Setup editors","text":"<p>Sometimes you need boilerplate code that runs automatically without cluttering the visible editor. The <code>setup</code> attribute handles this:</p> Editor setup.<pre><code>&lt;script type=\"mpy-editor\" env=\"classroom\" setup&gt;\n# This code runs automatically but isn't visible.\nimport math\npi = math.pi\n&lt;/script&gt;\n&lt;script type=\"mpy-editor\" env=\"classroom\"&gt;\n# This editor is visible. The setup code already ran.\nprint(f\"Pi is approximately {pi:.2f}\")\n&lt;/script&gt;\n</code></pre> <p>Setup editors don't appear on the page but execute before any other editors in the same environment. This is particularly useful for educational contexts where you want students to focus on specific code without seeing all the scaffolding.</p>"},{"location":"user-guide/editor/#stopping-execution","title":"Stopping execution","text":"<p>Code running in an editor sometimes needs to be stopped - perhaps it's stuck in an infinite loop or taking too long. Hover over a running editor to reveal the stop button where the run button was. Click it, confirm, and the code stops executing:</p> <p></p> <p>The editor refreshes, letting you fix the problem and run again.</p>"},{"location":"user-guide/editor/#keyboard-shortcuts","title":"Keyboard shortcuts","text":"<p>Run code without clicking the button using keyboard shortcuts. Press <code>Ctrl+Enter</code> (or <code>Cmd+Enter</code> on Mac, or <code>Shift+Enter</code>) to execute the code. This speeds up the edit-run-debug cycle.</p>"},{"location":"user-guide/editor/#programmatic-access","title":"Programmatic access","text":"<p>Access and control editors from Python code using the <code>code</code> property:</p> Updating code in the editor via Python.<pre><code>from pyscript import document\n# Get reference to an editor.\neditor = document.querySelector('#my-editor')\n# Read the current code.\nprint(editor.code)\n# Update the code.\neditor.code = \"\"\"\na = 1\nb = 2\nprint(a + b)\n\"\"\"\n# Execute code programmatically.\neditor.process(editor.code)\n</code></pre> <p>This lets you build interfaces that modify or execute editor content based on user actions elsewhere on the page.</p>"},{"location":"user-guide/editor/#custom-rendering-location","title":"Custom rendering location","text":"<p>By default, editors render where their script tag appears. Use the <code>target</code> attribute to render elsewhere:</p> Specify a target in which to render the editor.<pre><code>&lt;script type=\"mpy-editor\" target=\"editor-container\"&gt;\nimport sys\nprint(sys.version)\n&lt;/script&gt;\n&lt;div id=\"editor-container\"&gt;&lt;/div&gt;\n</code></pre> <p>The editor appears inside the target element rather than replacing the script tag. This gives you control over page layout.</p>"},{"location":"user-guide/editor/#configuration","title":"Configuration","text":"<p>Editors require explicit configuration through the <code>config</code> attribute. They don't use <code>&lt;py-config&gt;</code> or <code>&lt;mpy-config&gt;</code> tags:</p> Sample configuration.<pre><code>&lt;script type=\"py-editor\" config='{\"packages\": [\"numpy\"]}'&gt;\nimport numpy as np\nprint(np.array([1, 2, 3]))\n&lt;/script&gt;\n</code></pre> <p>If using setup editors, only the setup editor needs configuration. All subsequent editors in the same environment share that configuration.</p>"},{"location":"user-guide/editor/#overriding-execution","title":"Overriding execution","text":"<p>Advanced use cases may require custom execution behaviour. Override the editor's <code>handleEvent</code> method:</p> Custom execution behaviour.<pre><code>&lt;script type=\"mpy-editor\" id=\"custom\"&gt;\nprint(6 * 7)\n&lt;/script&gt;\n&lt;script type=\"mpy\"&gt;\nfrom pyscript import document\ndef handle_event(event):\n# Log the code instead of running it.\nprint(event.code)\n# Return False to prevent default execution.\nreturn False\neditor = document.getElementById(\"custom\")\neditor.handleEvent = handle_event\n&lt;/script&gt;\n</code></pre> <p>This technique enables scenarios like executing code on connected hardware via USB serial connections to microcontrollers.</p>"},{"location":"user-guide/editor/#editor-versus-terminal","title":"Editor versus terminal","text":"<p>The editor and terminal both provide interactive Python experiences but serve different purposes and work differently.</p> <p>The editor isolates code in workers and evaluates everything when you click run. It's designed for writing complete programs, editing freely, and running when ready. The clear separation between code and output makes it ideal for tutorials and demonstrations.</p> <p>The terminal evaluates code line by line as you type, like a traditional REPL. It supports blocking operations like <code>input()</code> in workers and provides an XTerm.js interface. The terminal feels more like a traditional Python session.</p> <p>Use editors when building coding tutorials, creating interactive demonstrations, or letting users write and execute complete programs. Use terminals when providing a REPL experience, showing command-line style interaction, or needing <code>input()</code> support.</p>"},{"location":"user-guide/editor/#accessibility-considerations","title":"Accessibility considerations","text":"<p>The editor traps the <code>tab</code> key for code indentation rather than moving focus. This matches standard code editor behaviour but has accessibility implications.</p> <p>We follow CodeMirror's accessibility guidance: press <code>Esc</code> before <code>Tab</code> to move focus to the next element. Otherwise, <code>Tab</code> indents code.</p> <p>This provides both standard coding behaviour and an escape hatch for keyboard navigation.</p>"},{"location":"user-guide/editor/#whats-next","title":"What's next","text":"<p>Now that you understand the Python editor, explore these related topics:</p> <p>Terminal - Use the alternative REPL-style interface for interactive Python sessions.</p> <p>PyGame - Use PyGame-CE with PyScript, covering the differences from traditional PyGame development and techniques for making games work well in the browser.</p> <p>PyScript in JavaScript - drive PyScript from the world JavaScript. </p> <p>Plugins - Understand the plugin system, lifecycle hooks, and how to write plugins that integrate with PyScript.</p>"},{"location":"user-guide/events/","title":"Events","text":"<p>Events are how your PyScript application responds to user actions: clicks, key presses, form submissions, mouse movements, and more. PyScript provides the <code>@when</code> decorator, a powerful and Pythonic way to connect Python functions to browser events.</p> <p>This guide explores the <code>@when</code> decorator and the custom <code>Event</code> class for creating your own event system within Python code.</p>"},{"location":"user-guide/events/#the-when-decorator","title":"The @when decorator","text":"<p>The <code>@when</code> decorator connects Python functions to browser events. When the specified event occurs on matching elements, your function is called automatically.</p>"},{"location":"user-guide/events/#basic-usage","title":"Basic usage","text":"<p>The simplest form takes an event type and a CSS selector:</p> Decorate with an event type and target (CSS selector).<pre><code>from pyscript import when\n@when(\"click\", \"#my-button\")\ndef handle_click(event):\n\"\"\"\n    Called whenever the element with id 'my-button' is clicked.\n    \"\"\"\nprint(\"Button was clicked!\")\n</code></pre> <p>The decorator attaches the function to all elements matching the selector. If multiple elements match, the function is called for each one when its event fires.</p>"},{"location":"user-guide/events/#event-types","title":"Event types","text":"<p>You can handle any browser event. Common ones include:</p> <p>Mouse events: <code>click</code>, <code>dblclick</code>, <code>mousedown</code>, <code>mouseup</code>, <code>mousemove</code>, <code>mouseenter</code>, <code>mouseleave</code>, <code>mouseover</code>, <code>mouseout</code></p> <p>Keyboard events: <code>keydown</code>, <code>keyup</code>, <code>keypress</code></p> <p>Form events: <code>submit</code>, <code>change</code>, <code>input</code>, <code>focus</code>, <code>blur</code></p> <p>Document events: <code>DOMContentLoaded</code>, <code>load</code>, <code>resize</code>, <code>scroll</code></p> <p>See the MDN Event Reference for a complete list.</p>"},{"location":"user-guide/events/#css-selectors","title":"CSS selectors","text":"<p>The selector can be any valid CSS selector:</p> The @when decorator and CSS selectors are a flexible combination.<pre><code>from pyscript import when\n# By ID.\n@when(\"click\", \"#submit-button\")\ndef handle_submit(event):\nprint(\"Submit button clicked\")\n# By class.\n@when(\"click\", \".delete-btn\")\ndef handle_delete(event):\nprint(\"Delete button clicked\")\n# By attribute.\n@when(\"click\", \"[data-action='save']\")\ndef handle_save(event):\nprint(\"Save button clicked\")\n# Complex selectors.\n@when(\"click\", \"nav .menu-item:not(.disabled)\")\ndef handle_menu(event):\nprint(\"Menu item clicked\")\n</code></pre>"},{"location":"user-guide/events/#working-with-element-objects","title":"Working with Element objects","text":"<p>You can also pass <code>pyscript.web</code> Element objects directly instead of CSS selectors:</p> The @when decorator also works with Pythonic Element instances.<pre><code>from pyscript import when, web\n# Create an element.\nbutton = web.button(\"Click me\", id=\"my-button\")\nweb.page.body.append(button)\n# Attach event handler using the Element object.\n@when(\"click\", button)\ndef handle_click(event):\nprint(\"Button clicked!\")\n</code></pre> <p>This works with <code>ElementCollection</code> objects too:</p> The @when decorator applied to all items in an ElementCollection.<pre><code>from pyscript import when, web\n# Find multiple elements.\nbuttons = web.page.find(\".action-button\")\n# Attach handler to all of them.\n@when(\"click\", buttons)\ndef handle_button_click(event):\nprint(f\"Button clicked: {event.target.textContent}\")\n</code></pre>"},{"location":"user-guide/events/#javascript-event-objects","title":"JavaScript event objects","text":"<p>When a browser event occurs, your function receives a JavaScript event object containing information about what happened. Handling such events is optional.</p>"},{"location":"user-guide/events/#common-properties","title":"Common properties","text":"An event object's different properties.<pre><code>from pyscript import when\n@when(\"click\", \".item\")\ndef handle_click(event):\n# The element that triggered the event.\ntarget = event.target\n# The element the listener is attached to.\ncurrent_target = event.currentTarget\n# Event type.\nevent_type = event.type  # \"click\"\n# Mouse position.\nx = event.clientX\ny = event.clientY\n# Keyboard keys.\nkey = event.key\nctrl_pressed = event.ctrlKey\nshift_pressed = event.shiftKey\n</code></pre>"},{"location":"user-guide/events/#preventing-defaults","title":"Preventing defaults","text":"<p>Some events have default browser behaviours you might want to prevent:</p> Preventing default event behaviour.<pre><code>from pyscript import when\n@when(\"submit\", \"#my-form\")\ndef handle_submit(event):\n# Prevent the form from actually submitting.\nevent.preventDefault()\n# Handle the submission in Python instead.\nprint(\"Form submitted via Python!\")\n@when(\"click\", \"a.external-link\")\ndef handle_link(event):\n# Prevent navigation.\nevent.preventDefault()\n# Handle the link click custom logic.\nprint(f\"Would navigate to: {event.target.href}\")\n</code></pre>"},{"location":"user-guide/events/#stopping-propagation","title":"Stopping propagation","text":"<p>Events \"bubble\" up through the DOM tree. Stop this with <code>stopPropagation()</code>:</p> Stop the event 'bubbling' up.<pre><code>from pyscript import when\n@when(\"click\", \".outer\")\ndef handle_outer(event):\nprint(\"Outer clicked\")\n@when(\"click\", \".inner\")\ndef handle_inner(event):\nprint(\"Inner clicked\")\n# Stop the event from reaching .outer.\nevent.stopPropagation()\n</code></pre>"},{"location":"user-guide/events/#custom-pythonic-events","title":"Custom Pythonic events","text":"<p>The <code>pyscript.Event</code> class lets you create custom events within your Python code. This is useful for decoupling parts of your application or creating your own event-driven architecture.</p>"},{"location":"user-guide/events/#creating-and-using-custom-events","title":"Creating and using custom events","text":"A simple Event example.<pre><code>from pyscript import Event, when\n# Create a custom event.\ndata_loaded = Event()\n# Add a listener using @when.\n@when(data_loaded)\ndef handle_data_loaded(result):\nprint(f\"Data loaded: {result}\")\n# Later, trigger the event.\ndata_loaded.trigger({\"items\": [1, 2, 3], \"count\": 3})\n</code></pre>"},{"location":"user-guide/events/#multiple-listeners","title":"Multiple listeners","text":"<p>Custom events can have multiple listeners:</p> Multiple listeners on a single Event instance.<pre><code>from pyscript import Event, when\nuser_logged_in = Event()\n@when(user_logged_in)\ndef update_ui(user_data):\nprint(f\"Welcome, {user_data['name']}!\")\n@when(user_logged_in)\ndef load_preferences(user_data):\nprint(f\"Loading preferences for {user_data['id']}\")\n@when(user_logged_in)\ndef track_analytics(user_data):\nprint(\"Recording login event\")\n# Trigger once, all listeners are called.\nuser_logged_in.trigger({\"id\": 123, \"name\": \"Alice\"})\n</code></pre>"},{"location":"user-guide/events/#bridging-dom-and-custom-events","title":"Bridging DOM and custom events","text":"<p>You can trigger custom events from DOM event handlers:</p> Trigger custom events.<pre><code>from pyscript import Event, when\n# Custom event.\nbutton_clicked = Event()\n# Trigger custom event from DOM event.\n@when(\"click\", \"#my-button\")\ndef handle_dom_click(event):\n# Do some processing.\nbutton_text = event.target.textContent\n# Trigger custom event with processed data.\nbutton_clicked.trigger({\"text\": button_text, \"timestamp\": \"now\"})\n# Handle the custom event elsewhere.\n@when(button_clicked)\ndef handle_custom_event(data):\nprint(f\"Button '{data['text']}' was clicked at {data['timestamp']}\")\n</code></pre> <p>This pattern decouples DOM handling from business logic.</p>"},{"location":"user-guide/events/#advanced-patterns","title":"Advanced patterns","text":""},{"location":"user-guide/events/#stacking-decorators","title":"Stacking decorators","text":"<p>You can stack <code>@when</code> decorators to handle multiple events with one function:</p> Stacked @when decorators.<pre><code>from pyscript import when\n@when(\"mouseenter\", \".highlight\")\n@when(\"focus\", \".highlight\")\ndef highlight_element(event):\nevent.target.classList.add(\"highlighted\")\n@when(\"mouseleave\", \".highlight\")\n@when(\"blur\", \".highlight\")\ndef unhighlight_element(event):\nevent.target.classList.remove(\"highlighted\")\n</code></pre>"},{"location":"user-guide/events/#async-event-handlers","title":"Async event handlers","text":"<p>Event handlers can be async functions:</p> Asynchronous handlers.<pre><code>from pyscript import when\nimport asyncio\n@when(\"click\", \"#fetch-data\")\nasync def fetch_data(event):\nprint(\"Fetching data...\")\n# Simulate async operation.\nawait asyncio.sleep(2)\nprint(\"Data fetched!\")\n</code></pre>"},{"location":"user-guide/events/#event-options","title":"Event options","text":"<p>Pass options to control how events are handled:</p> Event options.<pre><code>from pyscript import when\n# Fire only once.\n@when(\"click\", \"#one-time-button\", once=True)\ndef handle_once(event):\nprint(\"This runs only once!\")\n# Use capture phase instead of bubble phase.\n@when(\"click\", \"#container\", capture=True)\ndef handle_capture(event):\nprint(\"Captured during capture phase\")\n# Mark as passive (can't prevent default).\n@when(\"scroll\", window, passive=True)\ndef handle_scroll(event):\n# Can't call event.preventDefault() here.\nprint(\"Scrolling...\")\n</code></pre> <p>See addEventListener options for details.</p>"},{"location":"user-guide/events/#functions-without-event-arguments","title":"Functions without event arguments","text":"<p>If your handler doesn't need the event object, you can omit it:</p> The event argument is optional.<pre><code>from pyscript import when\n@when(\"click\", \"#simple-button\")\ndef simple_handler():\n\"\"\"\n    No event parameter needed.\n    \"\"\"\nprint(\"Button clicked!\")\n</code></pre> <p>PyScript detects whether your function accepts arguments and calls it appropriately.</p>"},{"location":"user-guide/events/#example-interactive-colour-picker","title":"Example: Interactive colour picker","text":"<p>Here's a complete example demonstrating various event handling patterns:</p> <p>View the complete source code.</p> <p>This example shows:</p> <ul> <li>Handling multiple event types (<code>input</code>, <code>click</code>, <code>change</code>).</li> <li>Working with form inputs.</li> <li>Updating the UI based on events.</li> <li>Custom events for decoupling logic.</li> </ul>"},{"location":"user-guide/events/#whats-next","title":"What's next","text":"<p>Now that you understand event handling, explore these related topics:</p> <p>DOM Interaction - Learn how to find and manipulate elements that you're attaching events to.</p> <p>Display - Discover how to show Python objects, images, charts, and rich content on your page with the <code>display()</code> function.</p> <p>Configuration - Configure how your scripts load and when event handlers are attached.</p> <p>Workers - Discover how to handle events in background threads for responsive applications.</p>"},{"location":"user-guide/ffi/","title":"Foreign Function Interface","text":"<p>The Foreign Function Interface (FFI) enables Python and JavaScript to work together seamlessly. Python code can call JavaScript functions, access browser APIs, and manipulate the DOM directly. JavaScript code can call Python functions and access Python objects. This interoperability is what makes PyScript possible.</p> <p>PyScript provides a unified FFI through <code>pyscript.ffi</code> that works consistently across both Pyodide and MicroPython interpreters. This guide explains how to use the FFI to bridge between Python and JavaScript when necessary.</p> <p>Info</p> <p>PyScript also enables JavaScript to call into Python!</p> <p>Please see the PyScript in JavaScript section of this user-guide for more information.</p>"},{"location":"user-guide/ffi/#when-to-use-the-ffi","title":"When to use the FFI","text":"<p>The FFI is a low-level interface for situations where higher-level abstractions don't suffice. Most of the time, you should prefer <code>pyscript.web</code> for DOM manipulation, <code>pyscript.media</code> for device access, and other purpose-built APIs. These modules use the FFI internally whilst providing cleaner, more Pythonic interfaces.</p> <p>Use the FFI directly when you need to work with JavaScript libraries that don't have PyScript wrappers, access browser APIs not yet covered by PyScript modules, or pass Python functions as callbacks to JavaScript code.</p> <p>For DOM manipulation specifically, always prefer <code>pyscript.web</code> over direct FFI usage. The FFI examples in this guide focus on situations where <code>pyscript.web</code> doesn't apply.</p>"},{"location":"user-guide/ffi/#converting-python-to-javascript","title":"Converting Python to JavaScript","text":"<p>The <code>to_js()</code> function converts Python objects into their JavaScript equivalents:</p> The to_js() function.<pre><code>from pyscript.ffi import to_js\n# Python dict becomes JavaScript object.\noptions = {\"title\": \"Hello\", \"icon\": \"icon.png\"}\njs_options = to_js(options)\n# Python list becomes JavaScript array.\nnumbers = [1, 2, 3, 4, 5]\njs_array = to_js(numbers)\n</code></pre> <p>This conversion is essential when calling JavaScript APIs that expect JavaScript objects rather than Python objects. The function handles the translation automatically, converting dictionaries to JavaScript objects (not Maps), lists to arrays, and other common types appropriately.</p> <p>Info</p> <p>PyScript's <code>to_js()</code> differs from Pyodide's version by defaulting to converting Python dictionaries into JavaScript objects rather than Maps. This matches what most JavaScript APIs expect and aligns with MicroPython's behaviour, providing consistency across interpreters.</p>"},{"location":"user-guide/ffi/#creating-function-proxies","title":"Creating function proxies","text":"<p>When passing Python functions to JavaScript, you must create a proxy to prevent garbage collection:</p> Function proxies.<pre><code>from pyscript.ffi import create_proxy\nfrom pyscript import document\ndef handle_click(event):\n\"\"\"\n    Handle button clicks.\n    \"\"\"\nprint(\"Button clicked!\")\n# Create a proxy for the JavaScript event listener.\nbutton = document.getElementById(\"my-button\")\nbutton.addEventListener(\"click\", create_proxy(handle_click))\n</code></pre> <p>Without <code>create_proxy()</code>, the Python function would be garbage collected immediately, causing the event listener to fail. The proxy maintains a reference, keeping the function alive for JavaScript to call.</p> <p>Warning</p> <p>When using <code>pyscript.web</code> with the <code>@when</code> decorator, proxies are created automatically. You only need <code>create_proxy()</code> when working directly with JavaScript APIs.</p>"},{"location":"user-guide/ffi/#checking-for-null-values","title":"Checking for null values","text":"<p>JavaScript has both <code>null</code> and <code>undefined</code>. Python has <code>None</code>. The <code>is_none()</code> function checks for both:</p> The correct way to check for null-ish values.<pre><code>from pyscript.ffi import is_none\nfrom pyscript import js\nvalue = js.document.getElementById(\"nonexistent\")\nif is_none(value):\nprint(\"Element not found\")\n</code></pre> <p>This handles the mismatch between Python's single null-like value and JavaScript's multiple null-like values, providing consistent behaviour across interpreters.</p>"},{"location":"user-guide/ffi/#merging-javascript-objects","title":"Merging JavaScript objects","text":"<p>The <code>assign()</code> function merges JavaScript objects, similar to <code>Object.assign()</code> in JavaScript:</p> Merge JavaScript objects.<pre><code>from pyscript.ffi import assign, to_js\nfrom pyscript import js\n# Create a base object.\noptions = js.Object.new()\n# Merge in properties.\nassign(options, {\"width\": 800}, {\"height\": 600})\n</code></pre> <p>This is useful when building configuration objects for JavaScript libraries that expect objects built through mutation rather than created whole.</p>"},{"location":"user-guide/ffi/#accessing-javascript-globals","title":"Accessing JavaScript globals","text":"<p>The <code>js</code> module provides access to JavaScript's global namespace:</p> Using the js to reference globalThis.<pre><code>from pyscript import js\n# Call JavaScript functions.\njs.console.log(\"Hello from Python!\")\n# Access browser APIs.\njs.alert(\"This is an alert\")\n# Create JavaScript objects.\ndate = js.Date.new()\nprint(date.toISOString())\n</code></pre> <p>Through <code>js</code>, you can access anything available in JavaScript's global scope, including browser APIs, third-party libraries loaded via script tags, and built-in JavaScript objects.</p>"},{"location":"user-guide/ffi/#example-task-board-with-direct-dom-manipulation","title":"Example: Task board with direct DOM manipulation","text":"<p>The task board example demonstrates FFI usage for direct DOM manipulation, contrasting with the more Pythonic <code>pyscript.web</code> approach:</p> <p>View the complete source code.</p> <p>This example intentionally uses the FFI directly rather than <code>pyscript.web</code>, showing how to work with the DOM at a lower level when necessary. Compare this to the <code>pyscript.web</code> version to see why the higher-level API is Pythonically preferable.</p> <p>The FFI code creates elements, sets properties, and appends children manually:</p> FFI based native DOM manipulation.<pre><code>from pyscript import document\nfrom pyscript.ffi import create_proxy\n# Create element.\ntask_div = document.createElement(\"div\")\ntask_div.className = \"task\"\ntask_div.textContent = task_text\n# Create button with event handler.\ndelete_btn = document.createElement(\"button\")\ndelete_btn.textContent = \"Delete\"\ndelete_btn.addEventListener(\"click\", create_proxy(delete_handler))\n# Assemble the DOM.\ntask_div.appendChild(delete_btn)\ncontainer.appendChild(task_div)\n</code></pre> <p>This works, but <code>pyscript.web</code> would express the same logic more clearly, Pythonically and with less boilerplate.</p>"},{"location":"user-guide/ffi/#understanding-interpreter-differences","title":"Understanding interpreter differences","text":"<p>Pyodide and MicroPython implement JavaScript interop differently. PyScript's FFI abstracts these differences, but understanding them helps when debugging issues.</p> <p>Pyodide provides comprehensive FFI features including detailed type conversion control, whilst MicroPython offers a simpler, more straightforward implementation. PyScript's unified FFI provides a consistent interface that works reliably on both, defaulting to sensible behaviours that match common use cases.</p> <p>For interpreter-specific FFI features, access them through <code>pyodide.ffi</code> or <code>micropython.ffi</code> directly. However, this breaks cross-interpreter compatibility and should only be done when absolutely necessary.</p>"},{"location":"user-guide/ffi/#worker-context-utilities","title":"Worker context utilities","text":"<p>When working with workers, the FFI provides additional utilities for cross-thread communication. The <code>direct</code>, <code>gather</code>, and <code>query</code> functions help manage objects and data across thread boundaries. These are advanced features covered in detail in the FFI API docs and are primarily relevant when building complex multi-threaded applications.</p>"},{"location":"user-guide/ffi/#in-summary","title":"In summary","text":"<p>Prefer higher-level APIs when they exist. Use <code>pyscript.web</code> for DOM work, <code>pyscript.media</code> for devices, and other purpose-built modules rather than reaching for the FFI directly.</p> <p>Create proxies for Python callbacks passed to JavaScript. Without proxies, functions get garbage collected and event handlers fail.</p> <p>Convert Python objects to JavaScript when calling browser APIs. Most JavaScript functions expect JavaScript objects, not Python objects, so use <code>to_js()</code> when passing dictionaries or complex data structures.</p> <p>Handle <code>null</code> values correctly. JavaScript's <code>null</code> and <code>undefined</code> both exist alongside Python's <code>None</code>, so use <code>is_none()</code> for reliable null checking.</p>"},{"location":"user-guide/ffi/#whats-next","title":"What's next","text":"<p>Now that you understand the FFI, explore these related topics:</p> <p>Architecture guide - provides technical details about how PyScript implements workers using PolyScript and Coincident if you're interested in the underlying mechanisms.</p> <p>Workers - Display content from background threads (requires explicit <code>target</code> parameter).</p> <p>Filesystem - Learn more about the virtual filesystem and how the <code>files</code> option works.</p> <p>FFI - Understand how JavaScript modules integrate with Python through the foreign function interface.</p> <p>Offline - Use PyScript while not connected to the internet.</p>"},{"location":"user-guide/filesystem/","title":"Filesystem","text":"<p>As you know, the filesystem is where you store files. For Python to work, there needs to be a filesystem in which Python packages, modules, and data for your applications can be found. When you <code>import</code> a library or <code>open()</code> a file, Python looks in the filesystem.</p> <p>However, things are not as they may seem in the browser environment.</p> <p>This guide clarifies what PyScript means by a filesystem, and the ways in which PyScript interacts with such concepts.</p>"},{"location":"user-guide/filesystem/#two-filesystems","title":"Two filesystems","text":"<p>PyScript interacts with two distinct filesystems.</p> <p>The first is provided by the browser, thanks to Emscripten. This is a virtual in-memory filesystem that has nothing to do with your device's local filesystem. It exists entirely within the browser based sandbox used by PyScript. The <code>files</code> configuration option defines what is found on this filesystem.</p> <p>The second filesystem is your device's actual local filesystem - the hard drive on your laptop, mobile, or tablet. PyScript provides an API for accessing it, but this requires explicit permission from the user. Think of it as gate-keeping a bridge between the sandboxed world of the browser and the outside world of your device's filesystem. Once mounted, a folder from your local filesystem appears at a directory in the browser's virtual filesystem.</p> <p>Danger</p> <p>Access to the device's local filesystem is only available in recent Chromium based browsers. The maximum capacity for files shared in this way is 4GB.</p> <p>Firefox and Safari do not support this capability yet, so it is not available to PyScript running in these browsers.</p>"},{"location":"user-guide/filesystem/#the-in-browser-virtual-filesystem","title":"The in-browser virtual filesystem","text":"<p>The filesystem that both Pyodide and MicroPython use by default is the in-browser virtual filesystem. Opening files and importing modules takes place in relation to this sandboxed environment. You configure it via the <code>files</code> entry in your settings.</p> <p>Here's a simple example. First, configure a file to be fetched:</p> Copy the source URL to ./myfile.txt.<pre><code>{\n\"files\": {\n\"https://example.com/myfile.txt\": \"./myfile.txt\"\n}\n}\n</code></pre> <p>Then use the resulting file as usual from Python:</p> Read the file from the browser's virtual filesystem.<pre><code>with open(\"myfile.txt\", \"r\") as myfile:\nprint(myfile.read())\n</code></pre> <p>Currently, each time you reload the page, the filesystem is recreated afresh. Any data stored by PyScript to this filesystem will be lost when you reload. In the future, we may make it possible to configure the in-browser virtual filesystem as persistent across reloads.</p> <p>Info</p> <p>The Emscripten filesystem article provides an excellent technical overview of the browser based virtual filesystem's implementation and architecture.</p> <p>In summary, the PyScript filesystem is contained within the browser's sandbox, and each instance of a Python interpreter used by PyScript runs in a separate sandbox. They do not share virtual filesystems. All Python related filesystem operations work as expected with each isolated filesystem. The virtual filesystem is configured via the <code>files</code> entry in your settings. Currently, the filesystem is not persistent between page reloads, and has a maximum capacity of 4GB of data (a limitation we cannot control).</p>"},{"location":"user-guide/filesystem/#the-devices-local-filesystem","title":"The device's local filesystem","text":"<p>Warning</p> <p>Access to the device's local filesystem currently only works on recent Chromium based browsers.</p> <p>Your device that runs your browser has a filesystem provided by a hard drive. Thanks to the <code>pyscript.fs</code> namespace, both MicroPython and Pyodide can gain access to this filesystem, should the user of your code allow this to happen.</p> <p>This requires what's called a transient activation for the purposes of user activation of gated features. Put simply, before your code gains access to their local filesystem, an explicit agreement needs to be gathered from the user. Part of this process involves asking the user to select a target directory on their local filesystem to which PyScript will be given access.</p> <p>The directory on their local filesystem, selected by the user, is then mounted to a given directory inside the browser's virtual filesystem. In this way, a mapping is made between the sandboxed world of the browser and the outside world of the user's filesystem.</p> <p>Your code will then be able to perform all the usual filesystem related operations provided by Python within the mounted directory. However, such changes will not take effect on the local filesystem until your code explicitly calls the <code>sync()</code> function. At this point, the state of the in-browser virtual filesystem and the user's local filesystem are synchronised.</p> <p>Warning</p> <p>Changes you make to mounted files are not automatically saved to the local filesystem. You must call <code>fs.sync()</code> to persist them.</p> <p>The following code demonstrates the simplest use case:</p> Access to the user's local filesystem.<pre><code># Chromium only browsers!\nfrom pyscript import fs\n# Ask for permission to mount any local folder into the virtual\n# filesystem. The folder \"/local\" refers to the directory on the\n# virtual filesystem to which the user-selected directory will be\n# mounted.\nawait fs.mount(\"/local\")\n# Do file related operations here.\nwith open(\"/local/data.txt\", \"w\") as f:\nf.write(\"Hello from PyScript!\")\n# Ensure changes are persisted to the local filesystem's folder.\nawait fs.sync(\"/local\")\n# If needed, sync and unmount to free RAM.\nawait fs.unmount(\"/local\")\n</code></pre> <p>It is possible to use multiple different local directories with the same mount point. This is important if your application provides some generic functionality on data that might be in different local directories. For instance, you may have different versions of data for a PyScript based application in different directories, and may wish to switch between them at runtime. In this case, use the following technique:</p> Mounting and unmounting.<pre><code># Mount a local folder specifying a different handler. This requires a\n# user explicit transient action (once).\nawait fs.mount(\"/local\", id=\"v1\")\n# Operate on that folder.\nwith open(\"/local/model.dat\", \"r\") as f:\ndata = f.read()\nawait fs.unmount(\"/local\")\n# Mount a different local folder specifying a different handler. This\n# also requires a user explicit transient action (once).\nawait fs.mount(\"/local\", id=\"v2\")\n# Operate on that folder.\nwith open(\"/local/model.dat\", \"r\") as f:\ndata = f.read()\nawait fs.unmount(\"/local\")\n# Go back to the original handler. No transient action required now.\nawait fs.mount(\"/local\", id=\"v1\")\n# Operate again on that folder.\n</code></pre> <p>In addition to the mount <code>path</code> and handler <code>id</code>, the <code>fs.mount()</code> function accepts two further arguments. The <code>mode</code> parameter (by default <code>\"readwrite\"</code>) indicates the sort of activity available to the user. It can also be set to <code>\"read\"</code> for read-only access to the local filesystem. This is part of the web standards for directory selection. The <code>root</code> parameter (by default <code>\"\"</code>) is a hint to the browser for where to start picking the path that should be mounted in Python. Valid values are <code>\"desktop\"</code>, <code>\"documents\"</code>, <code>\"downloads\"</code>, <code>\"music\"</code>, <code>\"pictures\"</code>, or <code>\"videos\"</code> as per web standards.</p> <p>The <code>sync()</code> and <code>unmount()</code> functions only accept the mount <code>path</code> used in the browser's local filesystem.</p> <p>Info</p> <p>Mounting requires user activation. It must happen during or shortly after a user interaction like a button click. This security requirement prevents sites from accessing your filesystem without your knowledge. Always attach your <code>fs.mount()</code> call to a button click or similar user action.</p>"},{"location":"user-guide/filesystem/#example-note-taking-application","title":"Example: Note-taking application","text":"<p>Here's a simple note-taking application demonstrating local filesystem access:</p> <p>Warning</p> <p>If the \"Select Folder\" button appears unresponsive, it's because your browser does not support local filesystem access.</p> <p>Remember, this is a Chromium only feature at this moment in time.</p> <p>View the complete source code.</p> <p>This application lets you select a folder on your computer and save notes into it. The notes persist between page reloads because they're saved to your actual filesystem, not the browser's temporary virtual filesystem.</p> <p>Click \"Select Folder\" and the browser will prompt you to choose a directory. Once mounted, you can type your note and click \"Save Note\". The file will be written to your chosen folder and will still be there after you close the browser.</p>"},{"location":"user-guide/filesystem/#whats-next","title":"What's next","text":"<p>Now that you understand PyScript's filesystems, explore these related topics to deepen your knowledge.</p> <p>Workers - Display content from background threads (requires explicit <code>target</code> parameter).</p> <p>FFI - Understand how JavaScript modules integrate with Python through the foreign function interface.</p> <p>Media - Capture photos and video with the camera or  record audio with your microphone.</p> <p>Offline - Use PyScript while not connected to the internet.</p>"},{"location":"user-guide/from_javascript/","title":"PyScript in JavaScript","text":"<p>PyScript provides several APIs for JavaScript developers who want to integrate Python functionality into their applications without writing PyScript script tags. This guide covers three JavaScript APIs: shared storage for data persistence between JavaScript and Python, the \"Donkey\" for on-demand execution of Python as a worker based computation engine, and the PyScript bridge, for importing Python modules directly into JavaScript code.</p>"},{"location":"user-guide/from_javascript/#shared-storage","title":"Shared storage","text":"<p>The storage API provides a shared key-value store accessible from both JavaScript and Python. Data written from Python appears immediately in JavaScript, and vice versa. This makes it simple to coordinate state between languages without manual serialisation or message passing.</p>"},{"location":"user-guide/from_javascript/#accessing-storage-in-python","title":"Accessing storage in Python","text":"<p>Python code accesses storage through the <code>pyscript.storage</code> module:</p> Access storage from Python.<pre><code>from pyscript import storage\nmy_store = await storage(\"shared\")\n# Write data that JavaScript can read.\nmy_store[\"user_count\"] = 42\nmy_store[\"status\"] = \"active\"\n# Read data written by JavaScript.\nconfig = my_store.get(\"config\", {})\n</code></pre> <p>Storage operations are synchronous in Python. Values are automatically serialised to formats JavaScript can understand.</p>"},{"location":"user-guide/from_javascript/#accessing-storage-in-javascript","title":"Accessing storage in JavaScript","text":"<p>JavaScript code imports the storage module from PyScript core:</p> Access storage in JavaScript.<pre><code>import storage from 'https://pyscript.net/releases/2026.1.1/storage.js';\nconst my_store = await storage(name=\"shared\");\n// Read data written by Python.\nconst userCount = my_store[\"user_count\"];\nconst status = my_store[\"status\"];\n// Write data that Python can read.\nmy_store[\"config\"] = {\ntheme: 'dark',\nlanguage: 'en'\n};\n// Delete entries.\ndelete my_store[\"user_count\"];\n</code></pre> <p>The storage object behaves like a regular JavaScript object, with property access automatically synchronising with Python's view of the data.</p>"},{"location":"user-guide/from_javascript/#the-pyscript-donkey","title":"The PyScript Donkey","text":"<p>The Donkey API provides an asynchronous Python worker ready to evaluate code on demand. Think of it as a Python backend that shoulders the burden of computation whilst keeping your JavaScript code simple. By default any output from Python is piped to a terminal added to your page (although this can be changed).</p> <p>The name \"donkey\" reflects its purpose: something that waits patiently until needed and carries heavy loads without complaint. This API lets you use Python from pure JavaScript without writing PyScript tags.</p>"},{"location":"user-guide/from_javascript/#asking-for-a-donkey","title":"Asking for a Donkey","text":"<p>Import the <code>donkey</code> function and create a worker with it:</p> Call for the PyScript donkey.<pre><code>import { donkey } from 'https://pyscript.net/releases/2026.1.1/core.js';\nconst py_donkey = await donkey({\ntype: 'mpy',        // Use MicroPython ('py' for Pyodide).\npersistent: false,  // Reset state between executions.\nterminal: '',       // Optional terminal element selector.\nconfig: {}          // PyScript configuration object.\n});\n</code></pre> <p>The donkey creates a worker with a terminal interface. The donkey function returns a promise that resolves to an object with several methods for executing Python code.</p>"},{"location":"user-guide/from_javascript/#evaluate-python","title":"Evaluate Python","text":"<p>The donkey worker provides six methods:</p>"},{"location":"user-guide/from_javascript/#processcode","title":"<code>process(code)</code>","text":"<p>Execute code and display it in the terminal:</p> <pre><code>await py_donkey.process('print(\"Hello from Python!\")');\n</code></pre> <p>This is the primary method for running Python code. The code executes in the worker and output appears in the terminal. This behaves like typing code into a Python REPL.</p>"},{"location":"user-guide/from_javascript/#executestatement","title":"<code>execute(statement)</code>","text":"<p>Execute Python statements using Python's <code>exec()</code> function:</p> <pre><code>await py_donkey.execute('x = 42');\nawait py_donkey.execute('print(x)');\n</code></pre> <p>Unlike <code>process()</code>, the code doesn't appear in the terminal, only the output does.</p>"},{"location":"user-guide/from_javascript/#evaluateexpression","title":"<code>evaluate(expression)</code>","text":"<p>Evaluate a Python expression using Python's <code>eval()</code> function:</p> <pre><code>const result = await py_donkey.evaluate('2 + 2');\nconsole.log(result); // 4\n</code></pre> <p>Returns the result of the expression to JavaScript.</p>"},{"location":"user-guide/from_javascript/#clear","title":"<code>clear()</code>","text":"<p>Clear terminal output:</p> <pre><code>await py_donkey.clear();\n</code></pre> <p>This removes all content from the terminal display.</p>"},{"location":"user-guide/from_javascript/#reset","title":"<code>reset()</code>","text":"<p>Reset the terminal including colours and state:</p> <pre><code>await py_donkey.reset();\n</code></pre> <p>This completely resets the terminal to its initial state, including clearing any colour or formatting settings.</p>"},{"location":"user-guide/from_javascript/#kill","title":"<code>kill()</code>","text":"<p>Terminate the worker associated with the donkey:</p> <pre><code>await py_donkey.kill();\n</code></pre> <p>You cannot use the donkey reference after calling <code>kill()</code>. Ask for a new donkey if you need Python execution again.</p>"},{"location":"user-guide/from_javascript/#state-management","title":"State management","text":"<p>The <code>persistent</code> option controls whether state persists between executions:</p> State persistence.<pre><code>// Non-persistent: each execution starts fresh.\nconst worker1 = await donkey({ type: 'mpy', persistent: false });\nawait worker1.execute('x = 10');\nawait worker1.evaluate('x'); // Error: x is not defined\n// Persistent: variables remain available.\nconst worker2 = await donkey({ type: 'mpy', persistent: true });\nawait worker2.execute('x = 10');\nawait worker2.evaluate('x'); // 10\n</code></pre> <p>Non-persistent workers are simpler and prevent state leaking between operations. Persistent workers let you build up context across multiple executions.</p>"},{"location":"user-guide/from_javascript/#terminal-integration","title":"Terminal integration","text":"<p>The <code>terminal</code> option specifies where Python output appears:</p> Terminal output.<pre><code>const py_donkey = await donkey({\ntype: 'mpy',\nterminal: '#py_donkey-output'\n});\nawait py_donkey.process('print(\"Hello from Python!\")');\n// Output appears in the element with id=\"py_donkey-output\".\n</code></pre> <p>If no terminal is specified, PyScript creates a default terminal element. To hide the terminal, point it to a hidden element:</p> Hiding the terminal output.<pre><code>const py_donkey = await donkey({\ntype: 'mpy',\nterminal: '#hidden-terminal'\n});\n</code></pre> <p>Then style <code>#hidden-terminal</code> with <code>display: none</code> in your CSS.</p>"},{"location":"user-guide/from_javascript/#configuration","title":"Configuration","text":"<p>The <code>config</code> option accepts standard PyScript configuration:</p> Configure the donkey.<pre><code>const py_donkey = await donkey({\ntype: 'py',\nconfig: {\npackages: ['numpy', 'pandas'],\nfiles: {\n'data.csv': './data.csv'\n}\n},\npersistent: true\n});\nawait py_donkey.execute('import numpy as np');\nconst result = await py_donkey.evaluate('np.array([1, 2, 3]).sum()');\nconsole.log(result); // 6\n</code></pre> <p>This loads packages and files before the worker becomes available, ensuring all dependencies are ready.</p>"},{"location":"user-guide/from_javascript/#the-bridge-api","title":"The Bridge API","text":"<p>The Bridge API lets you import Python modules directly into JavaScript code. Python functions are proxied into JavaScript functions, to ensure Python and JavaScript integrate well together.</p> <p>This is perhaps the most seamless way to integrate specific Python functionality into JavaScript: define Python functions, import them in JavaScript, and call them as if they were JavaScript functions.</p>"},{"location":"user-guide/from_javascript/#basic-usage","title":"Basic usage","text":"<p>Create a Python file with functions you want to export:</p> A simple Python module to use in JavaScript.<pre><code># calculations.py\ndef add(a, b):\n\"\"\"\n    Add two numbers.\n    \"\"\"\nreturn a + b\ndef multiply(a, b):\n\"\"\"\n    Multiply two numbers.\n    \"\"\"\nreturn a * b\ndef factorial(n):\n\"\"\"\n    Calculate factorial.\n    \"\"\"\nif n &lt;= 1:\nreturn 1\nreturn n * factorial(n - 1)\n</code></pre> <p>Create a JavaScript bridge module adjacent to the Python file:</p> Use the bridge to create a JavaScript module.<pre><code>// calculations.js\nimport bridge from 'https://esm.run/@pyscript/bridge';\nexport const pystuff = bridge(import.meta.url, {\ntype: 'mpy',\nworker: false\n});\n</code></pre> <p>The bridge automatically finds <code>calculations.py</code> in the same directory as <code>calculations.js</code> and makes available its top level functions.</p> <p>Et voila! Import and use the Python functions in your JavaScript:</p> Use Python within JavaScript.<pre><code>// main.js\nimport { pystuff } from './calculations.js';\n// Wait for Python to load.\nconst { add, multiply, factorial } = await pystuff;\n// Call Python functions from JavaScript.\nconsole.log(await add(5, 3));        // 8\nconsole.log(await multiply(4, 7));   // 28\nconsole.log(await factorial(5));     // 120\n</code></pre> <p>Python functions become async JavaScript functions. Always use <code>await</code> when calling them.</p>"},{"location":"user-guide/from_javascript/#bridge-options","title":"Bridge options","text":"<p>The second argument to <code>bridge()</code> configures how Python loads:</p>"},{"location":"user-guide/from_javascript/#type","title":"<code>type</code>","text":"<p>The Python interpreter to use (<code>'py'</code> for Pyodide, <code>'mpy'</code> for MicroPython). Default is <code>'py'</code>.</p> <pre><code>export const pystuff = bridge(import.meta.url, { type: 'mpy' });\n</code></pre>"},{"location":"user-guide/from_javascript/#worker","title":"<code>worker</code>","text":"<p>Whether to run Python in a worker. Default is <code>true</code>.</p> <pre><code>export const pystuff = bridge(import.meta.url, { worker: false });\n</code></pre> <p>Running in a worker keeps the main thread responsive but adds serialisation overhead for arguments and return values. Running on the main thread is faster for simple functions but can block the UI.</p>"},{"location":"user-guide/from_javascript/#config","title":"<code>config</code>","text":"<p>Standard PyScript configuration for things like packages and files:</p> Configure PyScript environment for the bridged code.<pre><code>export const pystuff = bridge(import.meta.url, {\ntype: 'py',\nconfig: {\npackages: ['numpy'],\nfiles: {\n'data.json': './data.json'\n}\n}\n});\n</code></pre> <p>When <code>config</code> is specified, <code>worker</code> becomes implicitly <code>true</code> to avoid configuration conflicts on the main thread.</p>"},{"location":"user-guide/from_javascript/#env","title":"<code>env</code>","text":"<p>Share environments across multiple modules:</p> Shared environments.<pre><code>// Both modules share the same Python environment.\nexport const pystuff1 = bridge(import.meta.url, { env: 'shared' });\nexport const pystuff2 = bridge(import.meta.url, { env: 'shared' });\n</code></pre> <p>Shared environments let different bridge modules access the same Python state and imports.</p>"},{"location":"user-guide/from_javascript/#pyscript","title":"<code>pyscript</code>","text":"<p>The PyScript version to load if not already on the page:</p> Specify the PyScript version.<pre><code>export const pystuff = bridge(import.meta.url, {\npyscript: '2025.11.2'\n});\n</code></pre> <p>If omitted, the latest version loads automatically. Specify a version for production stability.</p>"},{"location":"user-guide/from_javascript/#working-with-python-modules","title":"Working with Python modules","text":"<p>The bridge imports all top-level functions from the Python file. You can also import from Python packages:</p> A more complex module.<pre><code># utils.py\nimport json\ndef parse_json(text):\n\"\"\"\n    Parse JSON string.\n    \"\"\"\nreturn json.loads(text)\ndef stringify_json(obj):\n\"\"\"\n    Convert object to JSON string.\n    \"\"\"\nreturn json.dumps(obj)\n</code></pre> Use the complex module in JavaScript.<pre><code>import { pystuff } from './utils.js';\nconst { parse_json, stringify_json } = await pystuff;\nconst data = await parse_json('{\"name\": \"Alice\", \"age\": 30}');\nconsole.log(data.name); // \"Alice\"\nconst text = await stringify_json({ status: 'ok', code: 200 });\nconsole.log(text); // '{\"status\": \"ok\", \"code\": 200}'\n</code></pre>"},{"location":"user-guide/from_javascript/#error-handling","title":"Error handling","text":"<p>Python exceptions propagate to JavaScript as rejected promises:</p> A contrived example that raises an exception.<pre><code># errors.py\ndef divide(a, b):\n\"\"\"\n    Divide two numbers.\n    \"\"\"\nif b == 0:\nraise ValueError(\"Cannot divide by zero\")\nreturn a / b\n</code></pre> Handle Python exceptions in JavaScript.<pre><code>import { pystuff } from './errors.js';\nconst { divide } = await pystuff;\ntry {\nconst result = await divide(10, 0);\n} catch (error) {\nconsole.error(error.message); // \"Cannot divide by zero\"\n}\n</code></pre> <p>Use try-catch blocks to handle Python errors in JavaScript.</p>"},{"location":"user-guide/from_javascript/#whats-next","title":"What's next","text":"<p>These JavaScript APIs complement the main PyScript functionality covered in the user guide:</p> <p>The FFI guide explains how Python code calls JavaScript, which is the reverse of what these APIs provide.</p> <p>The Workers guide covers how workers affect performance and responsiveness, relevant for understanding the <code>worker</code> option in Donkey and Bridge APIs.</p> <p>The Configuration guide explains package loading and file management, which applies to the <code>config</code> option in these APIs.</p>"},{"location":"user-guide/media/","title":"Media","text":"<p>Modern web applications often need to interact with cameras, microphones, and other media devices. PyScript provides a Pythonic interface to these devices through the  <code>pyscript.media</code> module, letting your Python code capture video, record audio, and enumerate available hardware directly from the browser.</p> <p>This guide explains how to work with media devices in PyScript, covering device discovery, stream capture, and practical usage patterns.</p>"},{"location":"user-guide/media/#understanding-media-access","title":"Understanding media access","text":"<p>Media device access in the browser follows strict security and privacy rules. Your code runs in a sandbox with these constraints:</p> <p>User permission is required. The browser will show a permission dialog when you first attempt to access cameras or microphones. Users can grant or deny access, and they can revoke permissions at any time.</p> <p>Secure contexts only. Media access works only over HTTPS or on localhost. This security requirement prevents malicious sites from accessing media devices without proper encryption.</p> <p>Privacy protections apply. Device labels may appear as empty strings until permission is granted. This prevents sites from fingerprinting users based on their connected hardware before receiving explicit consent.</p> <p>These requirements protect users whilst enabling legitimate applications to work with media devices safely.</p>"},{"location":"user-guide/media/#listing-available-devices","title":"Listing available devices","text":"<p>The <code>list_devices()</code> function discovers what media devices are available on the user's system:</p> Finding available media devices.<pre><code>from pyscript.media import list_devices\n# Get all available media devices.\ndevices = await list_devices()\nfor device in devices:\nprint(f\"{device.kind}: {device.label}\")\n</code></pre> <p>Each device has three key properties. The <code>kind</code> property indicates device type: <code>\"videoinput\"</code> for cameras, <code>\"audioinput\"</code> for microphones, or <code>\"audiooutput\"</code> for speakers. The <code>label</code> property provides a human-readable name like \"Built-in Camera\" or \"External USB Microphone\". The <code>id</code> property gives a unique identifier for the device.</p> <p>You can filter devices by type to find specific hardware:</p> Filter by type.<pre><code># Find all cameras.\ncameras = [d for d in devices if d.kind == \"videoinput\"]\n# Find all microphones.\nmicrophones = [d for d in devices if d.kind == \"audioinput\"]\n# Find a specific device by label.\nusb_camera = None\nfor device in devices:\nif device.kind == \"videoinput\" and \"USB\" in device.label:\nusb_camera = device\nbreak\n</code></pre> <p>Device labels may be empty strings until the user grants permission to access media devices. Once permission is granted, labels become available, helping users understand which hardware is being used.</p>"},{"location":"user-guide/media/#capturing-media-streams","title":"Capturing media streams","text":"<p>The <code>Device.request_stream()</code> class method requests access to media devices and returns a stream you can use with HTML video or audio elements:</p> Grabbing a media stream.<pre><code>from pyscript.media import Device\nfrom pyscript.web import page\n# Request video from the default camera.\nstream = await Device.request_stream(video=True)\n# Display it in a video element.\nvideo = page[\"#my-video\"]\nvideo.srcObject = stream\n</code></pre> <p>This triggers a permission dialog the first time it runs. If the user grants permission, you receive a <code>MediaStream</code> object containing the video feed. If they deny permission, an exception is raised.</p> <p>You can request audio, video, or both:</p> Specify different types of stream.<pre><code># Video only (default).\nvideo_stream = await Device.request_stream(video=True)\n# Audio only.\naudio_stream = await Device.request_stream(audio=True, video=False)\n# Both audio and video.\nav_stream = await Device.request_stream(audio=True, video=True)\n</code></pre> <p>For finer control, specify constraints as dictionaries:</p> Very fine-grained control of options.<pre><code># Request specific video resolution.\nstream = await Device.request_stream(\nvideo={\"width\": 1920, \"height\": 1080}\n)\n# Request high-quality audio with echo cancellation.\nstream = await Device.request_stream(\naudio={\n\"sampleRate\": 48000,\n\"echoCancellation\": True,\n\"noiseSuppression\": True\n}\n)\n</code></pre> <p>These constraints follow the MediaTrackConstraints web standard. The browser does its best to satisfy your constraints but may fall back to available settings if exact matches aren't possible.</p>"},{"location":"user-guide/media/#using-specific-devices","title":"Using specific devices","text":"<p>Sometimes you need to capture from a particular camera or microphone rather than the default device. List devices first, then request a stream from the one you want:</p> Use a specific device.<pre><code>from pyscript.media import list_devices\n# Find all cameras.\ndevices = await list_devices()\ncameras = [d for d in devices if d.kind == \"videoinput\"]\n# Use the second camera if available.\nif len(cameras) &gt; 1:\nstream = await cameras[1].get_stream()\nvideo = page[\"#my-video\"]\nvideo.srcObject = stream\n</code></pre> <p>The <code>get_stream()</code> method on a device instance requests a stream from that specific device, handling the device ID constraints automatically.</p>"},{"location":"user-guide/media/#example-photobooth-application","title":"Example: Photobooth application","text":"<p>Here's a complete application demonstrating webcam access and still frame capture:</p> <p>View the complete source code.</p> <p>This application requests camera access, displays live video, and captures still frames using a canvas element. Click \"Start Camera\" to begin, then \"Capture Photo\" to grab the current frame.</p> <p>The technique uses canvas to extract frames from the video stream. The <code>drawImage()</code> method copies the current video frame onto a canvas, creating a still image you can save or process further.</p>"},{"location":"user-guide/media/#handling-permissions","title":"Handling permissions","text":"<p>Media access requires user permission, and users can deny access or revoke it later. Always handle these cases gracefully:</p> Always handle permissions.<pre><code>from pyscript.media import Device\ntry:\nstream = await Device.request_stream(video=True)\n# Use the stream.\nvideo = page[\"#camera\"]\nvideo.srcObject = stream\nexcept Exception as e:\n# Permission denied or device not available.\nprint(f\"Could not access camera: {e}\")\n# Show a message to the user explaining what happened.\n</code></pre> <p>Consider providing fallback content or alternative functionality when media access isn't available. This improves the experience for users who deny permission or lack the necessary hardware.</p>"},{"location":"user-guide/media/#stream-management","title":"Stream management","text":"<p>Media streams use system resources. Stop streams when you're finished to free up cameras and microphones:</p> Clean up media streams.<pre><code># Get stream.\nstream = await Device.request_stream(video=True)\n# Use it...\nvideo = page[\"#camera\"]\nvideo.srcObject = stream\n# Later, stop all tracks.\nfor track in stream.getTracks():\ntrack.stop()\n</code></pre> <p>Stopping tracks releases the hardware, allowing other applications to use the devices and conserving battery life on mobile devices.</p>"},{"location":"user-guide/media/#whats-next","title":"What's next","text":"<p>Now that you understand media device access, explore these related topics:</p> <p>Workers - Display content from background threads (requires explicit <code>target</code> parameter).</p> <p>Filesystem - Learn more about the virtual filesystem and how the <code>files</code> option works.</p> <p>FFI - Understand how JavaScript modules integrate with Python through the foreign function interface.</p> <p>Offline - Use PyScript while not connected to the internet.</p>"},{"location":"user-guide/offline/","title":"Running Offline","text":"<p>PyScript applications typically load from a Content Delivery Network or webserver, fetching core files and Python interpreters over the internet. This works well when you have reliable network access, but sometimes you need applications to run offline ~ in air-gapped environments, on local networks, or where internet connectivity isn't available or is patchy.</p> <p>Running PyScript offline means bundling everything your application needs locally. This guide explains how to package PyScript core and Python interpreters so your applications work without network access.</p>"},{"location":"user-guide/offline/#what-you-need","title":"What you need","text":"<p>An offline PyScript application requires two components available locally:</p> <p>The first is PyScript core itself - the <code>core.js</code> file and associated resources that provide the runtime. This is what loads interpreters, manages execution, and bridges Python to the browser.</p> <p>The second is the Python interpreter your application uses - either Pyodide or MicroPython. These are substantial files containing the entire Python runtime compiled to WebAssembly.</p> <p>If your application imports Python packages, those need to be bundled locally as well. For Pyodide applications using numpy, pandas, or other libraries, the package files must also be available offline.</p>"},{"location":"user-guide/offline/#shortcut","title":"Shortcut","text":"<p>Helpfully, since the end of 2025, all releases of PyScript have an associated <code>offline</code> zip file containing everything you need. Just download it, unpack it and start to modify the content of the <code>index.html</code> found therein to your needs.</p> <p>Read on, if you want to modify or learn how such assets are created.</p>"},{"location":"user-guide/offline/#getting-pyscript-core","title":"Getting PyScript core","text":"<p>You have two ways to obtain PyScript core files.</p>"},{"location":"user-guide/offline/#using-npm-recommended","title":"Using npm (recommended)","text":"<p>The simplest approach uses npm to download the distribution:</p> npm based downloading.<pre><code># Create your project directory.\nmkdir pyscript-offline\ncd pyscript-offline\n\n# Create a package.json file.\necho '{}' &gt; package.json\n\n# Install PyScript core.\nnpm i @pyscript/core\n\n# Copy distribution files to your public directory.\nmkdir -p public\ncp -R node_modules/@pyscript/core/dist public/pyscript\n</code></pre> <p>This gives you a <code>public/pyscript</code> directory containing everything needed to run PyScript locally.</p>"},{"location":"user-guide/offline/#building-from-source","title":"Building from source","text":"<p>For development builds or customisation, clone and build the repository:</p> Cloning the repository.<pre><code># Clone the repository.\ngit clone https://github.com/pyscript/pyscript.git\ncd pyscript\n\n# Follow build instructions from the developer guide.\n# Once built, copy the dist folder.\ncp -R dist ../pyscript-offline/public/pyscript\n</code></pre> <p>See the developer guide for detailed build instructions.</p>"},{"location":"user-guide/offline/#setting-up-your-application","title":"Setting up your application","text":"<p>Create an HTML file that loads PyScript from local paths rather than the CDN:</p> Ensure local paths to PyScript.<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n&lt;meta charset=\"UTF-8\"&gt;\n&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n&lt;title&gt;PyScript Offline&lt;/title&gt;\n&lt;script type=\"module\" src=\"/pyscript/core.js\"&gt;&lt;/script&gt;\n&lt;link rel=\"stylesheet\" href=\"/pyscript/core.css\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;script type=\"mpy\"&gt;\nfrom pyscript import document\ndocument.body.append(\"Hello from PyScript\")\n&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>Save this as <code>public/index.html</code> and serve it locally:</p> <pre><code>python3 -m http.server -d public/\n</code></pre> <p>Open <code>http://localhost:8000</code> in your browser. PyScript loads from local files with no network requests.</p>"},{"location":"user-guide/offline/#getting-micropython","title":"Getting MicroPython","text":"<p>MicroPython is available through npm:</p> Getting MicroPython.<pre><code># Install the MicroPython package.\nnpm i @micropython/micropython-webassembly-pyscript\n\n# Create target directory.\nmkdir -p public/micropython\n\n# Copy interpreter files.\ncp node_modules/@micropython/micropython-webassembly-pyscript/micropython.* public/micropython/\n</code></pre> <p>This copies <code>micropython.mjs</code> and <code>micropython.wasm</code> to your public directory. Configure your HTML to use these local files:</p> Ensure local MicroPython in your configuration.<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n&lt;meta charset=\"UTF-8\"&gt;\n&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n&lt;title&gt;PyScript Offline&lt;/title&gt;\n&lt;script type=\"module\" src=\"/pyscript/core.js\"&gt;&lt;/script&gt;\n&lt;link rel=\"stylesheet\" href=\"/pyscript/core.css\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;!-- This should be in a config file, using mpy-config for brevity. --&gt;\n&lt;mpy-config&gt;\n    interpreter = \"/micropython/micropython.mjs\"\n  &lt;/mpy-config&gt;\n&lt;script type=\"mpy\"&gt;\nfrom pyscript import document\ndocument.body.append(\"Hello from MicroPython offline\")\n&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>The <code>interpreter</code> configuration tells PyScript where to find the local MicroPython files.</p>"},{"location":"user-guide/offline/#getting-pyodide","title":"Getting Pyodide","text":"<p>Pyodide is also available through npm:</p> Getting Pyodide.<pre><code># Install Pyodide.\nnpm i pyodide\n\n# Create target directory.\nmkdir -p public/pyodide\n\n# Copy all necessary files.\ncp node_modules/pyodide/pyodide* public/pyodide/\ncp node_modules/pyodide/python_stdlib.zip public/pyodide/\n</code></pre> <p>Info</p> <p>Make sure to copy all files matching <code>pyodide*</code>, including <code>pyodide-lock.json</code>. This lock file is essential for Pyodide to function correctly.</p> <p>Configure your HTML to use local Pyodide:</p> Ensure local Pyodide in your configuration.<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n&lt;meta charset=\"UTF-8\"&gt;\n&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n&lt;title&gt;PyScript Offline&lt;/title&gt;\n&lt;script type=\"module\" src=\"/pyscript/core.js\"&gt;&lt;/script&gt;\n&lt;link rel=\"stylesheet\" href=\"/pyscript/core.css\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;!-- This should be in a config file, using mpy-config for brevity. --&gt;\n&lt;py-config&gt;\n    interpreter = \"/pyodide/pyodide.mjs\"\n  &lt;/py-config&gt;\n&lt;script type=\"py\"&gt;\nfrom pyscript import document\ndocument.body.append(\"Hello from Pyodide offline\")\n&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"user-guide/offline/#bundling-pyodide-packages","title":"Bundling Pyodide packages","text":"<p>If your application uses Python packages like numpy or pandas, you need the Pyodide package bundle. Download it from the Pyodide releases page.</p> <p>Warning</p> <p>The complete package bundle exceeds 300MB. It contains all packages available in Pyodide. Pyodide loads packages on demand, so you only download what your code actually imports, but the entire bundle must be available locally.</p> <p>Download and extract the bundle for your Pyodide version (e.g., <code>pyodide-0.29.1.tar.bz2</code>):</p> Download the complete Pyodide package bundle.<pre><code># Download the bundle.\nwget https://github.com/pyodide/pyodide/releases/download/0.29.1/pyodide-0.29.1.tar.bz2\n\n# Extract it.\ntar -xjf pyodide-0.29.1.tar.bz2\n\n# Copy package files to your public directory.\ncp -R pyodide-0.29.1/pyodide/* public/pyodide/\n</code></pre> <p>Now use packages in your application:</p> Local use of packages.<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n&lt;meta charset=\"UTF-8\"&gt;\n&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n&lt;title&gt;PyScript Offline&lt;/title&gt;\n&lt;script type=\"module\" src=\"/pyscript/core.js\"&gt;&lt;/script&gt;\n&lt;link rel=\"stylesheet\" href=\"/pyscript/core.css\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;py-config&gt;\n    interpreter = \"/pyodide/pyodide.mjs\"\n    packages = [\"pandas\"]\n  &lt;/py-config&gt;\n&lt;script type=\"py\"&gt;\nimport pandas as pd\nx = pd.Series([1, 2, 3, 4, 5, 6, 7, 8, 9, 10])\nresult = [i**2 for i in x]\nfrom pyscript import document\ndocument.body.append(str(result))\n&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>The page will display <code>[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]</code> even with no internet connection. Pyodide loads pandas and all dependencies from your local package bundle.</p>"},{"location":"user-guide/offline/#testing-offline-operation","title":"Testing offline operation","text":"<p>To verify everything works offline, disconnect from the internet and reload your application. If it loads and runs correctly, you've successfully configured offline operation.</p> <p>You can also test using browser developer tools. Open the Network tab, enable \"Offline\" mode, and reload. All resources should load from cache or local files with no network errors.</p>"},{"location":"user-guide/offline/#serving-with-workers","title":"Serving with workers","text":"<p>If your application uses workers, you need a server that sets Cross-Origin Isolation (COI) headers. These headers enable <code>SharedArrayBuffer</code> and other features required for worker support. Use <code>mini-coi</code> instead of Python's simple server:</p> Basic mini-coi usage.<pre><code># Install mini-coi if needed.\nnpm i -g mini-coi\n\n# Serve with COI headers enabled.\nnpx mini-coi public/\n</code></pre> <p>The <code>mini-coi</code> tool automatically sets the necessary headers to enable worker functionality.</p>"},{"location":"user-guide/offline/#whats-next","title":"What's next","text":"<p>Now that you understand offline deployment, explore these related topics:</p> <p>Architecture guide - provides technical details about how PyScript implements workers using PolyScript and Coincident if you're interested in the underlying mechanisms.</p> <p>Workers - Display content from background threads (requires explicit <code>target</code> parameter).</p> <p>Filesystem - Learn more about the virtual filesystem and how the <code>files</code> option works.</p> <p>FFI - Understand how JavaScript modules integrate with Python through the foreign function interface.</p> <p>Media - Capture photos and video with the camera or  record audio with your microphone.</p>"},{"location":"user-guide/plugins/","title":"Plugins","text":"<p>PyScript's plugin API lets you extend the platform and modify its behaviour. Plugins intercept lifecycle events, inject code, and customise how PyScript operates. Anyone can create plugins and share them with the community.</p> <p>This guide explains the plugin system, lifecycle hooks, and how to write plugins that integrate with PyScript.</p>"},{"location":"user-guide/plugins/#understanding-plugins","title":"Understanding plugins","text":"<p>Plugins are written in JavaScript and included on the page before PyScript loads. They register hooks - callbacks that PyScript invokes at specific points in the application lifecycle. These hooks let you instrument interpreters, inject Python code, modify execution context, and react to events.</p> <p>Include plugin code via a <code>&lt;script type=\"module\"&gt;</code> tag before the PyScript script tag. This ensures the plugin registers its hooks before PyScript initialises.</p>"},{"location":"user-guide/plugins/#application-lifecycle","title":"Application lifecycle","text":"<p>PyScript follows a predictable sequence of events, whether code runs on the main thread or in workers. Understanding this lifecycle helps you choose the right hooks for your plugin.</p> <p>The sequence begins when the browser recognises a PyScript script tag. The interpreter initialises and becomes ready. At this point, the ready event fires. Plugins can instrument the interpreter before anything else happens.</p> <p>Before code evaluation, the before run event fires. Plugins can set up browser context on either the main thread or workers. This is similar to setup callbacks in test frameworks.</p> <p>If plugins need Python code evaluated first, they provide code before run - a string of Python that executes immediately before the main code. This sets up Python context for the script.</p> <p>Then the actual script code evaluates - the Python you wrote in your script tags or source files.</p> <p>After code finishes, code after run executes if plugins provided it. This Python code cleans up or reacts to the final state.</p> <p>Finally, the after run event fires. Plugins can clean up browser context or react to results. This is similar to teardown callbacks in test frameworks.</p> <p>This sequence happens consistently for both synchronous and asynchronous code execution. The naming conventions desscribed below distinguish sync versus async hooks, but the sequence remains the same.</p>"},{"location":"user-guide/plugins/#main-thread-hooks","title":"Main thread hooks","text":"<p>Hooks on the main thread receive a wrapper around the interpreter and a reference to the HTML element containing the script. The wrapper provides interpreter-specific utilities and capabilities.</p> <p>Refer to Pyodide or MicroPython documentation to understand what capabilities the wrapper exposes for each interpreter.</p> <p>Hooks that inject Python code don't receive these arguments - they simply return Python code as strings.</p>"},{"location":"user-guide/plugins/#available-main-hooks","title":"Available main hooks","text":"<p><code>onReady(wrap, element)</code> - Called when the interpreter is ready but before any code evaluates. Instrument the interpreter or prepare the execution environment.</p> <p><code>onBeforeRun(wrap, element)</code> - Called just before code evaluation. Set up browser context or prepare for execution.</p> <p><code>onBeforeRunAsync(wrap, element)</code> - Async version of <code>onBeforeRun</code> for scripts requiring async behaviour.</p> <p><code>codeBeforeRun()</code> - Returns Python code as a string to evaluate before the main script.</p> <p><code>codeBeforeRunAsync()</code> - Async version of <code>codeBeforeRun</code>.</p> <p><code>codeAfterRun()</code> - Returns Python code as a string to evaluate after the main script.</p> <p><code>codeAfterRunAsync()</code> - Async version of <code>codeAfterRun</code>.</p> <p><code>onAfterRun(wrap, element)</code> - Called after code finishes executing. Clean up or react to results.</p> <p><code>onAfterRunAsync(wrap, element)</code> - Async version of <code>onAfterRun</code>.</p> <p><code>onWorker(wrap, xworker)</code> - Called on the main thread when a script with the <code>worker</code> attribute is processed. This is the only hook that doesn't have a worker counterpart. It lets you expose features to the worker before code evaluates there. The <code>wrap</code> is usually <code>null</code> unless you've manually initialised an XWorker (advanced use case).</p> <p>All hooks are optional. Register only the hooks your plugin needs.</p>"},{"location":"user-guide/plugins/#worker-hooks","title":"Worker hooks","text":"<p>Worker hooks follow the same lifecycle as main thread hooks but with important constraints. Worker callbacks must be completely self-contained and serialisable - they cannot reference anything in outer scope.</p> <p>This is because callbacks are stringified and sent to the worker via <code>postMessage</code>. Only the function body gets serialised, so outer scope references fail.</p> <p>This works because everything is self-contained:</p> Everything is in the scope of the inner function.<pre><code>import { hooks } from \"https://pyscript.net/releases/2026.1.1/core.js\";\nhooks.worker.onReady.add(() =&gt; {\n// Define global variable if it doesn't exist.\nif (!('i' in globalThis))\nglobalThis.i = 0;\nconsole.log(++i);\n});\n</code></pre> <p>This fails because of the outer scope reference:</p> Failure because the inner function won't have access to 'i'.<pre><code>import { hooks } from \"https://pyscript.net/releases/2026.1.1/core.js\";\n// This won't work in workers!\nlet i = 0;\nhooks.worker.onReady.add(() =&gt; {\n// The outer 'i' doesn't exist in the worker.\nconsole.log(++i);\n});\n</code></pre> <p>Worker hooks receive the same lifecycle events as main hooks, except there's no <code>onWorker</code> hook.</p> <p>The second argument to callback hooks is always an <code>xworker</code> object instead of an element reference, since workers can be created programmatically without corresponding HTML elements.</p>"},{"location":"user-guide/plugins/#example-plugin","title":"Example plugin","text":"<p>Here's a complete plugin that logs lifecycle events to the console:</p> A contrived example plugin.<pre><code>// Import hooks from PyScript.\nimport { hooks } from \"https://pyscript.net/releases/2026.1.1/core.js\";\n// Register main thread hooks.\nhooks.main.onReady.add((wrap, element) =&gt; {\nconsole.log(\"main: interpreter ready\");\nif (location.search === '?debug') {\nconsole.debug(\"wrap:\", wrap);\nconsole.debug(\"element:\", element);\n}\n});\nhooks.main.onBeforeRun.add(() =&gt; {\nconsole.log(\"main: about to run code\");\n});\nhooks.main.codeBeforeRun.add('print(\"main: injected before\")');\nhooks.main.codeAfterRun.add('print(\"main: injected after\")');\nhooks.main.onAfterRun.add(() =&gt; {\nconsole.log(\"main: finished running code\");\n});\n// Register worker hooks.\nhooks.worker.onReady.add((wrap, xworker) =&gt; {\nconsole.log(\"worker: interpreter ready\");\nif (location.search === '?debug') {\nconsole.debug(\"wrap:\", wrap);\nconsole.debug(\"xworker:\", xworker);\n}\n});\nhooks.worker.onBeforeRun.add(() =&gt; {\nconsole.log(\"worker: about to run code\");\n});\nhooks.worker.codeBeforeRun.add('print(\"worker: injected before\")');\nhooks.worker.codeAfterRun.add('print(\"worker: injected after\")');\nhooks.worker.onAfterRun.add(() =&gt; {\nconsole.log(\"worker: finished running code\");\n});\n</code></pre> <p>Include this plugin before PyScript:</p> Use the example plugin.<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n&lt;meta charset=\"UTF-8\"&gt;\n&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n&lt;!-- Plugin loads first. --&gt;\n&lt;script type=\"module\" src=\"./log.js\"&gt;&lt;/script&gt;\n&lt;!-- PyScript loads after. --&gt;\n&lt;link rel=\"stylesheet\" \nhref=\"https://pyscript.net/releases/2026.1.1/core.css\"&gt;\n&lt;script type=\"module\" \nsrc=\"https://pyscript.net/releases/2026.1.1/core.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;script type=\"mpy\"&gt;\nprint(\"ACTUAL CODE\")\n&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>The output shows the lifecycle sequence: ready hooks fire first, then before run hooks, then injected code before, then the actual script, then injected code after, and finally after run hooks.</p>"},{"location":"user-guide/plugins/#plugin-use-cases","title":"Plugin use cases","text":"<p>Plugins enable many customisations. You might create plugins to log execution for debugging, inject analytics or telemetry code, modify interpreter behaviour, provide library bootstrapping, implement custom security checks, or add domain-specific features.</p> <p>The terminal and editor features in PyScript are themselves implemented as plugins, demonstrating the power and flexibility of the plugin system.</p>"},{"location":"user-guide/plugins/#whats-next","title":"What's next","text":"<p>Now that you understand plugins, explore these related topics:</p> <p>Terminal - Use the alternative REPL-style interface for interactive Python sessions.</p> <p>Editor - Create interactive Python coding environments in web pages with the built-in code editor.</p> <p>PyGame - Use PyGame-CE with PyScript, covering the differences from traditional PyGame development and techniques for making games work well in the browser.</p> <p>PyScript in JavaScript - drive PyScript from the world JavaScript. </p>"},{"location":"user-guide/pygame-ce/","title":"PyGame Support","text":"<p>PyScript includes experimental support for PyGame Community Edition, a Python library for building games. PyGame-CE runs in the browser through PyScript, letting you share games via URL without requiring players to install Python or any dependencies.</p> <p>This guide explains how to use PyGame-CE with PyScript, covering the differences from traditional PyGame development and techniques for making games work well in the browser.</p> <p>Warning</p> <p>PyGame-CE support is experimental. Behaviour may change based on community feedback and bug reports. Please share your experiences via Discord or GitHub to help improve this feature.</p>"},{"location":"user-guide/pygame-ce/#quick-start","title":"Quick start","text":"<p>Create a PyGame-CE application by using the <code>py-game</code> script type:</p> <pre><code>&lt;script type=\"py-game\" src=\"my_game.py\"&gt;&lt;/script&gt;\n</code></pre> <p>PyGame-CE loads automatically - no pip installation needed. Your game runs in the browser and can be shared via URL like any other web page.</p> <p>Refer to PyGame-CE's documentation for game development techniques. Most features work in the browser, though some may behave differently due to the browser environment.</p>"},{"location":"user-guide/pygame-ce/#browser-considerations","title":"Browser considerations","text":"<p>PyGame-CE in the browser differs from local development in several key ways. Understanding these differences helps you write games that work well in both environments.</p> <p>The browser needs regular opportunities to update the canvas displaying your game. Replace <code>clock.tick(fps)</code> with <code>await asyncio.sleep(1/fps)</code> to give the browser time to render. Better timing techniques exist and are covered later in this guide.</p> <p>Media files like images and sounds must be explicitly loaded using PyScript's configuration system. Use the <code>files</code> section in your configuration to make assets available.</p> <p>Python and PyGame-CE versions in the browser may lag behind the latest releases. Check the browser console when PyGame-CE starts to see which versions are available. Functions marked \"since 2.5\" in the documentation won't work if version 2.4.1 is bundled.</p>"},{"location":"user-guide/pygame-ce/#complete-example","title":"Complete example","text":"<p>Here's a complete bouncing ball game demonstrating PyGame-CE in the browser:</p> <p>View the complete source code.</p> <p>This example shows the essential pattern for PyGame-CE in PyScript. The game uses <code>await asyncio.sleep(1/60)</code> to yield control to the browser for canvas updates.</p> <p>The Python code:</p> The bouncing ball example from PyGame-CE.<pre><code>import asyncio\nimport sys\nimport pygame\npygame.init()\nsize = width, height = 320, 240\nspeed = [2, 2]\nblack = 0, 0, 0\nscreen = pygame.display.set_mode(size)\nball = pygame.image.load(\"intro_ball.gif\")\nballrect = ball.get_rect()\nwhile True:\nfor event in pygame.event.get():\nif event.type == pygame.QUIT:\nsys.exit()\nballrect = ballrect.move(speed)\nif ballrect.left &lt; 0 or ballrect.right &gt; width:\nspeed[0] = -speed[0]\nif ballrect.top &lt; 0 or ballrect.bottom &gt; height:\nspeed[1] = -speed[1]\nscreen.fill(black)\nscreen.blit(ball, ballrect)\npygame.display.flip()\nawait asyncio.sleep(1/60)\n</code></pre> <p>The only addition to standard PyGame code is <code>await asyncio.sleep(1/60)</code>, which gives the browser time to render. The <code>await</code> at the top level works in PyScript's async context but won't run locally without modification (covered below).</p> <p>The HTML file needs a canvas element and the script tag:</p> Provide a &lt;canvas&gt; element for the game to render.<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n&lt;title&gt;PyScript PyGame-CE Example&lt;/title&gt;\n&lt;meta charset=\"UTF-8\"&gt;\n&lt;meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\"&gt;\n&lt;link rel=\"stylesheet\" \nhref=\"https://pyscript.net/releases/2026.1.1/core.css\"&gt;\n&lt;script type=\"module\" \nsrc=\"https://pyscript.net/releases/2026.1.1/core.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;canvas id=\"canvas\" style=\"image-rendering: pixelated\"&gt;&lt;/canvas&gt;\n&lt;script type=\"py-game\" src=\"quickstart.py\" \nconfig=\"pyscript.toml\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>Info</p> <p>The <code>style=\"image-rendering: pixelated\"</code> preserves the pixelated look on high-DPI screens. Remove it for smoothed rendering.</p> <p>The configuration file lists game assets:</p> <pre><code>[files]\n\"intro_ball.gif\" = \"\"\n</code></pre> <p>Download <code>intro_ball.gif</code> from the example on this website.</p>"},{"location":"user-guide/pygame-ce/#running-locally-and-in-browser","title":"Running locally and in browser","text":"<p>The top-level <code>await</code> in the example isn't valid in standard Python (it should be inside an async function). PyScript provides an async context automatically, but local Python doesn't.</p> <p>Wrap your game in an async function and use a try-except block to detect the environment:</p> Browser/non-browser compatibility.<pre><code>import asyncio\nimport sys\nimport pygame\nasync def run_game():\n\"\"\"\n    Main game function.\n    \"\"\"\npygame.init()\n# Initialise game state...\nsize = width, height = 320, 240\nscreen = pygame.display.set_mode(size)\nwhile True:\nfor event in pygame.event.get():\nif event.type == pygame.QUIT:\nsys.exit()\n# Game logic...\nawait asyncio.sleep(1/60)\ntry:\n# Check if we're in an async context (PyScript).\nasyncio.get_running_loop()\nasyncio.create_task(run_game())\nexcept RuntimeError:\n# No async context (local Python).\nasyncio.run(run_game())\n</code></pre> <p>This pattern works in both environments. PyScript uses <code>create_task()</code>, local Python uses <code>asyncio.run()</code>. Now you can develop locally and publish to the web without changing code.</p> <p>Info</p> <p>The <code>pygame.QUIT</code> event never fires in the browser version, but handling it is mandatory for local execution where closing the window generates this event.</p>"},{"location":"user-guide/pygame-ce/#precise-frame-timing","title":"Precise frame timing","text":"<p>The <code>await asyncio.sleep(1/60)</code> approach approximates 60 FPS but isn't precise. Frame rendering takes time, so sleeping 1/60th of a second results in actual FPS below 60.</p> <p>Better timing synchronises with the display refresh rate using <code>requestAnimationFrame</code> in the browser and <code>vsync=1</code> locally. This requires separating setup from the game loop:</p> Precise timing.<pre><code>import sys\nimport pygame\npygame.init()\nsize = width, height = 320, 240\nspeed = pygame.Vector2(150, 150)\nblack = 0, 0, 0\nscreen = pygame.display.set_mode(size, vsync=1)\nball = pygame.image.load(\"intro_ball.gif\")\nballrect = ball.get_rect()\nclock = pygame.time.Clock()\ndef run_one_frame():\n\"\"\"\n    Execute one frame of the game.\n    \"\"\"\nfor event in pygame.event.get():\nif event.type == pygame.QUIT:\nsys.exit()\n# Delta time for frame-rate independence.\ndt = clock.tick(300) / 1000\nballrect.move_ip(speed * dt)\n# Bounce logic...\nif ballrect.left &lt; 0 or ballrect.right &gt; width:\nspeed.x = -speed.x\nif ballrect.top &lt; 0 or ballrect.bottom &gt; height:\nspeed.y = -speed.y\nscreen.fill(black)\nscreen.blit(ball, ballrect)\npygame.display.flip()\n# Browser: use requestAnimationFrame.\ntry:\nfrom pyscript import window, ffi\ndef on_animation_frame(timestamp):\n\"\"\"\n        Called by browser for each frame.\n        \"\"\"\nrun_one_frame()\nwindow.requestAnimationFrame(raf_proxy)\nraf_proxy = ffi.create_proxy(on_animation_frame)\non_animation_frame(0)\nexcept ImportError:\n# Local: use while loop with vsync.\nwhile True:\nrun_one_frame()\n</code></pre> <p>This synchronises with display refresh (usually 60Hz, but can be higher). Delta time (<code>dt</code>) accounts for frame rate variations between machines. Speed is now in pixels per second, multiplied by <code>dt</code> to get movement per frame.</p> <p>The <code>vsync=1</code> parameter makes <code>flip()</code> block until the display updates locally. In the browser, <code>vsync=1</code> does nothing - instead, <code>requestAnimationFrame</code> controls timing.</p> <p>Note that variable frame rates can cause physics issues. The ball might get stuck in walls if frame skipping occurs. For beginners, the simpler <code>asyncio.sleep</code> method may be easier despite being less precise.</p>"},{"location":"user-guide/pygame-ce/#how-pygame-ce-integration-works","title":"How PyGame-CE integration works","text":"<p>The <code>py-game</code> script type bootstraps Pyodide with PyGame-CE pre-installed. Unlike regular scripts, PyGame-CE always runs on the main thread and cannot use workers.</p> <p>The <code>target</code> attribute specifies which canvas element displays the game. If omitted, PyScript assumes a <code>&lt;canvas id=\"canvas\"&gt;</code> element exists.</p> <p>Configuration through the <code>config</code> attribute adds packages or files like images and sounds. This is currently the only configuration PyGame-CE scripts support.</p> <p>Info</p> <p>The <code>input()</code> function works in PyGame-CE but uses the browser's native <code>prompt()</code> dialog. Since PyGame-CE runs on the main thread, this is the only way to block for user input. PyScript handles this automatically when you call <code>input()</code>.</p>"},{"location":"user-guide/pygame-ce/#experimental-status","title":"Experimental status","text":"<p>PyGame-CE support is experimental but functional. You can load <code>pygame-ce</code> manually through regular PyScript if needed, but the <code>py-game</code> script type simplifies multi-game pages and ensures game logic runs on the main thread where PyGame-CE expects it.</p> <p>Future PyScript versions may include other game engines alongside PyGame-CE. We welcome feedback, suggestions, and bug reports to improve this feature.</p>"},{"location":"user-guide/pygame-ce/#whats-next","title":"What's next","text":"<p>Now that you understand PyGame-CE support, explore these related topics:</p> <p>Terminal - Use the alternative REPL-style interface for interactive Python sessions.</p> <p>Editor - Create interactive Python coding environments in web pages with the built-in code editor.</p> <p>PyScript in JavaScript - drive PyScript from the world JavaScript. </p> <p>Plugins - Understand the plugin system, lifecycle hooks, and how to write plugins that integrate with PyScript.</p>"},{"location":"user-guide/terminal/","title":"Terminal","text":"<p>Traditional Python development often happens in terminals where you run scripts, interact with the REPL, and see output from <code>print()</code> statements. PyScript brings this familiar environment to the browser through a built-in terminal based on XTerm.js.</p> <p>This guide explains how to use PyScript's terminal for output, input, and interactive Python sessions in your browser applications.</p>"},{"location":"user-guide/terminal/#basic-terminal-output","title":"Basic terminal output","text":"<p>Enable the terminal by adding the <code>terminal</code> attribute to your script tag:</p> Hello world (in a terminal).<pre><code>&lt;script type=\"py\" terminal&gt;\nprint(\"hello world\")\n&lt;/script&gt;\n</code></pre> <p>This creates a read-only terminal displaying your program's output. Output appears in a terminal window on your page, familiar to anyone who's used Python in a traditional environment.</p> <p></p> <p>The terminal captures standard output, so all <code>print()</code> statements write to it automatically. This works with both Pyodide and MicroPython.</p>"},{"location":"user-guide/terminal/#interactive-input","title":"Interactive input","text":"<p>To accept user input with the <code>input()</code> function, you must run your code in a worker. Interactive terminals require workers to handle blocking input without freezing the page:</p> Use a worker for blocking input.<pre><code>&lt;script type=\"py\" terminal worker&gt;\nname = input(\"What is your name? \")\nprint(f\"Hello, {name}\")\n&lt;/script&gt;\n</code></pre> <p>The <code>worker</code> attribute ensures input operations don't block the main thread. Users can type into the terminal, and your code receives their input through the familiar <code>input()</code> function.</p> <p></p> <p>Without the worker, interactive input would freeze your page. The worker keeps the UI responsive whilst waiting for user input.</p>"},{"location":"user-guide/terminal/#interactive-repl","title":"Interactive REPL","text":"<p>For an interactive Python REPL session, use Python's <code>code</code> module:</p> Start an interactive REPL in the terminal.<pre><code>import code\ncode.interact()\n</code></pre> <p>This starts a full Python REPL in the terminal where users can type Python expressions and see results immediately:</p> <p></p> <p>The REPL provides command history, tab completion, and all the features you'd expect from a traditional Python interactive session. This is particularly useful for educational applications or debugging tools.</p>"},{"location":"user-guide/terminal/#programmatic-control","title":"Programmatic control","text":"<p>You can send code to the terminal programmatically from JavaScript. Give your script an ID, then call the <code>process()</code> method:</p> Use JavaScript to send Python to the terminal.<pre><code>&lt;script id=\"my-terminal\" type=\"mpy\" terminal worker&gt;&lt;/script&gt;\n&lt;script&gt;\n// From JavaScript, send Python code to the terminal.\nconst term = document.querySelector(\"#my-terminal\");\nawait term.process('print(\"Hello from JavaScript!\")');\n&lt;/script&gt;\n</code></pre> <p>This lets you build interfaces where buttons or other controls trigger Python execution in the terminal, useful for tutorials or interactive demonstrations.</p>"},{"location":"user-guide/terminal/#customising-the-terminal","title":"Customising the terminal","text":"<p>Each terminal provides access to the underlying XTerm.js Terminal instance through the <code>__terminal__</code> reference in Python or the <code>terminal</code> property in JavaScript.</p>"},{"location":"user-guide/terminal/#changing-appearance","title":"Changing appearance","text":"<p>Customise terminal appearance through XTerm.js options:</p> Customise appearances.<pre><code>&lt;script type=\"py\" terminal worker&gt;\nfrom pyscript import ffi\n# Change the font.\n__terminal__.options = ffi.to_js({\"fontFamily\": \"monospace\"})\nprint(\"Custom font terminal\")\n&lt;/script&gt;\n</code></pre> <p>This accesses XTerm.js's full configuration API, letting you adjust colours, fonts, cursor styles, and other visual properties.</p>"},{"location":"user-guide/terminal/#resizing","title":"Resizing","text":"<p>Control terminal dimensions programmatically:</p> Resize the terminal.<pre><code>if '__terminal__' in locals():\n__terminal__.resize(60, 10)  # (width, height)\n</code></pre> <p>This adjusts terminal size dynamically, useful when building responsive interfaces or compact terminal displays.</p>"},{"location":"user-guide/terminal/#clearing-output","title":"Clearing output","text":"<p>Clear the terminal programmatically:</p> Clear output.<pre><code>&lt;script type=\"mpy\" terminal worker&gt;\nprint(\"This will disappear\")\n__terminal__.clear()\nprint(\"This remains\")\n&lt;/script&gt;\n</code></pre> <p>Only output after the clear appears in the terminal.</p>"},{"location":"user-guide/terminal/#colours-and-formatting","title":"Colours and formatting","text":"<p>The terminal supports ANSI escape codes for text formatting:</p> Terminal colour support.<pre><code>&lt;script type=\"mpy\" terminal worker&gt;\nprint(\"This is \\033[1mbold\\033[0m\")\nprint(\"This is \\033[32mgreen\\033[0m\")\nprint(\"This is \\033[1m\\033[35mbold and purple\\033[0m\")\n&lt;/script&gt;\n</code></pre> <p>Use standard terminal control sequences for bold text, colours, and other formatting. This works like traditional terminal applications.</p>"},{"location":"user-guide/terminal/#xtermjs-addons","title":"XTerm.js addons","text":"<p>Extend terminal functionality using XTerm.js addons:</p> Using addons.<pre><code>&lt;py-config&gt;\n[js_modules.main]\n\"https://cdn.jsdelivr.net/npm/@xterm/addon-web-links/+esm\" = \"weblinks\"\n&lt;/py-config&gt;\n&lt;script type=\"py\" terminal&gt;\nfrom pyscript import js_modules\naddon = js_modules.weblinks.WebLinksAddon.new()\n__terminal__.loadAddon(addon)\nprint(\"Visit https://pyscript.net/\")\n&lt;/script&gt;\n</code></pre> <p>PyScript enables the WebLinksAddon by default, making URLs in terminal output automatically clickable. You can load other addons following the same pattern.</p>"},{"location":"user-guide/terminal/#micropython-repl-features","title":"MicroPython REPL features","text":"<p>MicroPython includes a comprehensive built-in REPL with several convenience features:</p> <p>Command history works through up and down arrows, letting you recall and edit previous commands. Tab completion shows available variables and object attributes when you press tab. Copy and paste works naturally for both single commands and paste mode for multi-line code.</p> <p>Control sequences like Ctrl+X work as expected, including paste mode toggles and interrupt signals.</p>"},{"location":"user-guide/terminal/#worker-versus-main-thread","title":"Worker versus main thread","text":"<p>MicroPython terminals work in both environments with different characteristics:</p> <p>Main thread terminals delegate <code>input()</code> to the browser's native <code>prompt()</code> dialog. This works but feels less integrated. Blocking code like infinite loops can freeze your page, so avoid long-running operations on the main thread.</p> <p>Worker terminals provide proper <code>input()</code> support directly in the terminal without blocking. Long-running code executes without freezing the page. The UI stays responsive even during computation.</p> <p>We recommend using the <code>worker</code> attribute for MicroPython terminals unless you have specific reasons to use the main thread. Workers provide a better user experience and prevent blocking issues.</p>"},{"location":"user-guide/terminal/#whats-next","title":"What's next","text":"<p>Now that you understand terminals, explore these related topics:</p> <p>Editor - Create interactive Python coding environments in web pages with the built-in code editor.</p> <p>PyGame - Use PyGame-CE with PyScript, covering the differences from traditional PyGame development and techniques for making games work well in the browser.</p> <p>PyScript in JavaScript - drive PyScript from the world JavaScript. </p> <p>Plugins - Understand the plugin system, lifecycle hooks, and how to write plugins that integrate with PyScript.</p>"},{"location":"user-guide/what/","title":"What is PyScript?","text":"<p>PyScript is an open source platform for running Python in modern web browsers.</p> <p>PyScript brings together two of the most vibrant technical ecosystems on the planet: the web and Python. It lets you build rich, interactive web applications using Python, without the need for a backend server or entanglements with browser-based JavaScript (although PyScript also works well in these two contexts).</p> <p>Write your application logic in Python, use Python libraries for data processing or visualisation, and deploy your work with just a URL. Your users run everything locally in their browser, making PyScript applications fast, secure, and easy to share.</p>"},{"location":"user-guide/what/#how-it-works","title":"How it works","text":"<p>PyScript is built on WebAssembly (abbreviated to WASM) - an instruction set for a virtual machine with an open specification and near-native performance. Modern browsers all support WebAssembly, making it a universal platform for running code beyond JavaScript.</p> <p>PyScript takes versions of the Python interpreter compiled to WebAssembly and makes them easy to use inside the browser. You write Python code, and PyScript handles all the complexity of loading the interpreter, managing the environment, and bridging between Python and the browser's JavaScript APIs.</p>"},{"location":"user-guide/what/#two-python-interpreters","title":"Two Python interpreters","text":"<p>PyScript supports two Python interpreters, letting you choose the right tool for your application:</p> <p></p> <p>Pyodide is the full CPython interpreter compiled to WebAssembly. It's the standard Python you already know: the same interpreter that runs on your laptop, with the same standard library and the same behaviour. Because it's genuine CPython, Pyodide gives you access to Python's vast ecosystem of packages from PyPI. Want to use NumPy, Pandas, Matplotlib, Scikit-learn, or thousands of other libraries? Pyodide makes it possible.</p> <p>Info</p> <p>Want to check if a third party package works with PyScript/Pyodide?</p> <p>Use this handy site!</p> <p></p> <p>MicroPython is a lean, efficient reimplementation of Python 3 that includes a comprehensive subset of the standard library. At just 170KB, MicroPython loads almost instantly, making it ideal for mobile devices, slow connections, or any time you want your app to start quickly. Despite its small size, MicroPython is surprisingly capable, exposing Python's full expressiveness to the browser.</p> <p>Both interpreters implement almost identical foreign function interfaces (FFI) to bridge Python and JavaScript, so your code works consistently regardless of which interpreter you choose (and PyScript provides abstractions around the differences between their FFIs).</p> <p>Tip</p> <p>When to use which interpreter:</p> <p>Choose Pyodide when you need access to Python's extensive computing stack (NumPy, Pandas, Matplotlib, etc.), when you're working with complex Python packages, or when you need full CPython compatibility.</p> <p>Choose MicroPython for mobile applications, when fast startup time matters, or when you're building lightweight applications that don't need heavy libraries.</p>"},{"location":"user-guide/what/#the-foreign-function-interface","title":"The foreign function interface","text":"<p>The FFI (foreign function interface) is how Python and JavaScript communicate in PyScript. It automatically translates between Python and JavaScript objects, letting you use browser APIs directly from your Python code.</p> <p>This bridge is bidirectional: Python can call JavaScript functions and access JavaScript objects, while JavaScript can call Python functions and access Python objects. The FFI handles all the type conversions automatically, so you can focus on writing your application logic.</p> <p>Want to manipulate the DOM? Access the browser's <code>document</code> object. Need to use a JavaScript library? Import it and call its functions from Python. The FFI makes it seamless.</p> <p>Put simply, PyScript helps Python and JavaScript to be friends that complement and amplify each others strengths.</p> <p>Learn more about the FFI in the high level DOM interaction guide or dive deep into the FFI's technical details.</p>"},{"location":"user-guide/what/#key-capabilities","title":"Key capabilities","text":"<p>PyScript provides a rich set of features that make building web applications with Python both powerful and enjoyable:</p>"},{"location":"user-guide/what/#full-web-platform-access","title":"Full web platform access","text":"<p>PyScript gives you complete access to the DOM and all the web APIs implemented by your browser. Through the FFI, Python works seamlessly with everything the browser offers, including any third-party JavaScript libraries included in your page.</p> <p>The <code>pyscript.web</code> module provides a Pythonic interface to the DOM, making it feel natural to work with web page elements from Python. Find elements with CSS selectors, manipulate content and attributes, handle events - all with idiomatic Python code.</p>"},{"location":"user-guide/what/#pythons-vast-ecosystem","title":"Python's vast ecosystem","text":"<p>Because Pyodide is genuine CPython compiled to WebAssembly, you have access to Python's deep and diverse ecosystem of libraries, frameworks, and modules. Whether you're doing data science, building visualisations, processing text, or working with APIs, there's probably a Python library to help.</p> <p>Got a favourite library in Python? Now you can use it in the browser and share your work with just a URL. No server required, no complex deployment - just Python running where your users are.</p> <p>Need to check if a package is supported by PyScript? Use our PyScript Packages website to check and/or report the status of any third party packages.</p>"},{"location":"user-guide/what/#ai-and-data-science-built-in","title":"AI and data science built in","text":"<p>Python is famous for its extraordinary usefulness in artificial intelligence and data science. The Pyodide interpreter comes with many of the libraries needed for this sort of work already included: NumPy, Pandas, Matplotlib, Scikit-learn, and more.</p> <p>Build interactive data visualisations, create machine learning demonstrations, or develop educational tools that let users experiment with algorithms - all running locally in the browser with no backend required!</p>"},{"location":"user-guide/what/#mobile-friendly-micropython","title":"Mobile-friendly MicroPython","text":"<p>Thanks to MicroPython's tiny size and fast startup, PyScript provides a compelling story for Python on mobile devices. Your application loads quickly on first visit and almost instantly on subsequent visits (thanks to browser caching).</p> <p>This makes PyScript practical for mobile web applications, progressive web apps, or any scenario where fast initial load matters.</p>"},{"location":"user-guide/what/#background-processing-with-workers","title":"Background processing with workers","text":"<p>Expensive computation can block the main thread, making your application appear frozen. PyScript supports web workers, letting you run Python code in background threads that don't interfere with the user interface.</p> <p>Think of workers as independent subprocesses in your web page. They're perfect for data processing, simulations, or any CPU-intensive work. Learn more in the workers guide.</p>"},{"location":"user-guide/what/#device-capabilities","title":"Device capabilities","text":"<p>PyScript gives your Python code access to modern browser capabilities: capture photos and video with the camera, record media, read and write files, store data locally, and integrate with all the other available web APIs.</p> <p>Build applications that feel native, with access to device hardware and local storage, all from Python.</p>"},{"location":"user-guide/what/#extensible-plugin-system","title":"Extensible plugin system","text":"<p>PyScript has a small, efficient core called PolyScript. Most of PyScript's functionality is actually implemented through PolyScript's plugin system.</p> <p>This architecture ensures a clear separation of concerns: PolyScript focuses on being small, efficient, and powerful, whilst the PyScript plugins build Pythonically upon these solid foundations.</p> <p>The plugin system also means developers independent of the PyScript core team can create and contribute plugins whose functionality reflects the unique and diverse needs of PyScript's users.</p>"},{"location":"user-guide/what/#our-aim-digital-empowerment","title":"Our aim: digital empowerment","text":"<p>At the core of PyScript is a philosophy of digital empowerment.</p> <p>The web is the world's most ubiquitous computing platform, mature and familiar to billions of people. Python is one of the world's most popular programming languages: it's easy to teach and learn, used across countless domains (data science, education, games, embedded systems, artificial intelligence, finance, physics, film production - to name but a few), and the Python ecosystem contains a vast number of popular and powerful libraries.</p> <p>PyScript brings together the ubiquity, familiarity, and accessibility of the web with the power, depth, and expressiveness of Python.</p> <p>This means PyScript isn't just for programming experts but, as we like to say, for the 99% of the rest of the planet who use computers.</p> <p>By making Python accessible in the browser, PyScript lowers barriers to creating and sharing software. You don't need to understand server deployment, database management, or complex build processes. You don't need to learn a new language or framework. You just need Python and a web browser.</p> <p>This democratisation of web development means more people can create tools to solve their own problems, share their knowledge with others, and contribute to the digital world we all inhabit.</p>"},{"location":"user-guide/what/#what-you-can-build","title":"What you can build","text":"<p>PyScript opens up new possibilities for Python developers and new capabilities for web applications:</p> <p>Educational tools and interactive tutorials - Create lessons where students can experiment with code directly in their browser, see visualisations update in real-time, and learn by doing.</p> <p>Data analysis dashboards - Build interactive visualisations of your data using Pandas and Matplotlib, then share them with colleagues who can explore the data themselves without installing anything.</p> <p>Scientific simulations - Develop models and simulations that run entirely in the browser, letting others experiment with parameters and see results instantly.</p> <p>Creative coding projects - Make generative art, music visualisations, or interactive games using Python libraries you already know.</p> <p>Rapid prototypes - Test ideas quickly without setting up backend infrastructure. Share prototypes with a simple URL.</p> <p>Browser-based tools - Create utilities that process files, transform data, or automate tasks - all running locally for privacy and speed.</p> <p>The only limit is your imagination (and perhaps your users' patience whilst the interpreter loads, but that's getting faster all the time).</p>"},{"location":"user-guide/what/#next-steps","title":"Next steps","text":"<p>Ready to start building with PyScript?</p> <p>Explore interacting with the web page to learn how a PyScript application interacts with the browser, or jump to  Configuration to understand how to set up your Python environment.</p> <p>Want to see PyScript in action first? Check out the example applications to see what's possible and learn from working code.</p>"},{"location":"user-guide/workers/","title":"Workers","text":"<p>Workers run Python code in background threads, keeping your user interface responsive. Without workers, long computations block the main thread and freeze the page. With workers, heavy tasks run in the background whilst the UI stays smooth and interactive.</p> <p>This guide explains how to use workers in PyScript, when to use them, and how to structure your applications to take advantage of background processing.</p>"},{"location":"user-guide/workers/#understanding-the-problem","title":"Understanding the problem","text":"<p>JavaScript (and therefore PyScript) runs on a single \"main\" thread. When Python code executes, nothing else can happen. Long computations freeze the interface. Users cannot click buttons, scroll, or interact with the page until the computation completes.</p> <p>Workers solve this problem by running Python in separate threads. The main thread handles the UI. Workers handle computation. Both run simultaneously, so your application remains responsive even during heavy processing.</p> <p>Warning</p> <p>For workers to work properly, your web server must send specific HTTP headers:</p> <pre><code>Access-Control-Allow-Origin: *\nCross-Origin-Opener-Policy: same-origin\nCross-Origin-Embedder-Policy: require-corp\nCross-Origin-Resource-Policy: cross-origin\n</code></pre> <p>If you don't have control over your web server's headers, we recommend you make use of the mini-coi project (see their README for details).</p>"},{"location":"user-guide/workers/#defining-workers","title":"Defining workers","text":"<p>Workers are defined with <code>&lt;script&gt;</code> tags that have a <code>worker</code> attribute:</p> Use of the 'worker' attribute.<pre><code>&lt;script type=\"py\" worker name=\"calculator\" config='{\"packages\":[\"numpy\"]}'&gt;\nimport numpy as np\ndef add_arrays(a, b):\n\"\"\"\n    Add two arrays using numpy.\n    \"\"\"\nreturn (np.array(a) + np.array(b)).tolist()\n# Export functions to make them accessible.\n__export__ = [\"add_arrays\"]\n&lt;/script&gt;\n</code></pre> <p>The <code>worker</code> attribute marks the script as a worker. The <code>name</code> attribute provides a unique identifier for accessing the worker from other code. The <code>type</code> attribute specifies the interpreter: <code>py</code> for Pyodide or <code>mpy</code> for MicroPython.</p> <p>Workers must explicitly export functions using the <code>__export__</code> list. Only exported functions are accessible from the main thread. This keeps the API clear and prevents accidental exposure of internal implementation details.</p>"},{"location":"user-guide/workers/#accessing-workers","title":"Accessing workers","text":"<p>Access workers from the main thread using the <code>workers</code> object:</p> Accessing workers.<pre><code>from pyscript import workers\n# Get the worker by name.\ncalc = await workers[\"calculator\"]\n# Call its exported function.\nresult = await calc.add_arrays([1, 2, 3], [4, 5, 6])\nprint(result)  # [5, 7, 9]\n</code></pre> <p>Worker access is asynchronous because workers may not be ready immediately. They need time to download and initialise the interpreter, load configured packages, execute the worker script, and register exported functions. The <code>await</code> ensures the worker is fully ready before you use it.</p> <p>Once you have a worker reference, call its exported functions like normal async functions. All calls must be awaited, and all data passed between the main thread and workers must be serialisable (numbers, strings, lists, dictionaries, booleans, None). You cannot pass functions, classes, or complex objects.</p>"},{"location":"user-guide/workers/#choosing-interpreters","title":"Choosing interpreters","text":"<p>PyScript supports two Python interpreters, and you can mix them based on your needs. The main thread and workers can use different interpreters.</p> <p>Pyodide (<code>type=\"py\"</code>) provides full CPython compatibility with access to weighty packages like numpy and pandas. It has a larger download size and slower startup, but offers the complete Python ecosystem. Use Pyodide for heavy computation requiring numerical libraries, tasks needing the full Python ecosystem, or complex data processing.</p> <p>MicroPython (<code>type=\"mpy\"</code>) provides fast startup with a small footprint. It includes core Python only, with no pip packages. Use MicroPython for lightweight tasks, quick worker startup, or simple computations when you don't need packages.</p> <p>A common pattern is MicroPython on the main thread for a fast, responsive UI, with Pyodide in workers for powerful computation when needed:</p> Different interpreters.<pre><code>&lt;!-- Fast main thread. --&gt;\n&lt;script type=\"mpy\" src=\"./main.py\"&gt;&lt;/script&gt;\n&lt;!-- Powerful worker. --&gt;\n&lt;script type=\"py\" worker name=\"compute\" config='{\"packages\":[\"numpy\"]}'&gt;\nimport numpy as np\ndef crunch_numbers(data):\nreturn np.array(data).sum()\n__export__ = [\"crunch_numbers\"]\n&lt;/script&gt;\n</code></pre>"},{"location":"user-guide/workers/#creating-workers-dynamically","title":"Creating workers dynamically","text":"<p>Create workers from Python code using <code>create_named_worker()</code>:</p> Dynamic worker creation.<pre><code>from pyscript import create_named_worker\n# Create a Pyodide worker.\nworker = await create_named_worker(\nsrc=\"./background_tasks.py\",\nname=\"task-processor\",\nconfig={\"packages\": [\"pandas\"]}\n)\n# Use it immediately.\nresult = await worker.process_data()\n</code></pre> <p>This is useful for spawning workers based on user actions, creating multiple workers for parallel processing, or loading workers conditionally based on application state.</p> <p>The function accepts four parameters. The <code>src</code> parameter specifies the path to the worker's Python file. The <code>name</code> parameter provides a unique identifier for the worker. The <code>config</code> parameter accepts a configuration dictionary or JSON string (optional). The <code>type</code> parameter specifies the interpreter: <code>\"py\"</code> (default) or <code>\"mpy\"</code> (optional).</p>"},{"location":"user-guide/workers/#configuration","title":"Configuration","text":"<p>Workers support the same configuration as main thread scripts. You can specify packages to install, files to fetch, and JavaScript modules to import. See the Configuration guide for complete details on available options.</p> <p>The configuration is provided either inline as a JSON string in the <code>config</code> attribute, or as a path to a configuration file:</p> Different worker configurations.<pre><code>&lt;!-- Inline configuration. --&gt;\n&lt;script type=\"py\" worker name=\"processor\" config='{\"packages\":[\"pandas\"]}'&gt;\n...\n&lt;/script&gt;\n&lt;!-- Configuration file. --&gt;\n&lt;script type=\"py\" worker name=\"processor\" config=\"./worker-config.json\"&gt;\n...\n&lt;/script&gt;\n</code></pre>"},{"location":"user-guide/workers/#example-prime-number-calculator","title":"Example: Prime number calculator","text":"<p>Here's a complete example demonstrating workers in action:</p> <p>View the complete source code.</p> <p>This application finds prime numbers using the Sieve of Eratosthenes algorithm. The heavy computation runs in a worker, keeping the main thread responsive.</p> <p>The HTML page defines two scripts. The main thread uses MicroPython and handles the UI:</p> <pre><code>&lt;script type=\"mpy\" src=\"./main.py\"&gt;&lt;/script&gt;\n</code></pre> <p>The worker uses Pyodide with numpy and does the computation:</p> <pre><code>&lt;script type=\"py\" worker name=\"primes\" config=\"./pyscript.json\"&gt;\n</code></pre> <p>When you click \"Find Primes\", the main thread gets a reference to the worker, calls the worker's function, and displays the results when they arrive:</p> Finding prime numbers (on the main thread).<pre><code>from pyscript import workers\nfrom pyscript.web import page\n@when(\"click\", \"#find-btn\")\nasync def find_primes(event):\n# Get the worker.\nworker = await workers[\"primes\"]\n# Check if numpy should be used.\nuse_numpy = page[\"#use-numpy\"].checked\n# Call its exported function.\nresult = await worker.find_primes(limit, use_numpy)\n# Display the results.\nprint(f\"Found {result['count']} primes\")\n</code></pre> <p>The worker script defines the computation and exports it:</p> Finding prime numbers (on the worker).<pre><code>import numpy as np\ndef find_primes(limit, use_numpy=True):\n# Use numpy's efficient array operations or pure Python.\n# ... Sieve of Eratosthenes algorithm ...\nreturn {\"count\": len(primes), \"first_20\": first_20_primes}\n__export__ = [\"find_primes\"]\n</code></pre> <p>Watch the pulsing green indicator whilst computing. It never stops, proving the main thread stays responsive. Try entering different values to see the worker handle various workloads. The \"Use NumPy\" checkbox lets you compare the performance of numpy's array operations against pure Python - a nice demonstration of why numerical libraries matter for computational tasks.</p>"},{"location":"user-guide/workers/#understanding-limitations","title":"Understanding limitations","text":"<p>Workers have separate memory spaces. Each worker has its own memory, and you cannot share objects between workers or with the main thread. All communication happens via function calls with serialised data.</p> <p>Only serialisable data can pass between threads. Function arguments and return values must be JSON-serialisable: numbers, strings, lists, dictionaries, booleans, and None work. Functions, classes, file handles, and numpy arrays (convert to lists first) do not work.</p> <p>Workers need time to initialise. Pyodide workers especially may take time to download packages and start up. The first call may be slow. Plan your application accordingly and consider showing loading indicators during initialisation.</p> <p>User activation requirements apply. Creating workers dynamically with <code>create_named_worker()</code> during page load works fine. However, if your worker needs to access certain browser features, those features may require user activation (a button click or similar interaction).</p>"},{"location":"user-guide/workers/#whats-next","title":"What's next","text":"<p>Now that you understand workers, explore these related topics to deepen your knowledge.</p> <p>Architecture guide - provides technical details about how PyScript implements workers using PolyScript and Coincident if you're interested in the underlying mechanisms.</p> <p>Filesystem - Learn more about the virtual filesystem and how the <code>files</code> option works.</p> <p>FFI - Understand how JavaScript modules integrate with Python through the foreign function interface.</p> <p>Media - Capture photos and video with the camera or  record audio with your microphone.</p> <p>Offline - Use PyScript while not connected to the internet.</p>"}]}